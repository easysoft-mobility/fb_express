{
  "{\"filename\":\"/app/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/index.js",
      "filenameRelative": "/app/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "// https://developers.facebook.com/docs/messenger-platform/getting-started/webhook-setup/\n// https://developers.facebook.com/docs/messenger-platform/getting-started/app-setup\n// https://developers.facebook.com/docs/messenger-platform/getting-started/quick-start\n\n\"use strict\";\n\n// Imports dependencies and set up http server\n\nvar express = require(\"express\"),\n    bodyParser = require(\"body-parser\"),\n    app = express().use(bodyParser.json()); // creates express http server\nvar request = require(\"request\");\nvar dotenv = require('dotenv');\nvar crypto = require('crypto');\nvar mongoose = require('mongoose');\nvar fs = require('fs');\nvar https = require('https');\ndotenv.config();\n\n// Get page access token\nvar PAGE_ACCESS_TOKEN = process.env.PAGE_ACCESS_TOKEN;\n\n// Setup to connect to DB\nvar DB_PASSWORD = process.env.DB_PASSWORD;\nmongoose.connect('mongodb+srv://mongoadmin:' + DB_PASSWORD + '@fb-hack-chatbot-cevnk.mongodb.net/fbmsg', { useNewUrlParser: true, useCreateIndex: true, useFindAndModify: false }).then(function () {\n  return console.log(\"DB Connection successful\");\n});\nmongoose.Promise = global.Promise;\n\n// Get page access token\nvar FB_APP_SECRET = process.env.FB_APP_SECRET;\nvar appsecret_proof = crypto.createHmac('sha256', FB_APP_SECRET).update(PAGE_ACCESS_TOKEN).digest('hex');\n\n//Import Schema\nrequire('./models/User');\nrequire('./models/Product');\nrequire('./models/Cart');\nrequire('./models/Order');\n\n//Import routes\napp.use(require('./routes'));\n\n// Sets server port and logs message on success\nvar server = https.createServer({\n  key: fs.readFileSync('../server.key'),\n  cert: fs.readFileSync('../server.cert')\n}, app).listen(process.env.PORT || 3000, function () {\n  console.log('Webhooks istening on port ' + server.address().port);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiYm9keVBhcnNlciIsImFwcCIsInVzZSIsImpzb24iLCJyZXF1ZXN0IiwiZG90ZW52IiwiY3J5cHRvIiwibW9uZ29vc2UiLCJmcyIsImh0dHBzIiwiY29uZmlnIiwiUEFHRV9BQ0NFU1NfVE9LRU4iLCJwcm9jZXNzIiwiZW52IiwiREJfUEFTU1dPUkQiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlQ3JlYXRlSW5kZXgiLCJ1c2VGaW5kQW5kTW9kaWZ5IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJQcm9taXNlIiwiZ2xvYmFsIiwiRkJfQVBQX1NFQ1JFVCIsImFwcHNlY3JldF9wcm9vZiIsImNyZWF0ZUhtYWMiLCJ1cGRhdGUiLCJkaWdlc3QiLCJzZXJ2ZXIiLCJjcmVhdGVTZXJ2ZXIiLCJrZXkiLCJyZWFkRmlsZVN5bmMiLCJjZXJ0IiwibGlzdGVuIiwiUE9SVCIsImFkZHJlc3MiLCJwb3J0Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBQ0EsSUFBTUEsVUFBVUMsUUFBUSxTQUFSLENBQWhCO0FBQUEsSUFDRUMsYUFBYUQsUUFBUSxhQUFSLENBRGY7QUFBQSxJQUVFRSxNQUFNSCxVQUFVSSxHQUFWLENBQWNGLFdBQVdHLElBQVgsRUFBZCxDQUZSLEMsQ0FFMEM7QUFDMUMsSUFBTUMsVUFBVUwsUUFBUSxTQUFSLENBQWhCO0FBQ0EsSUFBTU0sU0FBU04sUUFBUSxRQUFSLENBQWY7QUFDQSxJQUFNTyxTQUFTUCxRQUFRLFFBQVIsQ0FBZjtBQUNBLElBQU1RLFdBQVdSLFFBQVEsVUFBUixDQUFqQjtBQUNBLElBQUlTLEtBQUtULFFBQVEsSUFBUixDQUFUO0FBQ0EsSUFBSVUsUUFBUVYsUUFBUSxPQUFSLENBQVo7QUFDQU0sT0FBT0ssTUFBUDs7QUFFQTtBQUNBLElBQU1DLG9CQUFvQkMsUUFBUUMsR0FBUixDQUFZRixpQkFBdEM7O0FBRUE7QUFDQSxJQUFNRyxjQUFjRixRQUFRQyxHQUFSLENBQVlDLFdBQWhDO0FBQ0FQLFNBQVNRLE9BQVQsQ0FBaUIsOEJBQThCRCxXQUE5QixHQUE0QywwQ0FBN0QsRUFBeUcsRUFBRUUsaUJBQWlCLElBQW5CLEVBQXlCQyxnQkFBZ0IsSUFBekMsRUFBK0NDLGtCQUFrQixLQUFqRSxFQUF6RyxFQUFtTEMsSUFBbkwsQ0FBd0w7QUFBQSxTQUFNQyxRQUFRQyxHQUFSLENBQVksMEJBQVosQ0FBTjtBQUFBLENBQXhMO0FBQ0FkLFNBQVNlLE9BQVQsR0FBbUJDLE9BQU9ELE9BQTFCOztBQUVBO0FBQ0EsSUFBTUUsZ0JBQWdCWixRQUFRQyxHQUFSLENBQVlXLGFBQWxDO0FBQ0EsSUFBTUMsa0JBQWtCbkIsT0FBT29CLFVBQVAsQ0FBa0IsUUFBbEIsRUFBNEJGLGFBQTVCLEVBQTJDRyxNQUEzQyxDQUFrRGhCLGlCQUFsRCxFQUFxRWlCLE1BQXJFLENBQTRFLEtBQTVFLENBQXhCOztBQUVBO0FBQ0E3QixRQUFRLGVBQVI7QUFDQUEsUUFBUSxrQkFBUjtBQUNBQSxRQUFRLGVBQVI7QUFDQUEsUUFBUSxnQkFBUjs7QUFFQTtBQUNBRSxJQUFJQyxHQUFKLENBQVFILFFBQVEsVUFBUixDQUFSOztBQUVBO0FBQ0EsSUFBSThCLFNBQVNwQixNQUFNcUIsWUFBTixDQUFtQjtBQUM5QkMsT0FBS3ZCLEdBQUd3QixZQUFILENBQWdCLGVBQWhCLENBRHlCO0FBRTlCQyxRQUFNekIsR0FBR3dCLFlBQUgsQ0FBZ0IsZ0JBQWhCO0FBRndCLENBQW5CLEVBR1YvQixHQUhVLEVBR0xpQyxNQUhLLENBR0V0QixRQUFRQyxHQUFSLENBQVlzQixJQUFaLElBQW9CLElBSHRCLEVBRzRCLFlBQVk7QUFDbkRmLFVBQVFDLEdBQVIsQ0FBWSwrQkFBK0JRLE9BQU9PLE9BQVAsR0FBaUJDLElBQTVEO0FBQ0QsQ0FMWSxDQUFiIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9hcHAiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2RvY3MvbWVzc2VuZ2VyLXBsYXRmb3JtL2dldHRpbmctc3RhcnRlZC93ZWJob29rLXNldHVwL1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS9kb2NzL21lc3Nlbmdlci1wbGF0Zm9ybS9nZXR0aW5nLXN0YXJ0ZWQvYXBwLXNldHVwXG4vLyBodHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2RvY3MvbWVzc2VuZ2VyLXBsYXRmb3JtL2dldHRpbmctc3RhcnRlZC9xdWljay1zdGFydFxuXG5cInVzZSBzdHJpY3RcIjtcblxuLy8gSW1wb3J0cyBkZXBlbmRlbmNpZXMgYW5kIHNldCB1cCBodHRwIHNlcnZlclxuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpLFxuICBib2R5UGFyc2VyID0gcmVxdWlyZShcImJvZHktcGFyc2VyXCIpLFxuICBhcHAgPSBleHByZXNzKCkudXNlKGJvZHlQYXJzZXIuanNvbigpKTsgLy8gY3JlYXRlcyBleHByZXNzIGh0dHAgc2VydmVyXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZShcInJlcXVlc3RcIik7XG5jb25zdCBkb3RlbnYgPSByZXF1aXJlKCdkb3RlbnYnKTtcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xudmFyIGZzID0gcmVxdWlyZSgnZnMnKVxudmFyIGh0dHBzID0gcmVxdWlyZSgnaHR0cHMnKVxuZG90ZW52LmNvbmZpZygpO1xuXG4vLyBHZXQgcGFnZSBhY2Nlc3MgdG9rZW5cbmNvbnN0IFBBR0VfQUNDRVNTX1RPS0VOID0gcHJvY2Vzcy5lbnYuUEFHRV9BQ0NFU1NfVE9LRU47XG5cbi8vIFNldHVwIHRvIGNvbm5lY3QgdG8gREJcbmNvbnN0IERCX1BBU1NXT1JEID0gcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQ7XG5tb25nb29zZS5jb25uZWN0KCdtb25nb2RiK3NydjovL21vbmdvYWRtaW46JyArIERCX1BBU1NXT1JEICsgJ0BmYi1oYWNrLWNoYXRib3QtY2V2bmsubW9uZ29kYi5uZXQvZmJtc2cnLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlQ3JlYXRlSW5kZXg6IHRydWUsIHVzZUZpbmRBbmRNb2RpZnk6IGZhbHNlIH0pLnRoZW4oKCkgPT4gY29uc29sZS5sb2coXCJEQiBDb25uZWN0aW9uIHN1Y2Nlc3NmdWxcIikpO1xubW9uZ29vc2UuUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuXG4vLyBHZXQgcGFnZSBhY2Nlc3MgdG9rZW5cbmNvbnN0IEZCX0FQUF9TRUNSRVQgPSBwcm9jZXNzLmVudi5GQl9BUFBfU0VDUkVUO1xuY29uc3QgYXBwc2VjcmV0X3Byb29mID0gY3J5cHRvLmNyZWF0ZUhtYWMoJ3NoYTI1NicsIEZCX0FQUF9TRUNSRVQpLnVwZGF0ZShQQUdFX0FDQ0VTU19UT0tFTikuZGlnZXN0KCdoZXgnKVxuXG4vL0ltcG9ydCBTY2hlbWFcbnJlcXVpcmUoJy4vbW9kZWxzL1VzZXInKTtcbnJlcXVpcmUoJy4vbW9kZWxzL1Byb2R1Y3QnKTtcbnJlcXVpcmUoJy4vbW9kZWxzL0NhcnQnKTtcbnJlcXVpcmUoJy4vbW9kZWxzL09yZGVyJyk7XG5cbi8vSW1wb3J0IHJvdXRlc1xuYXBwLnVzZShyZXF1aXJlKCcuL3JvdXRlcycpKTtcblxuLy8gU2V0cyBzZXJ2ZXIgcG9ydCBhbmQgbG9ncyBtZXNzYWdlIG9uIHN1Y2Nlc3NcbnZhciBzZXJ2ZXIgPSBodHRwcy5jcmVhdGVTZXJ2ZXIoe1xuICBrZXk6IGZzLnJlYWRGaWxlU3luYygnLi4vc2VydmVyLmtleScpLFxuICBjZXJ0OiBmcy5yZWFkRmlsZVN5bmMoJy4uL3NlcnZlci5jZXJ0Jylcbn0sIGFwcCkubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMCwgZnVuY3Rpb24gKCkge1xuICBjb25zb2xlLmxvZygnV2ViaG9va3MgaXN0ZW5pbmcgb24gcG9ydCAnICsgc2VydmVyLmFkZHJlc3MoKS5wb3J0KTtcbn0pO1xuXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "bodyParser",
        "app",
        "use",
        "json",
        "request",
        "dotenv",
        "crypto",
        "mongoose",
        "fs",
        "https",
        "config",
        "PAGE_ACCESS_TOKEN",
        "process",
        "env",
        "DB_PASSWORD",
        "connect",
        "useNewUrlParser",
        "useCreateIndex",
        "useFindAndModify",
        "then",
        "console",
        "log",
        "Promise",
        "global",
        "FB_APP_SECRET",
        "appsecret_proof",
        "createHmac",
        "update",
        "digest",
        "server",
        "createServer",
        "key",
        "readFileSync",
        "cert",
        "listen",
        "PORT",
        "address",
        "port"
      ],
      "mappings": "AAAA;AACA;AACA;;AAEA;;AAEA;;AACA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AAAA,IACEC,aAAaD,QAAQ,aAAR,CADf;AAAA,IAEEE,MAAMH,UAAUI,GAAV,CAAcF,WAAWG,IAAX,EAAd,CAFR,C,CAE0C;AAC1C,IAAMC,UAAUL,QAAQ,SAAR,CAAhB;AACA,IAAMM,SAASN,QAAQ,QAAR,CAAf;AACA,IAAMO,SAASP,QAAQ,QAAR,CAAf;AACA,IAAMQ,WAAWR,QAAQ,UAAR,CAAjB;AACA,IAAIS,KAAKT,QAAQ,IAAR,CAAT;AACA,IAAIU,QAAQV,QAAQ,OAAR,CAAZ;AACAM,OAAOK,MAAP;;AAEA;AACA,IAAMC,oBAAoBC,QAAQC,GAAR,CAAYF,iBAAtC;;AAEA;AACA,IAAMG,cAAcF,QAAQC,GAAR,CAAYC,WAAhC;AACAP,SAASQ,OAAT,CAAiB,8BAA8BD,WAA9B,GAA4C,0CAA7D,EAAyG,EAAEE,iBAAiB,IAAnB,EAAyBC,gBAAgB,IAAzC,EAA+CC,kBAAkB,KAAjE,EAAzG,EAAmLC,IAAnL,CAAwL;AAAA,SAAMC,QAAQC,GAAR,CAAY,0BAAZ,CAAN;AAAA,CAAxL;AACAd,SAASe,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA;AACA,IAAME,gBAAgBZ,QAAQC,GAAR,CAAYW,aAAlC;AACA,IAAMC,kBAAkBnB,OAAOoB,UAAP,CAAkB,QAAlB,EAA4BF,aAA5B,EAA2CG,MAA3C,CAAkDhB,iBAAlD,EAAqEiB,MAArE,CAA4E,KAA5E,CAAxB;;AAEA;AACA7B,QAAQ,eAAR;AACAA,QAAQ,kBAAR;AACAA,QAAQ,eAAR;AACAA,QAAQ,gBAAR;;AAEA;AACAE,IAAIC,GAAJ,CAAQH,QAAQ,UAAR,CAAR;;AAEA;AACA,IAAI8B,SAASpB,MAAMqB,YAAN,CAAmB;AAC9BC,OAAKvB,GAAGwB,YAAH,CAAgB,eAAhB,CADyB;AAE9BC,QAAMzB,GAAGwB,YAAH,CAAgB,gBAAhB;AAFwB,CAAnB,EAGV/B,GAHU,EAGLiC,MAHK,CAGEtB,QAAQC,GAAR,CAAYsB,IAAZ,IAAoB,IAHtB,EAG4B,YAAY;AACnDf,UAAQC,GAAR,CAAY,+BAA+BQ,OAAOO,OAAP,GAAiBC,IAA5D;AACD,CALY,CAAb",
      "file": "index.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "// https://developers.facebook.com/docs/messenger-platform/getting-started/webhook-setup/\n// https://developers.facebook.com/docs/messenger-platform/getting-started/app-setup\n// https://developers.facebook.com/docs/messenger-platform/getting-started/quick-start\n\n\"use strict\";\n\n// Imports dependencies and set up http server\nconst express = require(\"express\"),\n  bodyParser = require(\"body-parser\"),\n  app = express().use(bodyParser.json()); // creates express http server\nconst request = require(\"request\");\nconst dotenv = require('dotenv');\nconst crypto = require('crypto');\nconst mongoose = require('mongoose');\nvar fs = require('fs')\nvar https = require('https')\ndotenv.config();\n\n// Get page access token\nconst PAGE_ACCESS_TOKEN = process.env.PAGE_ACCESS_TOKEN;\n\n// Setup to connect to DB\nconst DB_PASSWORD = process.env.DB_PASSWORD;\nmongoose.connect('mongodb+srv://mongoadmin:' + DB_PASSWORD + '@fb-hack-chatbot-cevnk.mongodb.net/fbmsg', { useNewUrlParser: true, useCreateIndex: true, useFindAndModify: false }).then(() => console.log(\"DB Connection successful\"));\nmongoose.Promise = global.Promise;\n\n// Get page access token\nconst FB_APP_SECRET = process.env.FB_APP_SECRET;\nconst appsecret_proof = crypto.createHmac('sha256', FB_APP_SECRET).update(PAGE_ACCESS_TOKEN).digest('hex')\n\n//Import Schema\nrequire('./models/User');\nrequire('./models/Product');\nrequire('./models/Cart');\nrequire('./models/Order');\n\n//Import routes\napp.use(require('./routes'));\n\n// Sets server port and logs message on success\nvar server = https.createServer({\n  key: fs.readFileSync('../server.key'),\n  cert: fs.readFileSync('../server.cert')\n}, app).listen(process.env.PORT || 3000, function () {\n  console.log('Webhooks istening on port ' + server.address().port);\n});\n\n"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/DBConn.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "getAllProducts",
            "getProductsByType",
            "getProductByID",
            "getProductPrice",
            "getProductDesc",
            "getProductsByName",
            "getProductByNameVar",
            "checkUser",
            "createUser"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "getAllProducts",
              "exported": "getAllProducts"
            },
            {
              "kind": "local",
              "local": "getProductsByType",
              "exported": "getProductsByType"
            },
            {
              "kind": "local",
              "local": "getProductByID",
              "exported": "getProductByID"
            },
            {
              "kind": "local",
              "local": "getProductPrice",
              "exported": "getProductPrice"
            },
            {
              "kind": "local",
              "local": "getProductDesc",
              "exported": "getProductDesc"
            },
            {
              "kind": "local",
              "local": "getProductsByName",
              "exported": "getProductsByName"
            },
            {
              "kind": "local",
              "local": "getProductByNameVar",
              "exported": "getProductByNameVar"
            },
            {
              "kind": "local",
              "local": "checkUser",
              "exported": "checkUser"
            },
            {
              "kind": "local",
              "local": "createUser",
              "exported": "createUser"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/DBConn.js",
      "filenameRelative": "/app/DBConn.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "DBConn.js",
      "sourceFileName": "DBConn.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "DBConn"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar mongoose = require('mongoose');\n\nvar userSchema = new mongoose.Schema({\n    id: String,\n    name: String\n});\n\nvar productsSchema = new mongoose.Schema({\n    id: String,\n    pid: String,\n    title: String,\n    description: String,\n    availability: String,\n    inventory: String,\n    condition: String,\n    price: String,\n    link: String,\n    image_link: String,\n    brand: String,\n    item_group_id: String,\n    color: String,\n    pattern: String,\n    product_type: String,\n    allergens: String\n});\n\nvar cartSchema = new mongoose.Schema({\n    uid: String,\n    pid: String,\n    quantity: Number,\n    price: Number\n});\n\nvar ordersSchema = new mongoose.Schema({\n    uid: String,\n    trackingNum: Number,\n    orderStatus: Number,\n    orderDateTime: Date,\n    orderDetails: [{ name: String, pid: String, quantity: Number, price: Number }]\n    // Are we able to find a way to use Double/Float for datatypes?\n});\n\nvar User = mongoose.model('users', userSchema);\nvar Product = mongoose.model('products', productsSchema);\nvar Cart = mongoose.model('cart', cartSchema);\nvar Order = mongoose.model('orders', ordersSchema);\n\n// Create user if user not found in database\nfunction createUser(fbid, name) {\n    var newUser = new User({\n        id: fbid,\n        name: name\n    });\n    newUser.save().then(function (doc) {\n        return console.log(doc);\n    }).catch(function (err) {\n        return console.log(err);\n    });\n}\n\nfunction checkUser(fbid) {\n    return User.find({ 'id': fbid }).then(function (user) {\n        return user;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n//Get all products\nfunction getAllProducts() {\n    return Product.find({}).then(function (products) {\n        return products;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n//Get product by type\nfunction getProductsByType(typeValue) {\n    return Product.find({ 'product_type': typeValue }).then(function (products) {\n        return products;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n//Get product by ID\nfunction getProductByID(pid) {\n    return Product.find({ 'pid': pid }).then(function (prod) {\n        return prod;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n// Get product Price by ID\nfunction getProductPrice(pid) {\n    return Product.find({ 'pid': pid }).then(function (prod) {\n        return prod[0].price;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n// get product Desc by ID\nfunction getProductDesc(pid) {\n    return Product.find({ 'pid': pid }).then(function (prod) {\n        return prod[0].description;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n// get products with all the differnt variations by Name\nfunction getProductsByName(name) {\n    return Product.find({ 'title': name }).then(function (prod) {\n        return prod;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n// get product by name and variation\nfunction getProductByNameVar(name, variation) {\n    return Product.find({ 'title': name, 'pattern': variation }).then(function (prod) {\n        return prod;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n//Check if user has an active shopping cart\nfunction checkCart(userID, products, quantity) {\n    pool.query('SELECT * FROM cart where uid=$1', [userID], function (error, results) {\n        if (error) {\n            throw error;\n        }\n        rowCount = results.rowCount;\n        console.log(results);\n        if (rowCount == 0) {\n            createCart(userID, products, quantity);\n        } else {\n            products += results.something;\n            quantity += results.something;\n            updateCart(userID, products, quantity);\n        }\n    });\n}\n\n// Initial creation of a fresh cart\nfunction createCart(userID, products, quantity) {\n    pool.query('INSERT INTO cart(uid,products,quantity) VALUES ($1,$2,$3)', [userID, products, quantity], function (error, reuslts) {\n        if (error) {\n            throw error;\n        }\n        console.log(results.insertId);\n    });\n}\n\n// Update cart if user has an active cart\nfunction updateCart(userID, products, quantity) {\n    pool.query('UPDATE cart SET products=$1, quantity=$2 WHERE uid=$3', [products, quantity, userID], function (error, results) {\n        if (error) {\n            throw error;\n        }\n        console.log(results.insertId);\n    });\n}\n\nexports.getAllProducts = getAllProducts;\nexports.getProductsByType = getProductsByType;\nexports.getProductByID = getProductByID;\nexports.getProductPrice = getProductPrice;\nexports.getProductDesc = getProductDesc;\nexports.getProductsByName = getProductsByName;\nexports.getProductByNameVar = getProductByNameVar;\nexports.checkUser = checkUser;\nexports.createUser = createUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRCQ29ubi5qcyJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwiaWQiLCJTdHJpbmciLCJuYW1lIiwicHJvZHVjdHNTY2hlbWEiLCJwaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYXZhaWxhYmlsaXR5IiwiaW52ZW50b3J5IiwiY29uZGl0aW9uIiwicHJpY2UiLCJsaW5rIiwiaW1hZ2VfbGluayIsImJyYW5kIiwiaXRlbV9ncm91cF9pZCIsImNvbG9yIiwicGF0dGVybiIsInByb2R1Y3RfdHlwZSIsImFsbGVyZ2VucyIsImNhcnRTY2hlbWEiLCJ1aWQiLCJxdWFudGl0eSIsIk51bWJlciIsIm9yZGVyc1NjaGVtYSIsInRyYWNraW5nTnVtIiwib3JkZXJTdGF0dXMiLCJvcmRlckRhdGVUaW1lIiwiRGF0ZSIsIm9yZGVyRGV0YWlscyIsIlVzZXIiLCJtb2RlbCIsIlByb2R1Y3QiLCJDYXJ0IiwiT3JkZXIiLCJjcmVhdGVVc2VyIiwiZmJpZCIsIm5ld1VzZXIiLCJzYXZlIiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJkb2MiLCJjYXRjaCIsImVyciIsImNoZWNrVXNlciIsImZpbmQiLCJ1c2VyIiwiZ2V0QWxsUHJvZHVjdHMiLCJwcm9kdWN0cyIsImdldFByb2R1Y3RzQnlUeXBlIiwidHlwZVZhbHVlIiwiZ2V0UHJvZHVjdEJ5SUQiLCJwcm9kIiwiZ2V0UHJvZHVjdFByaWNlIiwiZ2V0UHJvZHVjdERlc2MiLCJnZXRQcm9kdWN0c0J5TmFtZSIsImdldFByb2R1Y3RCeU5hbWVWYXIiLCJ2YXJpYXRpb24iLCJjaGVja0NhcnQiLCJ1c2VySUQiLCJwb29sIiwicXVlcnkiLCJlcnJvciIsInJlc3VsdHMiLCJyb3dDb3VudCIsImNyZWF0ZUNhcnQiLCJzb21ldGhpbmciLCJ1cGRhdGVDYXJ0IiwicmV1c2x0cyIsImluc2VydElkIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLElBQU1BLFdBQVdDLFFBQVEsVUFBUixD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Q29ubi5qcyIsInNvdXJjZVJvb3QiOiIvYXBwIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgaWQ6IFN0cmluZyxcbiAgICBuYW1lOiBTdHJpbmdcbn0pO1xuXG5jb25zdCBwcm9kdWN0c1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIGlkOiBTdHJpbmcsXG4gICAgcGlkOiBTdHJpbmcsXG4gICAgdGl0bGU6IFN0cmluZyxcbiAgICBkZXNjcmlwdGlvbjogU3RyaW5nLFxuICAgIGF2YWlsYWJpbGl0eTogU3RyaW5nLFxuICAgIGludmVudG9yeTogU3RyaW5nLFxuICAgIGNvbmRpdGlvbjogU3RyaW5nLFxuICAgIHByaWNlOiBTdHJpbmcsXG4gICAgbGluazogU3RyaW5nLFxuICAgIGltYWdlX2xpbms6IFN0cmluZyxcbiAgICBicmFuZDogU3RyaW5nLFxuICAgIGl0ZW1fZ3JvdXBfaWQ6IFN0cmluZyxcbiAgICBjb2xvcjogU3RyaW5nLFxuICAgIHBhdHRlcm46IFN0cmluZyxcbiAgICBwcm9kdWN0X3R5cGU6IFN0cmluZyxcbiAgICBhbGxlcmdlbnM6IFN0cmluZ1xufSk7XG5cbmNvbnN0IGNhcnRTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICB1aWQ6IFN0cmluZyxcbiAgICBwaWQ6IFN0cmluZyxcbiAgICBxdWFudGl0eTogTnVtYmVyLFxuICAgIHByaWNlOiBOdW1iZXJcbn0pXG5cbmNvbnN0IG9yZGVyc1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHVpZDogU3RyaW5nLFxuICAgIHRyYWNraW5nTnVtOiBOdW1iZXIsXG4gICAgb3JkZXJTdGF0dXM6IE51bWJlcixcbiAgICBvcmRlckRhdGVUaW1lOiBEYXRlLFxuICAgIG9yZGVyRGV0YWlsczogW3tuYW1lOlN0cmluZyxwaWQ6U3RyaW5nLHF1YW50aXR5Ok51bWJlcixwcmljZTpOdW1iZXJ9XSBcbiAgICAvLyBBcmUgd2UgYWJsZSB0byBmaW5kIGEgd2F5IHRvIHVzZSBEb3VibGUvRmxvYXQgZm9yIGRhdGF0eXBlcz9cbn0pXG5cbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgndXNlcnMnLHVzZXJTY2hlbWEpO1xuY29uc3QgUHJvZHVjdCA9IG1vbmdvb3NlLm1vZGVsKCdwcm9kdWN0cycscHJvZHVjdHNTY2hlbWEpO1xuY29uc3QgQ2FydCA9IG1vbmdvb3NlLm1vZGVsKCdjYXJ0JyxjYXJ0U2NoZW1hKTtcbmNvbnN0IE9yZGVyID0gbW9uZ29vc2UubW9kZWwoJ29yZGVycycsb3JkZXJzU2NoZW1hKTtcblxuLy8gQ3JlYXRlIHVzZXIgaWYgdXNlciBub3QgZm91bmQgaW4gZGF0YWJhc2VcbmZ1bmN0aW9uIGNyZWF0ZVVzZXIoZmJpZCxuYW1lKXtcbiAgICB2YXIgbmV3VXNlciA9IG5ldyBVc2VyKHtcbiAgICAgICAgaWQ6ZmJpZCxcbiAgICAgICAgbmFtZTpuYW1lXG4gICAgfSk7XG4gICAgbmV3VXNlci5zYXZlKCkudGhlbihkb2MgPT4gY29uc29sZS5sb2coZG9jKSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG5mdW5jdGlvbiBjaGVja1VzZXIoZmJpZCl7XG4gICAgcmV0dXJuIFVzZXIuZmluZCh7J2lkJzpmYmlkfSkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuLy9HZXQgYWxsIHByb2R1Y3RzXG5mdW5jdGlvbiBnZXRBbGxQcm9kdWN0cygpe1xuICAgIHJldHVybiBQcm9kdWN0LmZpbmQoe30pLnRoZW4oZnVuY3Rpb24ocHJvZHVjdHMpe1xuICAgICAgICByZXR1cm4gcHJvZHVjdHM7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuLy9HZXQgcHJvZHVjdCBieSB0eXBlXG5mdW5jdGlvbiBnZXRQcm9kdWN0c0J5VHlwZSh0eXBlVmFsdWUpe1xuICAgIHJldHVybiBQcm9kdWN0LmZpbmQoeydwcm9kdWN0X3R5cGUnOnR5cGVWYWx1ZX0pLnRoZW4oZnVuY3Rpb24ocHJvZHVjdHMpe1xuICAgICAgICByZXR1cm4gcHJvZHVjdHM7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuLy9HZXQgcHJvZHVjdCBieSBJRFxuZnVuY3Rpb24gZ2V0UHJvZHVjdEJ5SUQocGlkKXtcbiAgICByZXR1cm4gUHJvZHVjdC5maW5kKHsncGlkJzpwaWR9KS50aGVuKGZ1bmN0aW9uKHByb2Qpe1xuICAgICAgICByZXR1cm4gcHJvZDtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgIGNvbnNvbGUubG9nKGVycikgXG4gICAgfSk7XG59XG5cbi8vIEdldCBwcm9kdWN0IFByaWNlIGJ5IElEXG5mdW5jdGlvbiBnZXRQcm9kdWN0UHJpY2UocGlkKXtcbiAgICByZXR1cm4gUHJvZHVjdC5maW5kKHsncGlkJzpwaWR9KS50aGVuKGZ1bmN0aW9uKHByb2Qpe1xuICAgICAgICByZXR1cm4gcHJvZFswXS5wcmljZTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgIGNvbnNvbGUubG9nKGVycikgXG4gICAgfSk7XG59XG5cbi8vIGdldCBwcm9kdWN0IERlc2MgYnkgSURcbmZ1bmN0aW9uIGdldFByb2R1Y3REZXNjKHBpZCl7XG4gICAgcmV0dXJuIFByb2R1Y3QuZmluZCh7J3BpZCc6cGlkfSkudGhlbihmdW5jdGlvbihwcm9kKXtcbiAgICAgICAgcmV0dXJuIHByb2RbMF0uZGVzY3JpcHRpb247XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcbiAgICAgICBjb25zb2xlLmxvZyhlcnIpIFxuICAgIH0pO1xufVxuXG4vLyBnZXQgcHJvZHVjdHMgd2l0aCBhbGwgdGhlIGRpZmZlcm50IHZhcmlhdGlvbnMgYnkgTmFtZVxuZnVuY3Rpb24gZ2V0UHJvZHVjdHNCeU5hbWUobmFtZSl7XG4gICAgcmV0dXJuIFByb2R1Y3QuZmluZCh7J3RpdGxlJzpuYW1lfSkudGhlbihmdW5jdGlvbihwcm9kKXtcbiAgICAgICAgcmV0dXJuIHByb2Q7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcbiAgICAgICBjb25zb2xlLmxvZyhlcnIpIFxuICAgIH0pO1xufVxuXG4vLyBnZXQgcHJvZHVjdCBieSBuYW1lIGFuZCB2YXJpYXRpb25cbmZ1bmN0aW9uIGdldFByb2R1Y3RCeU5hbWVWYXIobmFtZSx2YXJpYXRpb24pe1xuICAgIHJldHVybiBQcm9kdWN0LmZpbmQoeyd0aXRsZSc6bmFtZSwncGF0dGVybic6dmFyaWF0aW9ufSkudGhlbihmdW5jdGlvbihwcm9kKXtcbiAgICAgICAgcmV0dXJuIHByb2Q7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcbiAgICAgICBjb25zb2xlLmxvZyhlcnIpIFxuICAgIH0pO1xufVxuXG4vL0NoZWNrIGlmIHVzZXIgaGFzIGFuIGFjdGl2ZSBzaG9wcGluZyBjYXJ0XG5mdW5jdGlvbiBjaGVja0NhcnQodXNlcklELHByb2R1Y3RzLHF1YW50aXR5KXtcbiAgICBwb29sLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIGNhcnQgd2hlcmUgdWlkPSQxJyxbdXNlcklEXSwoZXJyb3IsIHJlc3VsdHMpID0+e1xuICAgIGlmIChlcnJvcil7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICByb3dDb3VudCA9IHJlc3VsdHMucm93Q291bnQ7XG4gICAgY29uc29sZS5sb2cocmVzdWx0cylcbiAgICBpZiAocm93Q291bnQgPT0gMCl7XG4gICAgICAgIGNyZWF0ZUNhcnQodXNlcklELHByb2R1Y3RzLHF1YW50aXR5KTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgcHJvZHVjdHMgKz0gcmVzdWx0cy5zb21ldGhpbmc7XG4gICAgICAgIHF1YW50aXR5ICs9IHJlc3VsdHMuc29tZXRoaW5nO1xuICAgICAgICB1cGRhdGVDYXJ0KHVzZXJJRCxwcm9kdWN0cyxxdWFudGl0eSk7XG4gICAgfX0pXG59XG5cbi8vIEluaXRpYWwgY3JlYXRpb24gb2YgYSBmcmVzaCBjYXJ0XG5mdW5jdGlvbiBjcmVhdGVDYXJ0KHVzZXJJRCxwcm9kdWN0cyxxdWFudGl0eSl7XG4gICAgcG9vbC5xdWVyeSgnSU5TRVJUIElOVE8gY2FydCh1aWQscHJvZHVjdHMscXVhbnRpdHkpIFZBTFVFUyAoJDEsJDIsJDMpJyxbdXNlcklELHByb2R1Y3RzLHF1YW50aXR5XSwoZXJyb3IscmV1c2x0cyk9PntcbiAgICAgICAgaWYgKGVycm9yKXtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMuaW5zZXJ0SWQpO1xuICAgIH0pXG59XG5cbi8vIFVwZGF0ZSBjYXJ0IGlmIHVzZXIgaGFzIGFuIGFjdGl2ZSBjYXJ0XG5mdW5jdGlvbiB1cGRhdGVDYXJ0KHVzZXJJRCxwcm9kdWN0cyxxdWFudGl0eSl7XG4gICAgcG9vbC5xdWVyeSgnVVBEQVRFIGNhcnQgU0VUIHByb2R1Y3RzPSQxLCBxdWFudGl0eT0kMiBXSEVSRSB1aWQ9JDMnLFtwcm9kdWN0cyxxdWFudGl0eSx1c2VySURdLChlcnJvcixyZXN1bHRzKT0+IHtcbiAgICAgICAgaWYgKGVycm9yKXtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMuaW5zZXJ0SWQpO1xuICAgIH0pXG59XG5cbmV4cG9ydCB7IGdldEFsbFByb2R1Y3RzLCBnZXRQcm9kdWN0c0J5VHlwZSwgZ2V0UHJvZHVjdEJ5SUQsIGdldFByb2R1Y3RQcmljZSwgZ2V0UHJvZHVjdERlc2MsIGdldFByb2R1Y3RzQnlOYW1lLCBnZXRQcm9kdWN0QnlOYW1lVmFyLCBjaGVja1VzZXIsIGNyZWF0ZVVzZXIgfTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "DBConn.js"
      ],
      "names": [
        "mongoose",
        "require",
        "userSchema",
        "Schema",
        "id",
        "String",
        "name",
        "productsSchema",
        "pid",
        "title",
        "description",
        "availability",
        "inventory",
        "condition",
        "price",
        "link",
        "image_link",
        "brand",
        "item_group_id",
        "color",
        "pattern",
        "product_type",
        "allergens",
        "cartSchema",
        "uid",
        "quantity",
        "Number",
        "ordersSchema",
        "trackingNum",
        "orderStatus",
        "orderDateTime",
        "Date",
        "orderDetails",
        "User",
        "model",
        "Product",
        "Cart",
        "Order",
        "createUser",
        "fbid",
        "newUser",
        "save",
        "then",
        "console",
        "log",
        "doc",
        "catch",
        "err",
        "checkUser",
        "find",
        "user",
        "getAllProducts",
        "products",
        "getProductsByType",
        "typeValue",
        "getProductByID",
        "prod",
        "getProductPrice",
        "getProductDesc",
        "getProductsByName",
        "getProductByNameVar",
        "variation",
        "checkCart",
        "userID",
        "pool",
        "query",
        "error",
        "results",
        "rowCount",
        "createCart",
        "something",
        "updateCart",
        "reuslts",
        "insertId"
      ],
      "mappings": "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",
      "file": "DBConn.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "const mongoose = require('mongoose');\n\nconst userSchema = new mongoose.Schema({\n    id: String,\n    name: String\n});\n\nconst productsSchema = new mongoose.Schema({\n    id: String,\n    pid: String,\n    title: String,\n    description: String,\n    availability: String,\n    inventory: String,\n    condition: String,\n    price: String,\n    link: String,\n    image_link: String,\n    brand: String,\n    item_group_id: String,\n    color: String,\n    pattern: String,\n    product_type: String,\n    allergens: String\n});\n\nconst cartSchema = new mongoose.Schema({\n    uid: String,\n    pid: String,\n    quantity: Number,\n    price: Number\n})\n\nconst ordersSchema = new mongoose.Schema({\n    uid: String,\n    trackingNum: Number,\n    orderStatus: Number,\n    orderDateTime: Date,\n    orderDetails: [{name:String,pid:String,quantity:Number,price:Number}] \n    // Are we able to find a way to use Double/Float for datatypes?\n})\n\nconst User = mongoose.model('users',userSchema);\nconst Product = mongoose.model('products',productsSchema);\nconst Cart = mongoose.model('cart',cartSchema);\nconst Order = mongoose.model('orders',ordersSchema);\n\n// Create user if user not found in database\nfunction createUser(fbid,name){\n    var newUser = new User({\n        id:fbid,\n        name:name\n    });\n    newUser.save().then(doc => console.log(doc)).catch(err => console.log(err));\n}\n\nfunction checkUser(fbid){\n    return User.find({'id':fbid}).then(function(user){\n        return user;\n    }).catch(function(err){\n        console.log(err);\n    });\n}\n\n//Get all products\nfunction getAllProducts(){\n    return Product.find({}).then(function(products){\n        return products;\n    }).catch(function(err){\n        console.log(err);\n    });\n}\n\n//Get product by type\nfunction getProductsByType(typeValue){\n    return Product.find({'product_type':typeValue}).then(function(products){\n        return products;\n    }).catch(function(err){\n        console.log(err);\n    });\n}\n\n//Get product by ID\nfunction getProductByID(pid){\n    return Product.find({'pid':pid}).then(function(prod){\n        return prod;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n// Get product Price by ID\nfunction getProductPrice(pid){\n    return Product.find({'pid':pid}).then(function(prod){\n        return prod[0].price;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n// get product Desc by ID\nfunction getProductDesc(pid){\n    return Product.find({'pid':pid}).then(function(prod){\n        return prod[0].description;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n// get products with all the differnt variations by Name\nfunction getProductsByName(name){\n    return Product.find({'title':name}).then(function(prod){\n        return prod;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n// get product by name and variation\nfunction getProductByNameVar(name,variation){\n    return Product.find({'title':name,'pattern':variation}).then(function(prod){\n        return prod;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n//Check if user has an active shopping cart\nfunction checkCart(userID,products,quantity){\n    pool.query('SELECT * FROM cart where uid=$1',[userID],(error, results) =>{\n    if (error){\n        throw error;\n    }\n    rowCount = results.rowCount;\n    console.log(results)\n    if (rowCount == 0){\n        createCart(userID,products,quantity);\n    }\n    else{\n        products += results.something;\n        quantity += results.something;\n        updateCart(userID,products,quantity);\n    }})\n}\n\n// Initial creation of a fresh cart\nfunction createCart(userID,products,quantity){\n    pool.query('INSERT INTO cart(uid,products,quantity) VALUES ($1,$2,$3)',[userID,products,quantity],(error,reuslts)=>{\n        if (error){\n            throw error;\n        }\n        console.log(results.insertId);\n    })\n}\n\n// Update cart if user has an active cart\nfunction updateCart(userID,products,quantity){\n    pool.query('UPDATE cart SET products=$1, quantity=$2 WHERE uid=$3',[products,quantity,userID],(error,results)=> {\n        if (error){\n            throw error;\n        }\n        console.log(results.insertId);\n    })\n}\n\nexport { getAllProducts, getProductsByType, getProductByID, getProductPrice, getProductDesc, getProductsByName, getProductByNameVar, checkUser, createUser };\n"
      ]
    },
    "mtime": 1592497258000
  },
  "{\"filename\":\"/app/fbhelper.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "getName",
            "getAllProducts",
            "getProductDetails"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "getName",
              "exported": "getName"
            },
            {
              "kind": "local",
              "local": "getAllProducts",
              "exported": "getAllProducts"
            },
            {
              "kind": "local",
              "local": "getProductDetails",
              "exported": "getProductDetails"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/fbhelper.js",
      "filenameRelative": "/app/fbhelper.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "fbhelper.js",
      "sourceFileName": "fbhelper.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "fbhelper"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n//Gets users name from facebook graph api\nvar request = require(\"request\");\nvar CATLOG_ID = process.env.CATLOG_ID;\nvar fields = \"currency,availability,condition,id,inventory,image_url,name,price,retailer_id,retailer_product_group_id,description,custom_label_0,pattern,product_type,color,url,product_group\";\nvar uri = \"https://graph.facebook.com/v7.0/\";\n\nfunction getName(PAGE_ACCESS_TOKEN, sender_psid, callback) {\n    var name = \"Empty\";\n    request({\n        url: uri + sender_psid,\n        qs: {\n            access_token: PAGE_ACCESS_TOKEN,\n            fields: \"first_name\"\n        },\n        method: \"GET\"\n    }, function (error, response, body) {\n        if (error) {\n            console.log(error);\n        } else {\n            var bodyObj = JSON.parse(body);\n            name = bodyObj.first_name;\n            console.log(\"Name: \" + name);\n            return callback(name);\n        }\n    });\n    return name;\n}\n\n//Get all products with their ID from Facebook\nfunction getAllProducts(PAGE_ACCESS_TOKEN, appsecret_proof) {\n    request({\n        url: uri + CATLOG_ID,\n        qs: {\n            access_token: PAGE_ACCESS_TOKEN,\n            appsecret_proof: appsecret_proof\n        },\n        method: \"GET\"\n    }, function (error, response, body) {\n        if (error) {\n            console.log(error);\n        } else {\n            var bodyObj = JSON.parse(body);\n            console.log(bodyObj);\n        }\n    });\n}\n\n//Gets product details from Facebook\nfunction getProductDetails(productID, callback) {\n    request({\n        url: uri + productID,\n        qs: {\n            access_token: PAGE_ACCESS_TOKEN,\n            fields: reqFields\n        },\n        method: \"GET\"\n    }, function (error, response, body) {\n        if (error) {\n            console.log(error);\n        } else {\n            var bodyObj = JSON.parse(body);\n            console.log(bodyObj);\n            return callback(bodyObj);\n        }\n    });\n}\n\nexports.getName = getName;\nexports.getAllProducts = getAllProducts;\nexports.getProductDetails = getProductDetails;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZiaGVscGVyLmpzIl0sIm5hbWVzIjpbInJlcXVlc3QiLCJyZXF1aXJlIiwiQ0FUTE9HX0lEIiwicHJvY2VzcyIsImVudiIsImZpZWxkcyIsInVyaSIsImdldE5hbWUiLCJQQUdFX0FDQ0VTU19UT0tFTiIsInNlbmRlcl9wc2lkIiwiY2FsbGJhY2siLCJuYW1lIiwidXJsIiwicXMiLCJhY2Nlc3NfdG9rZW4iLCJtZXRob2QiLCJlcnJvciIsInJlc3BvbnNlIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJib2R5T2JqIiwiSlNPTiIsInBhcnNlIiwiZmlyc3RfbmFtZSIsImdldEFsbFByb2R1Y3RzIiwiYXBwc2VjcmV0X3Byb29mIiwiZ2V0UHJvZHVjdERldGFpbHMiLCJwcm9kdWN0SUQiLCJyZXFGaWVsZHMiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQSxJQUFNQSxVQUFVQyxRQUFRLFNBQVIsQ0FBaEI7QUFDQSxJQUFNQyxZQUFZQyxRQUFRQyxHQUFSLENBQVlGLFNBQTlCO0FBQ0EsSUFBTUcsU0FBUyxpTEFBZjtBQUNBLElBQU1DLE1BQU0sa0NBQVo7O0FBRUEsU0FBU0MsT0FBVCxDQUFpQkMsaUJBQWpCLEVBQW1DQyxXQUFuQyxFQUErQ0MsUUFBL0MsRUFBd0Q7QUFDcEQsUUFBSUMsT0FBTyxPQUFYO0FBQ0FYLFlBQVE7QUFDSlksYUFBSU4sTUFBTUcsV0FETjtBQUVKSSxZQUFHO0FBQ0NDLDBCQUFjTixpQkFEZjtBQUVDSCxvQkFBUTtBQUZULFNBRkM7QUFNSlUsZ0JBQU87QUFOSCxLQUFSLEVBT0csVUFBU0MsS0FBVCxFQUFlQyxRQUFmLEVBQXdCQyxJQUF4QixFQUE2QjtBQUM1QixZQUFJRixLQUFKLEVBQVU7QUFDTkcsb0JBQVFDLEdBQVIsQ0FBWUosS0FBWjtBQUNILFNBRkQsTUFFSztBQUNELGdCQUFJSyxVQUFVQyxLQUFLQyxLQUFMLENBQVdMLElBQVgsQ0FBZDtBQUNBUCxtQkFBT1UsUUFBUUcsVUFBZjtBQUNBTCxvQkFBUUMsR0FBUixDQUFZLFdBQVdULElBQXZCO0FBQ0EsbUJBQU9ELFNBQVNDLElBQVQsQ0FBUDtBQUNIO0FBQ0osS0FoQkQ7QUFpQkEsV0FBT0EsSUFBUDtBQUNIOztBQUVEO0FBQ0EsU0FBU2MsY0FBVCxDQUF3QmpCLGlCQUF4QixFQUEwQ2tCLGVBQTFDLEVBQTBEO0FBQ3REMUIsWUFBUTtBQUNKWSxhQUFLTixNQUFNSixTQURQO0FBRUpXLFlBQUc7QUFDQ0MsMEJBQWNOLGlCQURmO0FBRUNrQiw2QkFBaUJBO0FBRmxCLFNBRkM7QUFNSlgsZ0JBQU87QUFOSCxLQUFSLEVBT0csVUFBU0MsS0FBVCxFQUFlQyxRQUFmLEVBQXdCQyxJQUF4QixFQUE2QjtBQUM1QixZQUFJRixLQUFKLEVBQVU7QUFDTkcsb0JBQVFDLEdBQVIsQ0FBWUosS0FBWjtBQUNILFNBRkQsTUFFSztBQUNELGdCQUFJSyxVQUFVQyxLQUFLQyxLQUFMLENBQVdMLElBQVgsQ0FBZDtBQUNBQyxvQkFBUUMsR0FBUixDQUFZQyxPQUFaO0FBQ0g7QUFDSixLQWREO0FBZUg7O0FBR0Q7QUFDQSxTQUFTTSxpQkFBVCxDQUEyQkMsU0FBM0IsRUFBcUNsQixRQUFyQyxFQUE4QztBQUMxQ1YsWUFBUTtBQUNKWSxhQUFJTixNQUFNc0IsU0FETjtBQUVKZixZQUFHO0FBQ0NDLDBCQUFjTixpQkFEZjtBQUVDSCxvQkFBT3dCO0FBRlIsU0FGQztBQU1KZCxnQkFBTztBQU5ILEtBQVIsRUFPRyxVQUFTQyxLQUFULEVBQWVDLFFBQWYsRUFBd0JDLElBQXhCLEVBQTZCO0FBQ2hDLFlBQUlGLEtBQUosRUFBVTtBQUNGRyxvQkFBUUMsR0FBUixDQUFZSixLQUFaO0FBQ0gsU0FGTCxNQUVTO0FBQ0QsZ0JBQUlLLFVBQVVDLEtBQUtDLEtBQUwsQ0FBV0wsSUFBWCxDQUFkO0FBQ0FDLG9CQUFRQyxHQUFSLENBQVlDLE9BQVo7QUFDQSxtQkFBT1gsU0FBU1csT0FBVCxDQUFQO0FBQ0g7QUFDSixLQWZEO0FBZ0JIOztRQUlRZCxPLEdBQUFBLE87UUFBU2tCLGMsR0FBQUEsYztRQUFnQkUsaUIsR0FBQUEsaUIiLCJmaWxlIjoiZmJoZWxwZXIuanMiLCJzb3VyY2VSb290IjoiL2FwcCIsInNvdXJjZXNDb250ZW50IjpbIi8vR2V0cyB1c2VycyBuYW1lIGZyb20gZmFjZWJvb2sgZ3JhcGggYXBpXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZShcInJlcXVlc3RcIik7XG5jb25zdCBDQVRMT0dfSUQgPSBwcm9jZXNzLmVudi5DQVRMT0dfSUQ7XG5jb25zdCBmaWVsZHMgPSBcImN1cnJlbmN5LGF2YWlsYWJpbGl0eSxjb25kaXRpb24saWQsaW52ZW50b3J5LGltYWdlX3VybCxuYW1lLHByaWNlLHJldGFpbGVyX2lkLHJldGFpbGVyX3Byb2R1Y3RfZ3JvdXBfaWQsZGVzY3JpcHRpb24sY3VzdG9tX2xhYmVsXzAscGF0dGVybixwcm9kdWN0X3R5cGUsY29sb3IsdXJsLHByb2R1Y3RfZ3JvdXBcIjtcbmNvbnN0IHVyaSA9IFwiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjcuMC9cIlxuXG5mdW5jdGlvbiBnZXROYW1lKFBBR0VfQUNDRVNTX1RPS0VOLHNlbmRlcl9wc2lkLGNhbGxiYWNrKXtcbiAgICB2YXIgbmFtZSA9IFwiRW1wdHlcIjtcbiAgICByZXF1ZXN0KHtcbiAgICAgICAgdXJsOnVyaSArIHNlbmRlcl9wc2lkLFxuICAgICAgICBxczp7XG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW46IFBBR0VfQUNDRVNTX1RPS0VOLFxuICAgICAgICAgICAgZmllbGRzOiBcImZpcnN0X25hbWVcIixcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kOlwiR0VUXCJcbiAgICB9LCBmdW5jdGlvbihlcnJvcixyZXNwb25zZSxib2R5KXtcbiAgICAgICAgaWYgKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHZhciBib2R5T2JqID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgICAgICAgIG5hbWUgPSBib2R5T2JqLmZpcnN0X25hbWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5hbWU6IFwiICsgbmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmFtZSlcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBuYW1lO1xufVxuXG4vL0dldCBhbGwgcHJvZHVjdHMgd2l0aCB0aGVpciBJRCBmcm9tIEZhY2Vib29rXG5mdW5jdGlvbiBnZXRBbGxQcm9kdWN0cyhQQUdFX0FDQ0VTU19UT0tFTixhcHBzZWNyZXRfcHJvb2Ype1xuICAgIHJlcXVlc3Qoe1xuICAgICAgICB1cmw6IHVyaSArIENBVExPR19JRCxcbiAgICAgICAgcXM6e1xuICAgICAgICAgICAgYWNjZXNzX3Rva2VuOiBQQUdFX0FDQ0VTU19UT0tFTixcbiAgICAgICAgICAgIGFwcHNlY3JldF9wcm9vZjogYXBwc2VjcmV0X3Byb29mXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZDpcIkdFVFwiXG4gICAgfSwgZnVuY3Rpb24oZXJyb3IscmVzcG9uc2UsYm9keSl7XG4gICAgICAgIGlmIChlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB2YXIgYm9keU9iaiA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhib2R5T2JqKVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuLy9HZXRzIHByb2R1Y3QgZGV0YWlscyBmcm9tIEZhY2Vib29rXG5mdW5jdGlvbiBnZXRQcm9kdWN0RGV0YWlscyhwcm9kdWN0SUQsY2FsbGJhY2spe1xuICAgIHJlcXVlc3Qoe1xuICAgICAgICB1cmw6dXJpICsgcHJvZHVjdElELFxuICAgICAgICBxczp7XG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW46IFBBR0VfQUNDRVNTX1RPS0VOLFxuICAgICAgICAgICAgZmllbGRzOnJlcUZpZWxkcyxcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kOlwiR0VUXCJcbiAgICB9LCBmdW5jdGlvbihlcnJvcixyZXNwb25zZSxib2R5KXtcbiAgICBpZiAoZXJyb3Ipe1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdmFyIGJvZHlPYmogPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYm9keU9iailcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhib2R5T2JqKVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuXG5leHBvcnQgeyBnZXROYW1lLCBnZXRBbGxQcm9kdWN0cywgZ2V0UHJvZHVjdERldGFpbHMgfTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "fbhelper.js"
      ],
      "names": [
        "request",
        "require",
        "CATLOG_ID",
        "process",
        "env",
        "fields",
        "uri",
        "getName",
        "PAGE_ACCESS_TOKEN",
        "sender_psid",
        "callback",
        "name",
        "url",
        "qs",
        "access_token",
        "method",
        "error",
        "response",
        "body",
        "console",
        "log",
        "bodyObj",
        "JSON",
        "parse",
        "first_name",
        "getAllProducts",
        "appsecret_proof",
        "getProductDetails",
        "productID",
        "reqFields"
      ],
      "mappings": ";;;;;AAAA;AACA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,YAAYC,QAAQC,GAAR,CAAYF,SAA9B;AACA,IAAMG,SAAS,iLAAf;AACA,IAAMC,MAAM,kCAAZ;;AAEA,SAASC,OAAT,CAAiBC,iBAAjB,EAAmCC,WAAnC,EAA+CC,QAA/C,EAAwD;AACpD,QAAIC,OAAO,OAAX;AACAX,YAAQ;AACJY,aAAIN,MAAMG,WADN;AAEJI,YAAG;AACCC,0BAAcN,iBADf;AAECH,oBAAQ;AAFT,SAFC;AAMJU,gBAAO;AANH,KAAR,EAOG,UAASC,KAAT,EAAeC,QAAf,EAAwBC,IAAxB,EAA6B;AAC5B,YAAIF,KAAJ,EAAU;AACNG,oBAAQC,GAAR,CAAYJ,KAAZ;AACH,SAFD,MAEK;AACD,gBAAIK,UAAUC,KAAKC,KAAL,CAAWL,IAAX,CAAd;AACAP,mBAAOU,QAAQG,UAAf;AACAL,oBAAQC,GAAR,CAAY,WAAWT,IAAvB;AACA,mBAAOD,SAASC,IAAT,CAAP;AACH;AACJ,KAhBD;AAiBA,WAAOA,IAAP;AACH;;AAED;AACA,SAASc,cAAT,CAAwBjB,iBAAxB,EAA0CkB,eAA1C,EAA0D;AACtD1B,YAAQ;AACJY,aAAKN,MAAMJ,SADP;AAEJW,YAAG;AACCC,0BAAcN,iBADf;AAECkB,6BAAiBA;AAFlB,SAFC;AAMJX,gBAAO;AANH,KAAR,EAOG,UAASC,KAAT,EAAeC,QAAf,EAAwBC,IAAxB,EAA6B;AAC5B,YAAIF,KAAJ,EAAU;AACNG,oBAAQC,GAAR,CAAYJ,KAAZ;AACH,SAFD,MAEK;AACD,gBAAIK,UAAUC,KAAKC,KAAL,CAAWL,IAAX,CAAd;AACAC,oBAAQC,GAAR,CAAYC,OAAZ;AACH;AACJ,KAdD;AAeH;;AAGD;AACA,SAASM,iBAAT,CAA2BC,SAA3B,EAAqClB,QAArC,EAA8C;AAC1CV,YAAQ;AACJY,aAAIN,MAAMsB,SADN;AAEJf,YAAG;AACCC,0BAAcN,iBADf;AAECH,oBAAOwB;AAFR,SAFC;AAMJd,gBAAO;AANH,KAAR,EAOG,UAASC,KAAT,EAAeC,QAAf,EAAwBC,IAAxB,EAA6B;AAChC,YAAIF,KAAJ,EAAU;AACFG,oBAAQC,GAAR,CAAYJ,KAAZ;AACH,SAFL,MAES;AACD,gBAAIK,UAAUC,KAAKC,KAAL,CAAWL,IAAX,CAAd;AACAC,oBAAQC,GAAR,CAAYC,OAAZ;AACA,mBAAOX,SAASW,OAAT,CAAP;AACH;AACJ,KAfD;AAgBH;;QAIQd,O,GAAAA,O;QAASkB,c,GAAAA,c;QAAgBE,iB,GAAAA,iB",
      "file": "fbhelper.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "//Gets users name from facebook graph api\nconst request = require(\"request\");\nconst CATLOG_ID = process.env.CATLOG_ID;\nconst fields = \"currency,availability,condition,id,inventory,image_url,name,price,retailer_id,retailer_product_group_id,description,custom_label_0,pattern,product_type,color,url,product_group\";\nconst uri = \"https://graph.facebook.com/v7.0/\"\n\nfunction getName(PAGE_ACCESS_TOKEN,sender_psid,callback){\n    var name = \"Empty\";\n    request({\n        url:uri + sender_psid,\n        qs:{\n            access_token: PAGE_ACCESS_TOKEN,\n            fields: \"first_name\",\n        },\n        method:\"GET\"\n    }, function(error,response,body){\n        if (error){\n            console.log(error)\n        }else{\n            var bodyObj = JSON.parse(body);\n            name = bodyObj.first_name;\n            console.log(\"Name: \" + name);\n            return callback(name)\n        }\n    });\n    return name;\n}\n\n//Get all products with their ID from Facebook\nfunction getAllProducts(PAGE_ACCESS_TOKEN,appsecret_proof){\n    request({\n        url: uri + CATLOG_ID,\n        qs:{\n            access_token: PAGE_ACCESS_TOKEN,\n            appsecret_proof: appsecret_proof\n        },\n        method:\"GET\"\n    }, function(error,response,body){\n        if (error){\n            console.log(error)\n        }else{\n            var bodyObj = JSON.parse(body);\n            console.log(bodyObj)\n        }\n    });\n}\n\n\n//Gets product details from Facebook\nfunction getProductDetails(productID,callback){\n    request({\n        url:uri + productID,\n        qs:{\n            access_token: PAGE_ACCESS_TOKEN,\n            fields:reqFields,\n        },\n        method:\"GET\"\n    }, function(error,response,body){\n    if (error){\n            console.log(error)\n        }else{\n            var bodyObj = JSON.parse(body);\n            console.log(bodyObj)\n            return callback(bodyObj)\n        }\n    });\n}\n\n\n\nexport { getName, getAllProducts, getProductDetails };"
      ]
    },
    "mtime": 1592484869000
  },
  "{\"filename\":\"/app/models/User.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "checkUser",
            "createUser"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "checkUser",
              "exported": "checkUser"
            },
            {
              "kind": "local",
              "local": "createUser",
              "exported": "createUser"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/models/User.js",
      "filenameRelative": "/app/models/User.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "User.js",
      "sourceFileName": "User.js",
      "sourceRoot": "/app/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "User"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar mongoose = require('mongoose');\nvar uniqueValidator = require('mongoose-unique-validator');\n\nvar userSchema = new mongoose.Schema({\n    id: { type: String, required: true, unique: true },\n    name: String,\n    cartId: { type: String, unique: true }\n});\n\nvar User = mongoose.model('User', userSchema);\n\n// Create user if user not found in database\nfunction createUser(fbid, name) {\n    var newUser = new User({\n        id: fbid,\n        name: name\n    });\n    newUser.save().then(function (doc) {\n        return console.log(doc);\n    }).catch(function (err) {\n        return console.log(err);\n    });\n}\n\nfunction checkUser(fbid) {\n    return User.find({ 'id': fbid }).then(function (user) {\n        return user;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\nexports.checkUser = checkUser;\nexports.createUser = createUser;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXIuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwidW5pcXVlVmFsaWRhdG9yIiwidXNlclNjaGVtYSIsIlNjaGVtYSIsImlkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwibmFtZSIsImNhcnRJZCIsIlVzZXIiLCJtb2RlbCIsImNyZWF0ZVVzZXIiLCJmYmlkIiwibmV3VXNlciIsInNhdmUiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImRvYyIsImNhdGNoIiwiZXJyIiwiY2hlY2tVc2VyIiwiZmluZCIsInVzZXIiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBTUEsV0FBV0MsUUFBUSxVQUFSLENBQWpCO0FBQ0EsSUFBSUMsa0JBQWtCRCxRQUFRLDJCQUFSLENBQXRCOztBQUVBLElBQU1FLGFBQWEsSUFBSUgsU0FBU0ksTUFBYixDQUFvQjtBQUNuQ0MsUUFBSSxFQUFFQyxNQUFNQyxNQUFSLEVBQWdCQyxVQUFVLElBQTFCLEVBQWdDQyxRQUFRLElBQXhDLEVBRCtCO0FBRW5DQyxVQUFNSCxNQUY2QjtBQUduQ0ksWUFBUSxFQUFFTCxNQUFNQyxNQUFSLEVBQWdCRSxRQUFRLElBQXhCO0FBSDJCLENBQXBCLENBQW5COztBQU1BLElBQU1HLE9BQU9aLFNBQVNhLEtBQVQsQ0FBZSxNQUFmLEVBQXNCVixVQUF0QixDQUFiOztBQUVBO0FBQ0EsU0FBU1csVUFBVCxDQUFvQkMsSUFBcEIsRUFBeUJMLElBQXpCLEVBQThCO0FBQzFCLFFBQUlNLFVBQVUsSUFBSUosSUFBSixDQUFTO0FBQ25CUCxZQUFHVSxJQURnQjtBQUVuQkwsY0FBS0E7QUFGYyxLQUFULENBQWQ7QUFJQU0sWUFBUUMsSUFBUixHQUFlQyxJQUFmLENBQW9CO0FBQUEsZUFBT0MsUUFBUUMsR0FBUixDQUFZQyxHQUFaLENBQVA7QUFBQSxLQUFwQixFQUE2Q0MsS0FBN0MsQ0FBbUQ7QUFBQSxlQUFPSCxRQUFRQyxHQUFSLENBQVlHLEdBQVosQ0FBUDtBQUFBLEtBQW5EO0FBQ0g7O0FBRUQsU0FBU0MsU0FBVCxDQUFtQlQsSUFBbkIsRUFBd0I7QUFDcEIsV0FBT0gsS0FBS2EsSUFBTCxDQUFVLEVBQUMsTUFBS1YsSUFBTixFQUFWLEVBQXVCRyxJQUF2QixDQUE0QixVQUFTUSxJQUFULEVBQWM7QUFDN0MsZUFBT0EsSUFBUDtBQUNILEtBRk0sRUFFSkosS0FGSSxDQUVFLFVBQVNDLEdBQVQsRUFBYTtBQUNsQkosZ0JBQVFDLEdBQVIsQ0FBWUcsR0FBWjtBQUNILEtBSk0sQ0FBUDtBQUtIOztRQUVRQyxTLEdBQUFBLFM7UUFBV1YsVSxHQUFBQSxVIiwiZmlsZSI6IlVzZXIuanMiLCJzb3VyY2VSb290IjoiL2FwcC9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG52YXIgdW5pcXVlVmFsaWRhdG9yID0gcmVxdWlyZSgnbW9uZ29vc2UtdW5pcXVlLXZhbGlkYXRvcicpO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgaWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXG4gICAgbmFtZTogU3RyaW5nLFxuICAgIGNhcnRJZDogeyB0eXBlOiBTdHJpbmcsIHVuaXF1ZTogdHJ1ZSB9XG59KTtcblxuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJyx1c2VyU2NoZW1hKTtcblxuLy8gQ3JlYXRlIHVzZXIgaWYgdXNlciBub3QgZm91bmQgaW4gZGF0YWJhc2VcbmZ1bmN0aW9uIGNyZWF0ZVVzZXIoZmJpZCxuYW1lKXtcbiAgICB2YXIgbmV3VXNlciA9IG5ldyBVc2VyKHtcbiAgICAgICAgaWQ6ZmJpZCxcbiAgICAgICAgbmFtZTpuYW1lXG4gICAgfSk7XG4gICAgbmV3VXNlci5zYXZlKCkudGhlbihkb2MgPT4gY29uc29sZS5sb2coZG9jKSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG5mdW5jdGlvbiBjaGVja1VzZXIoZmJpZCl7XG4gICAgcmV0dXJuIFVzZXIuZmluZCh7J2lkJzpmYmlkfSkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IHsgY2hlY2tVc2VyLCBjcmVhdGVVc2VyIH07Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "User.js"
      ],
      "names": [
        "mongoose",
        "require",
        "uniqueValidator",
        "userSchema",
        "Schema",
        "id",
        "type",
        "String",
        "required",
        "unique",
        "name",
        "cartId",
        "User",
        "model",
        "createUser",
        "fbid",
        "newUser",
        "save",
        "then",
        "console",
        "log",
        "doc",
        "catch",
        "err",
        "checkUser",
        "find",
        "user"
      ],
      "mappings": ";;;;;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAIC,kBAAkBD,QAAQ,2BAAR,CAAtB;;AAEA,IAAME,aAAa,IAAIH,SAASI,MAAb,CAAoB;AACnCC,QAAI,EAAEC,MAAMC,MAAR,EAAgBC,UAAU,IAA1B,EAAgCC,QAAQ,IAAxC,EAD+B;AAEnCC,UAAMH,MAF6B;AAGnCI,YAAQ,EAAEL,MAAMC,MAAR,EAAgBE,QAAQ,IAAxB;AAH2B,CAApB,CAAnB;;AAMA,IAAMG,OAAOZ,SAASa,KAAT,CAAe,MAAf,EAAsBV,UAAtB,CAAb;;AAEA;AACA,SAASW,UAAT,CAAoBC,IAApB,EAAyBL,IAAzB,EAA8B;AAC1B,QAAIM,UAAU,IAAIJ,IAAJ,CAAS;AACnBP,YAAGU,IADgB;AAEnBL,cAAKA;AAFc,KAAT,CAAd;AAIAM,YAAQC,IAAR,GAAeC,IAAf,CAAoB;AAAA,eAAOC,QAAQC,GAAR,CAAYC,GAAZ,CAAP;AAAA,KAApB,EAA6CC,KAA7C,CAAmD;AAAA,eAAOH,QAAQC,GAAR,CAAYG,GAAZ,CAAP;AAAA,KAAnD;AACH;;AAED,SAASC,SAAT,CAAmBT,IAAnB,EAAwB;AACpB,WAAOH,KAAKa,IAAL,CAAU,EAAC,MAAKV,IAAN,EAAV,EAAuBG,IAAvB,CAA4B,UAASQ,IAAT,EAAc;AAC7C,eAAOA,IAAP;AACH,KAFM,EAEJJ,KAFI,CAEE,UAASC,GAAT,EAAa;AAClBJ,gBAAQC,GAAR,CAAYG,GAAZ;AACH,KAJM,CAAP;AAKH;;QAEQC,S,GAAAA,S;QAAWV,U,GAAAA,U",
      "file": "User.js",
      "sourceRoot": "/app/models",
      "sourcesContent": [
        "const mongoose = require('mongoose');\nvar uniqueValidator = require('mongoose-unique-validator');\n\nconst userSchema = new mongoose.Schema({\n    id: { type: String, required: true, unique: true },\n    name: String,\n    cartId: { type: String, unique: true }\n});\n\nconst User = mongoose.model('User',userSchema);\n\n// Create user if user not found in database\nfunction createUser(fbid,name){\n    var newUser = new User({\n        id:fbid,\n        name:name\n    });\n    newUser.save().then(doc => console.log(doc)).catch(err => console.log(err));\n}\n\nfunction checkUser(fbid){\n    return User.find({'id':fbid}).then(function(user){\n        return user;\n    }).catch(function(err){\n        console.log(err);\n    });\n}\n\nexport { checkUser, createUser };"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/models/Product.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "getAllProducts",
            "getProductsByType",
            "getProductByID",
            "getProductPrice",
            "getProductDesc",
            "getProductsByName",
            "getProductByNameVar"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "getAllProducts",
              "exported": "getAllProducts"
            },
            {
              "kind": "local",
              "local": "getProductsByType",
              "exported": "getProductsByType"
            },
            {
              "kind": "local",
              "local": "getProductByID",
              "exported": "getProductByID"
            },
            {
              "kind": "local",
              "local": "getProductPrice",
              "exported": "getProductPrice"
            },
            {
              "kind": "local",
              "local": "getProductDesc",
              "exported": "getProductDesc"
            },
            {
              "kind": "local",
              "local": "getProductsByName",
              "exported": "getProductsByName"
            },
            {
              "kind": "local",
              "local": "getProductByNameVar",
              "exported": "getProductByNameVar"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/models/Product.js",
      "filenameRelative": "/app/models/Product.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "Product.js",
      "sourceFileName": "Product.js",
      "sourceRoot": "/app/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "Product"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar mongoose = require('mongoose');\n\nvar productsSchema = new mongoose.Schema({\n    id: String,\n    pid: String,\n    title: String,\n    description: String,\n    availability: String,\n    inventory: String,\n    condition: String,\n    price: String,\n    link: String,\n    image_link: String,\n    brand: String,\n    item_group_id: String,\n    color: String,\n    pattern: String,\n    product_type: String,\n    allergens: String\n});\n\nvar Product = mongoose.model('Product', productsSchema);\n\n//Get all products\nfunction getAllProducts() {\n    return Product.find({}).then(function (products) {\n        return products;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n//Get product by type\nfunction getProductsByType(typeValue) {\n    return Product.find({ 'product_type': typeValue }).then(function (products) {\n        return products;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n//Get product by ID\nfunction getProductByID(pid) {\n    return Product.find({ 'pid': pid }).then(function (prod) {\n        return prod;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n// Get product Price by ID\nfunction getProductPrice(pid) {\n    return Product.find({ 'pid': pid }).then(function (prod) {\n        return prod[0].price;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n// get product Desc by ID\nfunction getProductDesc(pid) {\n    return Product.find({ 'pid': pid }).then(function (prod) {\n        return prod[0].description;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n// get products with all the differnt variations by Name\nfunction getProductsByName(name) {\n    return Product.find({ 'title': name }).then(function (prod) {\n        return prod;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n// get product by name and variation\nfunction getProductByNameVar(name, variation) {\n    return Product.find({ 'title': name, 'pattern': variation }).then(function (prod) {\n        return prod;\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\nexports.getAllProducts = getAllProducts;\nexports.getProductsByType = getProductsByType;\nexports.getProductByID = getProductByID;\nexports.getProductPrice = getProductPrice;\nexports.getProductDesc = getProductDesc;\nexports.getProductsByName = getProductsByName;\nexports.getProductByNameVar = getProductByNameVar;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlByb2R1Y3QuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwicHJvZHVjdHNTY2hlbWEiLCJTY2hlbWEiLCJpZCIsIlN0cmluZyIsInBpZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJhdmFpbGFiaWxpdHkiLCJpbnZlbnRvcnkiLCJjb25kaXRpb24iLCJwcmljZSIsImxpbmsiLCJpbWFnZV9saW5rIiwiYnJhbmQiLCJpdGVtX2dyb3VwX2lkIiwiY29sb3IiLCJwYXR0ZXJuIiwicHJvZHVjdF90eXBlIiwiYWxsZXJnZW5zIiwiUHJvZHVjdCIsIm1vZGVsIiwiZ2V0QWxsUHJvZHVjdHMiLCJmaW5kIiwidGhlbiIsInByb2R1Y3RzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZ2V0UHJvZHVjdHNCeVR5cGUiLCJ0eXBlVmFsdWUiLCJnZXRQcm9kdWN0QnlJRCIsInByb2QiLCJnZXRQcm9kdWN0UHJpY2UiLCJnZXRQcm9kdWN0RGVzYyIsImdldFByb2R1Y3RzQnlOYW1lIiwibmFtZSIsImdldFByb2R1Y3RCeU5hbWVWYXIiLCJ2YXJpYXRpb24iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBTUEsV0FBV0MsUUFBUSxVQUFSLENBQWpCOztBQUVBLElBQU1DLGlCQUFpQixJQUFJRixTQUFTRyxNQUFiLENBQW9CO0FBQ3ZDQyxRQUFJQyxNQURtQztBQUV2Q0MsU0FBS0QsTUFGa0M7QUFHdkNFLFdBQU9GLE1BSGdDO0FBSXZDRyxpQkFBYUgsTUFKMEI7QUFLdkNJLGtCQUFjSixNQUx5QjtBQU12Q0ssZUFBV0wsTUFONEI7QUFPdkNNLGVBQVdOLE1BUDRCO0FBUXZDTyxXQUFPUCxNQVJnQztBQVN2Q1EsVUFBTVIsTUFUaUM7QUFVdkNTLGdCQUFZVCxNQVYyQjtBQVd2Q1UsV0FBT1YsTUFYZ0M7QUFZdkNXLG1CQUFlWCxNQVp3QjtBQWF2Q1ksV0FBT1osTUFiZ0M7QUFjdkNhLGFBQVNiLE1BZDhCO0FBZXZDYyxrQkFBY2QsTUFmeUI7QUFn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LGM7UUFBZ0JRLGlCLEdBQUFBLGlCO1FBQW1CRSxjLEdBQUFBLGM7UUFBZ0JFLGUsR0FBQUEsZTtRQUFpQkMsYyxHQUFBQSxjO1FBQWdCQyxpQixHQUFBQSxpQjtRQUFtQkUsbUIsR0FBQUEsbUIiLCJmaWxlIjoiUHJvZHVjdC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxuY29uc3QgcHJvZHVjdHNTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBpZDogU3RyaW5nLFxuICAgIHBpZDogU3RyaW5nLFxuICAgIHRpdGxlOiBTdHJpbmcsXG4gICAgZGVzY3JpcHRpb246IFN0cmluZyxcbiAgICBhdmFpbGFiaWxpdHk6IFN0cmluZyxcbiAgICBpbnZlbnRvcnk6IFN0cmluZyxcbiAgICBjb25kaXRpb246IFN0cmluZyxcbiAgICBwcmljZTogU3RyaW5nLFxuICAgIGxpbms6IFN0cmluZyxcbiAgICBpbWFnZV9saW5rOiBTdHJpbmcsXG4gICAgYnJhbmQ6IFN0cmluZyxcbiAgICBpdGVtX2dyb3VwX2lkOiBTdHJpbmcsXG4gICAgY29sb3I6IFN0cmluZyxcbiAgICBwYXR0ZXJuOiBTdHJpbmcsXG4gICAgcHJvZHVjdF90eXBlOiBTdHJpbmcsXG4gICAgYWxsZXJnZW5zOiBTdHJpbmdcbn0pO1xuXG5jb25zdCBQcm9kdWN0ID0gbW9uZ29vc2UubW9kZWwoJ1Byb2R1Y3QnLHByb2R1Y3RzU2NoZW1hKTtcblxuXG4vL0dldCBhbGwgcHJvZHVjdHNcbmZ1bmN0aW9uIGdldEFsbFByb2R1Y3RzKCl7XG4gICAgcmV0dXJuIFByb2R1Y3QuZmluZCh7fSkudGhlbihmdW5jdGlvbihwcm9kdWN0cyl7XG4gICAgICAgIHJldHVybiBwcm9kdWN0cztcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufVxuXG4vL0dldCBwcm9kdWN0IGJ5IHR5cGVcbmZ1bmN0aW9uIGdldFByb2R1Y3RzQnlUeXBlKHR5cGVWYWx1ZSl7XG4gICAgcmV0dXJuIFByb2R1Y3QuZmluZCh7J3Byb2R1Y3RfdHlwZSc6dHlwZVZhbHVlfSkudGhlbihmdW5jdGlvbihwcm9kdWN0cyl7XG4gICAgICAgIHJldHVybiBwcm9kdWN0cztcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufVxuXG4vL0dldCBwcm9kdWN0IGJ5IElEXG5mdW5jdGlvbiBnZXRQcm9kdWN0QnlJRChwaWQpe1xuICAgIHJldHVybiBQcm9kdWN0LmZpbmQoeydwaWQnOnBpZH0pLnRoZW4oZnVuY3Rpb24ocHJvZCl7XG4gICAgICAgIHJldHVybiBwcm9kO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4gICAgICAgY29uc29sZS5sb2coZXJyKSBcbiAgICB9KTtcbn1cblxuLy8gR2V0IHByb2R1Y3QgUHJpY2UgYnkgSURcbmZ1bmN0aW9uIGdldFByb2R1Y3RQcmljZShwaWQpe1xuICAgIHJldHVybiBQcm9kdWN0LmZpbmQoeydwaWQnOnBpZH0pLnRoZW4oZnVuY3Rpb24ocHJvZCl7XG4gICAgICAgIHJldHVybiBwcm9kWzBdLnByaWNlO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4gICAgICAgY29uc29sZS5sb2coZXJyKSBcbiAgICB9KTtcbn1cblxuLy8gZ2V0IHByb2R1Y3QgRGVzYyBieSBJRFxuZnVuY3Rpb24gZ2V0UHJvZHVjdERlc2MocGlkKXtcbiAgICByZXR1cm4gUHJvZHVjdC5maW5kKHsncGlkJzpwaWR9KS50aGVuKGZ1bmN0aW9uKHByb2Qpe1xuICAgICAgICByZXR1cm4gcHJvZFswXS5kZXNjcmlwdGlvbjtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgIGNvbnNvbGUubG9nKGVycikgXG4gICAgfSk7XG59XG5cbi8vIGdldCBwcm9kdWN0cyB3aXRoIGFsbCB0aGUgZGlmZmVybnQgdmFyaWF0aW9ucyBieSBOYW1lXG5mdW5jdGlvbiBnZXRQcm9kdWN0c0J5TmFtZShuYW1lKXtcbiAgICByZXR1cm4gUHJvZHVjdC5maW5kKHsndGl0bGUnOm5hbWV9KS50aGVuKGZ1bmN0aW9uKHByb2Qpe1xuICAgICAgICByZXR1cm4gcHJvZDtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgIGNvbnNvbGUubG9nKGVycikgXG4gICAgfSk7XG59XG5cbi8vIGdldCBwcm9kdWN0IGJ5IG5hbWUgYW5kIHZhcmlhdGlvblxuZnVuY3Rpb24gZ2V0UHJvZHVjdEJ5TmFtZVZhcihuYW1lLHZhcmlhdGlvbil7XG4gICAgcmV0dXJuIFByb2R1Y3QuZmluZCh7J3RpdGxlJzpuYW1lLCdwYXR0ZXJuJzp2YXJpYXRpb259KS50aGVuKGZ1bmN0aW9uKHByb2Qpe1xuICAgICAgICByZXR1cm4gcHJvZDtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xuICAgICAgIGNvbnNvbGUubG9nKGVycikgXG4gICAgfSk7XG59XG5cbmV4cG9ydCB7IGdldEFsbFByb2R1Y3RzLCBnZXRQcm9kdWN0c0J5VHlwZSwgZ2V0UHJvZHVjdEJ5SUQsIGdldFByb2R1Y3RQcmljZSwgZ2V0UHJvZHVjdERlc2MsIGdldFByb2R1Y3RzQnlOYW1lLCBnZXRQcm9kdWN0QnlOYW1lVmFyIH07Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "Product.js"
      ],
      "names": [
        "mongoose",
        "require",
        "productsSchema",
        "Schema",
        "id",
        "String",
        "pid",
        "title",
        "description",
        "availability",
        "inventory",
        "condition",
        "price",
        "link",
        "image_link",
        "brand",
        "item_group_id",
        "color",
        "pattern",
        "product_type",
        "allergens",
        "Product",
        "model",
        "getAllProducts",
        "find",
        "then",
        "products",
        "catch",
        "err",
        "console",
        "log",
        "getProductsByType",
        "typeValue",
        "getProductByID",
        "prod",
        "getProductPrice",
        "getProductDesc",
        "getProductsByName",
        "name",
        "getProductByNameVar",
        "variation"
      ],
      "mappings": "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",
      "file": "Product.js",
      "sourceRoot": "/app/models",
      "sourcesContent": [
        "const mongoose = require('mongoose');\n\nconst productsSchema = new mongoose.Schema({\n    id: String,\n    pid: String,\n    title: String,\n    description: String,\n    availability: String,\n    inventory: String,\n    condition: String,\n    price: String,\n    link: String,\n    image_link: String,\n    brand: String,\n    item_group_id: String,\n    color: String,\n    pattern: String,\n    product_type: String,\n    allergens: String\n});\n\nconst Product = mongoose.model('Product',productsSchema);\n\n\n//Get all products\nfunction getAllProducts(){\n    return Product.find({}).then(function(products){\n        return products;\n    }).catch(function(err){\n        console.log(err);\n    });\n}\n\n//Get product by type\nfunction getProductsByType(typeValue){\n    return Product.find({'product_type':typeValue}).then(function(products){\n        return products;\n    }).catch(function(err){\n        console.log(err);\n    });\n}\n\n//Get product by ID\nfunction getProductByID(pid){\n    return Product.find({'pid':pid}).then(function(prod){\n        return prod;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n// Get product Price by ID\nfunction getProductPrice(pid){\n    return Product.find({'pid':pid}).then(function(prod){\n        return prod[0].price;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n// get product Desc by ID\nfunction getProductDesc(pid){\n    return Product.find({'pid':pid}).then(function(prod){\n        return prod[0].description;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n// get products with all the differnt variations by Name\nfunction getProductsByName(name){\n    return Product.find({'title':name}).then(function(prod){\n        return prod;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\n// get product by name and variation\nfunction getProductByNameVar(name,variation){\n    return Product.find({'title':name,'pattern':variation}).then(function(prod){\n        return prod;\n    }).catch(function(err){\n       console.log(err) \n    });\n}\n\nexport { getAllProducts, getProductsByType, getProductByID, getProductPrice, getProductDesc, getProductsByName, getProductByNameVar };"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/models/Cart.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "uuid",
            "imported": [
              "v4"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "v4",
                "local": "uuidv4"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "createCart",
            "checkCart",
            "addItemToCart",
            "deleteCart"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createCart",
              "exported": "createCart"
            },
            {
              "kind": "local",
              "local": "checkCart",
              "exported": "checkCart"
            },
            {
              "kind": "local",
              "local": "addItemToCart",
              "exported": "addItemToCart"
            },
            {
              "kind": "local",
              "local": "deleteCart",
              "exported": "deleteCart"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/models/Cart.js",
      "filenameRelative": "/app/models/Cart.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "Cart.js",
      "sourceFileName": "Cart.js",
      "sourceRoot": "/app/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "Cart"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.deleteCart = exports.addItemToCart = exports.checkCart = exports.createCart = undefined;\n\nvar _uuid = require('uuid');\n\nvar mongoose = require('mongoose');\nvar uniqueValidator = require('mongoose-unique-validator');\nvar Float = require('mongoose-float').loadType(mongoose);\nvar User = mongoose.model('User');\n\n\nvar cartSchema = new mongoose.Schema({\n    uid: { type: String, required: true, unique: true },\n    items: [{\n        pid: String,\n        title: String,\n        description: String,\n        condition: String,\n        price: Float,\n        quantity: Number,\n        brand: String,\n        item_group_id: String,\n        color: String,\n        pattern: String,\n        product_type: String,\n        allergens: String\n    }],\n    totalPrice: { type: Float, required: true, default: 0.00 }\n});\n\ncartSchema.plugin(uniqueValidator, { message: 'is already taken.' });\n\nvar Cart = mongoose.model('Cart', cartSchema);\n\n// Initial creation of a fresh cart with an item(s)\nasync function createCart(userId, pid, title, description, condition, price, quantity, brand, item_group_id, color, pattern, product_type, allergens) {\n    var totalPrice = price * quantity;\n    var cartId = (0, _uuid.v4)();\n    var newCart = new Cart({\n        uid: cartId,\n        items: [{\n            pid: pid,\n            title: title,\n            description: description,\n            condition: condition,\n            price: price,\n            quantity: quantity,\n            brand: brand,\n            item_group_id: item_group_id,\n            color: color,\n            pattern: pattern,\n            product_type: product_type,\n            allergens: allergens\n        }],\n        totalPrice: totalPrice\n    });\n    await User.findById(userId).then(function (user) {\n        if (!user) {\n            return res.status(401).send('User doesnt exist!');\n        }\n\n        var query_param_userId = user._id;\n        var user_cartId = newCart.uid;\n\n        User.findByIdAndUpdate(query_param_userId, { \"cartId\": user_cartId }, { new: true }, function (err, result) {\n            if (err) {\n                res.send(err);\n                console.error(err);\n            } else {\n                res.send(result);\n                console.log(result);\n            }\n        });\n    }).catch(function (err) {\n        console.error(err);res.send(err);\n    });\n    var setCart = await newCart.save().then(function (doc) {\n        console.log(doc);res.send(doc);\n    }).catch(function (err) {\n        console.error(err);res.send(err);\n    });\n\n    return setCart;\n}\n\n//Check for user active cart\nasync function checkCart(userId) {\n\n    var getCartId = await User.findById(userId).then(function (user) {\n        if (!user) {\n            return res.status(401).send('User doesnt exist!');\n        }\n\n        var cartId = user.cartId;\n\n        return cartId;\n    });\n\n    var getCart = await Cart.find({ uid: getCartId }).then(function (result) {\n        return result;\n    }).catch(function (err) {\n        return console.error(err);\n    });\n\n    return getCart;\n}\n\nasync function addItemToCart(cartId, pid, title, description, condition, price, quantity, brand, item_group_id, color, pattern, product_type, allergens) {\n    var itemData = {\n        pid: pid,\n        title: title,\n        description: description,\n        condition: condition,\n        price: price,\n        quantity: quantity,\n        brand: brand,\n        item_group_id: item_group_id,\n        color: color,\n        pattern: pattern,\n        product_type: product_type,\n        allergens: allergens\n    };\n\n    var addItem = await Cart.findOneAndUpdate({ uid: cartId }, { $push: { items: itemData } }, { new: true }, function (error, success) {\n        if (error) {\n            console.error(error);\n        } else {\n            console.log(success);\n        }\n    });\n\n    return addItem;\n}\n\nasync function deleteCart(userId, cartId) {\n\n    await User.find({ id: userId }).then(function (user) {\n        if (!user) {\n            return res.status(401).send('User doesnt exist!');\n        }\n\n        var query_param_userId = user._id;\n        var user_cartId = null;\n\n        User.findByIdAndUpdate(query_param_userId, { \"cartId\": user_cartId }, { new: true }, function (err, result) {\n            if (err) {\n                res.send(err);\n                console.error(err);\n            } else {\n                res.send(result);\n                console.log(result);\n            }\n        });\n    }).catch(function (err) {\n        console.error(err);res.send(err);\n    });\n    await Cart.findOneAndDelete({ uid: cartId }, function (error, success) {\n        if (error) {\n            console.error(error);\n        } else {\n            console.log(success);\n        }\n    });\n}\n\nexports.createCart = createCart;\nexports.checkCart = checkCart;\nexports.addItemToCart = addItemToCart;\nexports.deleteCart = deleteCart;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNhcnQuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwidW5pcXVlVmFsaWRhdG9yIiwiRmxvYXQiLCJsb2FkVHlwZSIsIlVzZXIiLCJtb2RlbCIsImNhcnRTY2hlbWEiLCJTY2hlbWEiLCJ1aWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJpdGVtcyIsInBpZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjb25kaXRpb24iLCJwcmljZSIsInF1YW50aXR5IiwiTnVtYmVyIiwiYnJhbmQiLCJpdGVtX2dyb3VwX2lkIiwiY29sb3IiLCJwYXR0ZXJuIiwicHJvZHVjdF90eXBlIiwiYWxsZXJnZW5zIiwidG90YWxQcmljZSIsImRlZmF1bHQiLCJwbHVnaW4iLCJtZXNzYWdlIiwiQ2FydCIsImNyZWF0ZUNhcnQiLCJ1c2VySWQiLCJjYXJ0SWQiLCJuZXdDYXJ0IiwiZmluZEJ5SWQiLCJ0aGVuIiwidXNlciIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJxdWVyeV9wYXJhbV91c2VySWQiLCJfaWQiLCJ1c2VyX2NhcnRJZCIsImZpbmRCeUlkQW5kVXBkYXRlIiwibmV3IiwiZXJyIiwicmVzdWx0IiwiY29uc29sZSIsImVycm9yIiwibG9nIiwiY2F0Y2giLCJzZXRDYXJ0Iiwic2F2ZSIsImRvYyIsImNoZWNrQ2FydCIsImdldENhcnRJZCIsImdldENhcnQiLCJmaW5kIiwiYWRkSXRlbVRvQ2FydCIsIml0ZW1EYXRhIiwiYWRkSXRlbSIsImZpbmRPbmVBbmRVcGRhdGUiLCIkcHVzaCIsInN1Y2Nlc3MiLCJkZWxldGVDYXJ0IiwiaWQiLCJmaW5kT25lQW5kRGVsZXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSUE7O0FBSkEsSUFBTUEsV0FBV0MsUUFBUSxVQUFSLENBQWpCO0FBQ0EsSUFBSUMsa0JBQWtCRCxRQUFRLDJCQUFSLENBQXRCO0FBQ0EsSUFBSUUsUUFBUUYsUUFBUSxnQkFBUixFQUEwQkcsUUFBMUIsQ0FBbUNKLFFBQW5D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QkosS0FBS0ssR0FBaEM7QUFDQSxZQUFNQyxjQUFjLElBQXBCOztBQUVBeEMsYUFBS3lDLGlCQUFMLENBQXVCSCxrQkFBdkIsRUFBMkMsRUFBRSxVQUFVRSxXQUFaLEVBQTNDLEVBQXFFLEVBQUVFLEtBQUssSUFBUCxFQUFyRSxFQUFvRixVQUFVQyxHQUFWLEVBQWVDLE1BQWYsRUFBdUI7QUFDdkcsZ0JBQUlELEdBQUosRUFBUztBQUNMUixvQkFBSUUsSUFBSixDQUFTTSxHQUFUO0FBQ0FFLHdCQUFRQyxLQUFSLENBQWNILEdBQWQ7QUFDSCxhQUhELE1BSUs7QUFDRFIsb0JBQUlFLElBQUosQ0FBU08sTUFBVDtBQUNBQyx3QkFBUUUsR0FBUixDQUFZSCxNQUFaO0FBQ0g7QUFDSixTQVREO0FBVUgsS0FoQkssRUFnQkhJLEtBaEJHLENBZ0JHLGVBQU87QUFBRUgsZ0JBQVFDLEtBQVIsQ0FBY0gsR0FBZCxFQUFvQlIsSUFBSUUsSUFBSixDQUFTTSxHQUFUO0FBQWUsS0FoQi9DLENBQU47QUFpQkEsVUFBTWhCLEtBQUtxQyxnQkFBTCxDQUFzQixFQUFFNUQsS0FBSzBCLE1BQVAsRUFBdEIsRUFDRixVQUFDZ0IsS0FBRCxFQUFRZSxPQUFSLEVBQW9CO0FBQ3BCLFlBQUlmLEtBQUosRUFBVztBQUNQRCxvQkFBUUMsS0FBUixDQUFjQSxLQUFkO0FBQ0gsU0FGRCxNQUVPO0FBQ0hELG9CQUFRRSxHQUFSLENBQVljLE9BQVo7QUFDSDtBQUNKLEtBUEssQ0FBTjtBQVFIOztRQUVRakMsVSxHQUFBQSxVO1FBQVl3QixTLEdBQUFBLFM7UUFBV0ksYSxHQUFBQSxhO1FBQWVNLFUsR0FBQUEsVSIsImZpbGUiOiJDYXJ0LmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xudmFyIHVuaXF1ZVZhbGlkYXRvciA9IHJlcXVpcmUoJ21vbmdvb3NlLXVuaXF1ZS12YWxpZGF0b3InKTtcbnZhciBGbG9hdCA9IHJlcXVpcmUoJ21vbmdvb3NlLWZsb2F0JykubG9hZFR5cGUobW9uZ29vc2UpO1xudmFyIFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicpO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbmNvbnN0IGNhcnRTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICB1aWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXG4gICAgaXRlbXM6IFt7XG4gICAgICAgIHBpZDogU3RyaW5nLFxuICAgICAgICB0aXRsZTogU3RyaW5nLFxuICAgICAgICBkZXNjcmlwdGlvbjogU3RyaW5nLFxuICAgICAgICBjb25kaXRpb246IFN0cmluZyxcbiAgICAgICAgcHJpY2U6IEZsb2F0LFxuICAgICAgICBxdWFudGl0eTogTnVtYmVyLFxuICAgICAgICBicmFuZDogU3RyaW5nLFxuICAgICAgICBpdGVtX2dyb3VwX2lkOiBTdHJpbmcsXG4gICAgICAgIGNvbG9yOiBTdHJpbmcsXG4gICAgICAgIHBhdHRlcm46IFN0cmluZyxcbiAgICAgICAgcHJvZHVjdF90eXBlOiBTdHJpbmcsXG4gICAgICAgIGFsbGVyZ2VuczogU3RyaW5nXG4gICAgfV0sXG4gICAgdG90YWxQcmljZTogeyB0eXBlOiBGbG9hdCwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IDAuMDAgfSxcbn0pXG5cbmNhcnRTY2hlbWEucGx1Z2luKHVuaXF1ZVZhbGlkYXRvciwgeyBtZXNzYWdlOiAnaXMgYWxyZWFkeSB0YWtlbi4nIH0pO1xuXG5jb25zdCBDYXJ0ID0gbW9uZ29vc2UubW9kZWwoJ0NhcnQnLCBjYXJ0U2NoZW1hKTtcblxuLy8gSW5pdGlhbCBjcmVhdGlvbiBvZiBhIGZyZXNoIGNhcnQgd2l0aCBhbiBpdGVtKHMpXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVDYXJ0KHVzZXJJZCwgcGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGNvbmRpdGlvbiwgcHJpY2UsIHF1YW50aXR5LCBicmFuZCwgaXRlbV9ncm91cF9pZCwgY29sb3IsIHBhdHRlcm4sIHByb2R1Y3RfdHlwZSwgYWxsZXJnZW5zKSB7XG4gICAgY29uc3QgdG90YWxQcmljZSA9IHByaWNlICogcXVhbnRpdHk7XG4gICAgY29uc3QgY2FydElkID0gdXVpZHY0KCk7XG4gICAgdmFyIG5ld0NhcnQgPSBuZXcgQ2FydCh7XG4gICAgICAgIHVpZDogY2FydElkLFxuICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgIHBpZDogcGlkLFxuICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY29uZGl0aW9uOiBjb25kaXRpb24sXG4gICAgICAgICAgICBwcmljZTogcHJpY2UsXG4gICAgICAgICAgICBxdWFudGl0eTogcXVhbnRpdHksXG4gICAgICAgICAgICBicmFuZDogYnJhbmQsXG4gICAgICAgICAgICBpdGVtX2dyb3VwX2lkOiBpdGVtX2dyb3VwX2lkLFxuICAgICAgICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgICAgICAgcGF0dGVybjogcGF0dGVybixcbiAgICAgICAgICAgIHByb2R1Y3RfdHlwZTogcHJvZHVjdF90eXBlLFxuICAgICAgICAgICAgYWxsZXJnZW5zOiBhbGxlcmdlbnNcbiAgICAgICAgfV0sXG4gICAgICAgIHRvdGFsUHJpY2U6IHRvdGFsUHJpY2VcbiAgICB9KVxuICAgIGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKS50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgIGlmICghdXNlcikgeyByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ1VzZXIgZG9lc250IGV4aXN0IScpOyB9XG5cbiAgICAgICAgY29uc3QgcXVlcnlfcGFyYW1fdXNlcklkID0gdXNlci5faWQ7XG4gICAgICAgIGNvbnN0IHVzZXJfY2FydElkID0gbmV3Q2FydC51aWQ7XG5cbiAgICAgICAgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShxdWVyeV9wYXJhbV91c2VySWQsIHsgXCJjYXJ0SWRcIjogdXNlcl9jYXJ0SWQgfSx7IG5ldzogdHJ1ZSB9LCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZChlcnIpXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMuc2VuZChyZXN1bHQpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pLmNhdGNoKGVyciA9PiB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgcmVzLnNlbmQoZXJyKSB9KVxuICAgIGxldCBzZXRDYXJ0ID0gYXdhaXQgbmV3Q2FydC5zYXZlKCkudGhlbihkb2MgPT4geyBjb25zb2xlLmxvZyhkb2MpOyByZXMuc2VuZChkb2MpIH0pLmNhdGNoKGVyciA9PiB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgcmVzLnNlbmQoZXJyKSB9KTtcblxuICAgIHJldHVybiBzZXRDYXJ0XG59XG5cbi8vQ2hlY2sgZm9yIHVzZXIgYWN0aXZlIGNhcnRcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQ2FydCh1c2VySWQpIHtcblxuICAgIGxldCBnZXRDYXJ0SWQgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCkudGhlbigodXNlcikgPT4ge1xuICAgICAgICBpZiAoIXVzZXIpIHsgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKCdVc2VyIGRvZXNudCBleGlzdCEnKTsgfVxuXG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHVzZXIuY2FydElkO1xuXG4gICAgICAgIHJldHVybiBjYXJ0SWRcbiAgICB9KVxuXG4gICAgbGV0IGdldENhcnQgPSBhd2FpdCBDYXJ0LmZpbmQoeyB1aWQ6IGdldENhcnRJZCB9KS50aGVuKChyZXN1bHQpID0+IHsgcmV0dXJuIHJlc3VsdCB9KS5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG5cbiAgICByZXR1cm4gZ2V0Q2FydFxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRJdGVtVG9DYXJ0KGNhcnRJZCwgcGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGNvbmRpdGlvbiwgcHJpY2UsIHF1YW50aXR5LCBicmFuZCwgaXRlbV9ncm91cF9pZCwgY29sb3IsIHBhdHRlcm4sIHByb2R1Y3RfdHlwZSwgYWxsZXJnZW5zKSB7XG4gICAgbGV0IGl0ZW1EYXRhID0ge1xuICAgICAgICBwaWQ6IHBpZCxcbiAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgICBwcmljZTogcHJpY2UsXG4gICAgICAgIHF1YW50aXR5OiBxdWFudGl0eSxcbiAgICAgICAgYnJhbmQ6IGJyYW5kLFxuICAgICAgICBpdGVtX2dyb3VwX2lkOiBpdGVtX2dyb3VwX2lkLFxuICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgIHBhdHRlcm46IHBhdHRlcm4sXG4gICAgICAgIHByb2R1Y3RfdHlwZTogcHJvZHVjdF90eXBlLFxuICAgICAgICBhbGxlcmdlbnM6IGFsbGVyZ2Vuc1xuICAgIH1cblxuICAgIGxldCBhZGRJdGVtID0gYXdhaXQgQ2FydC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IHVpZDogY2FydElkIH0sXG4gICAgICAgIHsgJHB1c2g6IHsgaXRlbXM6IGl0ZW1EYXRhIH0gfSxcbiAgICAgICAgeyBuZXc6IHRydWUgfSxcbiAgICAgICAgKGVycm9yLCBzdWNjZXNzKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3VjY2Vzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gYWRkSXRlbVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNhcnQodXNlcklkLCBjYXJ0SWQpIHtcblxuICAgIGF3YWl0IFVzZXIuZmluZCh7aWQ6IHVzZXJJZH0pLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgaWYgKCF1c2VyKSB7IHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCgnVXNlciBkb2VzbnQgZXhpc3QhJyk7IH1cblxuICAgICAgICBjb25zdCBxdWVyeV9wYXJhbV91c2VySWQgPSB1c2VyLl9pZDtcbiAgICAgICAgY29uc3QgdXNlcl9jYXJ0SWQgPSBudWxsO1xuXG4gICAgICAgIFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocXVlcnlfcGFyYW1fdXNlcklkLCB7IFwiY2FydElkXCI6IHVzZXJfY2FydElkIH0seyBuZXc6IHRydWUgfSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoZXJyKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQocmVzdWx0KVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KS5jYXRjaChlcnIgPT4geyBjb25zb2xlLmVycm9yKGVycik7IHJlcy5zZW5kKGVycikgfSlcbiAgICBhd2FpdCBDYXJ0LmZpbmRPbmVBbmREZWxldGUoeyB1aWQ6IGNhcnRJZCB9LFxuICAgICAgICAoZXJyb3IsIHN1Y2Nlc3MpID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN1Y2Nlc3MpO1xuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IHsgY3JlYXRlQ2FydCwgY2hlY2tDYXJ0LCBhZGRJdGVtVG9DYXJ0LCBkZWxldGVDYXJ0IH07Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "Cart.js"
      ],
      "names": [
        "mongoose",
        "require",
        "uniqueValidator",
        "Float",
        "loadType",
        "User",
        "model",
        "cartSchema",
        "Schema",
        "uid",
        "type",
        "String",
        "required",
        "unique",
        "items",
        "pid",
        "title",
        "description",
        "condition",
        "price",
        "quantity",
        "Number",
        "brand",
        "item_group_id",
        "color",
        "pattern",
        "product_type",
        "allergens",
        "totalPrice",
        "default",
        "plugin",
        "message",
        "Cart",
        "createCart",
        "userId",
        "cartId",
        "newCart",
        "findById",
        "then",
        "user",
        "res",
        "status",
        "send",
        "query_param_userId",
        "_id",
        "user_cartId",
        "findByIdAndUpdate",
        "new",
        "err",
        "result",
        "console",
        "error",
        "log",
        "catch",
        "setCart",
        "save",
        "doc",
        "checkCart",
        "getCartId",
        "getCart",
        "find",
        "addItemToCart",
        "itemData",
        "addItem",
        "findOneAndUpdate",
        "$push",
        "success",
        "deleteCart",
        "id",
        "findOneAndDelete"
      ],
      "mappings": ";;;;;;;AAIA;;AAJA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAIC,kBAAkBD,QAAQ,2BAAR,CAAtB;AACA,IAAIE,QAAQF,QAAQ,gBAAR,EAA0BG,QAA1B,CAAmCJ,QAAnC,CAAZ;AACA,IAAIK,OAAOL,SAASM,KAAT,CAAe,MAAf,CAAX;;;AAGA,IAAMC,aAAa,IAAIP,SAASQ,MAAb,CAAoB;AACnCC,SAAK,EAAEC,MAAMC,MAAR,EAAgBC,UAAU,IAA1B,EAAgCC,QAAQ,IAAxC,EAD8B;AAEnCC,WAAO,CAAC;AACJC,aAAKJ,MADD;AAEJK,eAAOL,MAFH;AAGJM,qBAAaN,MAHT;AAIJO,mBAAWP,MAJP;AAKJQ,eAAOhB,KALH;AAMJiB,kBAAUC,MANN;AAOJC,eAAOX,MAPH;AAQJY,uBAAeZ,MARX;AASJa,eAAOb,MATH;AAUJc,iBAASd,MAVL;AAWJe,sBAAcf,MAXV;AAYJgB,mBAAWhB;AAZP,KAAD,CAF4B;AAgBnCiB,gBAAY,EAAElB,MAAMP,KAAR,EAAeS,UAAU,IAAzB,EAA+BiB,SAAS,IAAxC;AAhBuB,CAApB,CAAnB;;AAmBAtB,WAAWuB,MAAX,CAAkB5B,eAAlB,EAAmC,EAAE6B,SAAS,mBAAX,EAAnC;;AAEA,IAAMC,OAAOhC,SAASM,KAAT,CAAe,MAAf,EAAuBC,UAAvB,CAAb;;AAEA;AACA,eAAe0B,UAAf,CAA0BC,MAA1B,EAAkCnB,GAAlC,EAAuCC,KAAvC,EAA8CC,WAA9C,EAA2DC,SAA3D,EAAsEC,KAAtE,EAA6EC,QAA7E,EAAuFE,KAAvF,EAA8FC,aAA9F,EAA6GC,KAA7G,EAAoHC,OAApH,EAA6HC,YAA7H,EAA2IC,SAA3I,EAAsJ;AAClJ,QAAMC,aAAaT,QAAQC,QAA3B;AACA,QAAMe,SAAS,eAAf;AACA,QAAIC,UAAU,IAAIJ,IAAJ,CAAS;AACnBvB,aAAK0B,MADc;AAEnBrB,eAAO,CAAC;AACJC,iBAAKA,GADD;AAEJC,mBAAOA,KAFH;AAGJC,yBAAaA,WAHT;AAIJC,uBAAWA,SAJP;AAKJC,mBAAOA,KALH;AAMJC,sBAAUA,QANN;AAOJE,mBAAOA,KAPH;AAQJC,2BAAeA,aARX;AASJC,mBAAOA,KATH;AAUJC,qBAASA,OAVL;AAWJC,0BAAcA,YAXV;AAYJC,uBAAWA;AAZP,SAAD,CAFY;AAgBnBC,oBAAYA;AAhBO,KAAT,CAAd;AAkBA,UAAMvB,KAAKgC,QAAL,CAAcH,MAAd,EAAsBI,IAAtB,CAA2B,UAACC,IAAD,EAAU;AACvC,YAAI,CAACA,IAAL,EAAW;AAAE,mBAAOC,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,oBAArB,CAAP;AAAoD;;AAEjE,YAAMC,qBAAqBJ,KAAKK,GAAhC;AACA,YAAMC,cAAcT,QAAQ3B,GAA5B;;AAEAJ,aAAKyC,iBAAL,CAAuBH,kBAAvB,EAA2C,EAAE,UAAUE,WAAZ,EAA3C,EAAqE,EAAEE,KAAK,IAAP,EAArE,EAAoF,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACvG,gBAAID,GAAJ,EAAS;AACLR,oBAAIE,IAAJ,CAASM,GAAT;AACAE,wBAAQC,KAAR,CAAcH,GAAd;AACH,aAHD,MAIK;AACDR,oBAAIE,IAAJ,CAASO,MAAT;AACAC,wBAAQE,GAAR,CAAYH,MAAZ;AACH;AACJ,SATD;AAUH,KAhBK,EAgBHI,KAhBG,CAgBG,eAAO;AAAEH,gBAAQC,KAAR,CAAcH,GAAd,EAAoBR,IAAIE,IAAJ,CAASM,GAAT;AAAe,KAhB/C,CAAN;AAiBA,QAAIM,UAAU,MAAMlB,QAAQmB,IAAR,GAAejB,IAAf,CAAoB,eAAO;AAAEY,gBAAQE,GAAR,CAAYI,GAAZ,EAAkBhB,IAAIE,IAAJ,CAASc,GAAT;AAAe,KAA9D,EAAgEH,KAAhE,CAAsE,eAAO;AAAEH,gBAAQC,KAAR,CAAcH,GAAd,EAAoBR,IAAIE,IAAJ,CAASM,GAAT;AAAe,KAAlH,CAApB;;AAEA,WAAOM,OAAP;AACH;;AAED;AACA,eAAeG,SAAf,CAAyBvB,MAAzB,EAAiC;;AAE7B,QAAIwB,YAAY,MAAMrD,KAAKgC,QAAL,CAAcH,MAAd,EAAsBI,IAAtB,CAA2B,UAACC,IAAD,EAAU;AACvD,YAAI,CAACA,IAAL,EAAW;AAAE,mBAAOC,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,oBAArB,CAAP;AAAoD;;AAEjE,YAAMP,SAASI,KAAKJ,MAApB;;AAEA,eAAOA,MAAP;AACH,KANqB,CAAtB;;AAQA,QAAIwB,UAAU,MAAM3B,KAAK4B,IAAL,CAAU,EAAEnD,KAAKiD,SAAP,EAAV,EAA8BpB,IAA9B,CAAmC,UAACW,MAAD,EAAY;AAAE,eAAOA,MAAP;AAAe,KAAhE,EAAkEI,KAAlE,CAAwE,UAACL,GAAD;AAAA,eAASE,QAAQC,KAAR,CAAcH,GAAd,CAAT;AAAA,KAAxE,CAApB;;AAEA,WAAOW,OAAP;AACH;;AAED,eAAeE,aAAf,CAA6B1B,MAA7B,EAAqCpB,GAArC,EAA0CC,KAA1C,EAAiDC,WAAjD,EAA8DC,SAA9D,EAAyEC,KAAzE,EAAgFC,QAAhF,EAA0FE,KAA1F,EAAiGC,aAAjG,EAAgHC,KAAhH,EAAuHC,OAAvH,EAAgIC,YAAhI,EAA8IC,SAA9I,EAAyJ;AACrJ,QAAImC,WAAW;AACX/C,aAAKA,GADM;AAEXC,eAAOA,KAFI;AAGXC,qBAAaA,WAHF;AAIXC,mBAAWA,SAJA;AAKXC,eAAOA,KALI;AAMXC,kBAAUA,QANC;AAOXE,eAAOA,KAPI;AAQXC,uBAAeA,aARJ;AASXC,eAAOA,KATI;AAUXC,iBAASA,OAVE;AAWXC,sBAAcA,YAXH;AAYXC,mBAAWA;AAZA,KAAf;;AAeA,QAAIoC,UAAU,MAAM/B,KAAKgC,gBAAL,CAChB,EAAEvD,KAAK0B,MAAP,EADgB,EAEhB,EAAE8B,OAAO,EAAEnD,OAAOgD,QAAT,EAAT,EAFgB,EAGhB,EAAEf,KAAK,IAAP,EAHgB,EAIhB,UAACI,KAAD,EAAQe,OAAR,EAAoB;AAChB,YAAIf,KAAJ,EAAW;AACPD,oBAAQC,KAAR,CAAcA,KAAd;AACH,SAFD,MAEO;AACHD,oBAAQE,GAAR,CAAYc,OAAZ;AACH;AACJ,KAVe,CAApB;;AAaA,WAAOH,OAAP;AAEH;;AAED,eAAeI,UAAf,CAA0BjC,MAA1B,EAAkCC,MAAlC,EAA0C;;AAEtC,UAAM9B,KAAKuD,IAAL,CAAU,EAACQ,IAAIlC,MAAL,EAAV,EAAwBI,IAAxB,CAA6B,UAACC,IAAD,EAAU;AACzC,YAAI,CAACA,IAAL,EAAW;AAAE,mBAAOC,IAAIC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,oBAArB,CAAP;AAAoD;;AAEjE,YAAMC,qBAAqBJ,KAAKK,GAAhC;AACA,YAAMC,cAAc,IAApB;;AAEAxC,aAAKyC,iBAAL,CAAuBH,kBAAvB,EAA2C,EAAE,UAAUE,WAAZ,EAA3C,EAAqE,EAAEE,KAAK,IAAP,EAArE,EAAoF,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACvG,gBAAID,GAAJ,EAAS;AACLR,oBAAIE,IAAJ,CAASM,GAAT;AACAE,wBAAQC,KAAR,CAAcH,GAAd;AACH,aAHD,MAIK;AACDR,oBAAIE,IAAJ,CAASO,MAAT;AACAC,wBAAQE,GAAR,CAAYH,MAAZ;AACH;AACJ,SATD;AAUH,KAhBK,EAgBHI,KAhBG,CAgBG,eAAO;AAAEH,gBAAQC,KAAR,CAAcH,GAAd,EAAoBR,IAAIE,IAAJ,CAASM,GAAT;AAAe,KAhB/C,CAAN;AAiBA,UAAMhB,KAAKqC,gBAAL,CAAsB,EAAE5D,KAAK0B,MAAP,EAAtB,EACF,UAACgB,KAAD,EAAQe,OAAR,EAAoB;AACpB,YAAIf,KAAJ,EAAW;AACPD,oBAAQC,KAAR,CAAcA,KAAd;AACH,SAFD,MAEO;AACHD,oBAAQE,GAAR,CAAYc,OAAZ;AACH;AACJ,KAPK,CAAN;AAQH;;QAEQjC,U,GAAAA,U;QAAYwB,S,GAAAA,S;QAAWI,a,GAAAA,a;QAAeM,U,GAAAA,U",
      "file": "Cart.js",
      "sourceRoot": "/app/models",
      "sourcesContent": [
        "const mongoose = require('mongoose');\nvar uniqueValidator = require('mongoose-unique-validator');\nvar Float = require('mongoose-float').loadType(mongoose);\nvar User = mongoose.model('User');\nimport { v4 as uuidv4 } from 'uuid';\n\nconst cartSchema = new mongoose.Schema({\n    uid: { type: String, required: true, unique: true },\n    items: [{\n        pid: String,\n        title: String,\n        description: String,\n        condition: String,\n        price: Float,\n        quantity: Number,\n        brand: String,\n        item_group_id: String,\n        color: String,\n        pattern: String,\n        product_type: String,\n        allergens: String\n    }],\n    totalPrice: { type: Float, required: true, default: 0.00 },\n})\n\ncartSchema.plugin(uniqueValidator, { message: 'is already taken.' });\n\nconst Cart = mongoose.model('Cart', cartSchema);\n\n// Initial creation of a fresh cart with an item(s)\nasync function createCart(userId, pid, title, description, condition, price, quantity, brand, item_group_id, color, pattern, product_type, allergens) {\n    const totalPrice = price * quantity;\n    const cartId = uuidv4();\n    var newCart = new Cart({\n        uid: cartId,\n        items: [{\n            pid: pid,\n            title: title,\n            description: description,\n            condition: condition,\n            price: price,\n            quantity: quantity,\n            brand: brand,\n            item_group_id: item_group_id,\n            color: color,\n            pattern: pattern,\n            product_type: product_type,\n            allergens: allergens\n        }],\n        totalPrice: totalPrice\n    })\n    await User.findById(userId).then((user) => {\n        if (!user) { return res.status(401).send('User doesnt exist!'); }\n\n        const query_param_userId = user._id;\n        const user_cartId = newCart.uid;\n\n        User.findByIdAndUpdate(query_param_userId, { \"cartId\": user_cartId },{ new: true }, function (err, result) {\n            if (err) {\n                res.send(err)\n                console.error(err)\n            }\n            else {\n                res.send(result)\n                console.log(result)\n            }\n        })\n    }).catch(err => { console.error(err); res.send(err) })\n    let setCart = await newCart.save().then(doc => { console.log(doc); res.send(doc) }).catch(err => { console.error(err); res.send(err) });\n\n    return setCart\n}\n\n//Check for user active cart\nasync function checkCart(userId) {\n\n    let getCartId = await User.findById(userId).then((user) => {\n        if (!user) { return res.status(401).send('User doesnt exist!'); }\n\n        const cartId = user.cartId;\n\n        return cartId\n    })\n\n    let getCart = await Cart.find({ uid: getCartId }).then((result) => { return result }).catch((err) => console.error(err))\n\n    return getCart\n}\n\nasync function addItemToCart(cartId, pid, title, description, condition, price, quantity, brand, item_group_id, color, pattern, product_type, allergens) {\n    let itemData = {\n        pid: pid,\n        title: title,\n        description: description,\n        condition: condition,\n        price: price,\n        quantity: quantity,\n        brand: brand,\n        item_group_id: item_group_id,\n        color: color,\n        pattern: pattern,\n        product_type: product_type,\n        allergens: allergens\n    }\n\n    let addItem = await Cart.findOneAndUpdate(\n        { uid: cartId },\n        { $push: { items: itemData } },\n        { new: true },\n        (error, success) => {\n            if (error) {\n                console.error(error);\n            } else {\n                console.log(success);\n            }\n        }\n    )\n\n    return addItem\n\n}\n\nasync function deleteCart(userId, cartId) {\n\n    await User.find({id: userId}).then((user) => {\n        if (!user) { return res.status(401).send('User doesnt exist!'); }\n\n        const query_param_userId = user._id;\n        const user_cartId = null;\n\n        User.findByIdAndUpdate(query_param_userId, { \"cartId\": user_cartId },{ new: true }, function (err, result) {\n            if (err) {\n                res.send(err)\n                console.error(err)\n            }\n            else {\n                res.send(result)\n                console.log(result)\n            }\n        })\n    }).catch(err => { console.error(err); res.send(err) })\n    await Cart.findOneAndDelete({ uid: cartId },\n        (error, success) => {\n        if (error) {\n            console.error(error);\n        } else {\n            console.log(success);\n        }\n    })\n}\n\nexport { createCart, checkCart, addItemToCart, deleteCart };"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/models/Order.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/models/Order.js",
      "filenameRelative": "/app/models/Order.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "Order.js",
      "sourceFileName": "Order.js",
      "sourceRoot": "/app/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "Order"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar mongoose = require('mongoose');\nvar uniqueValidator = require('mongoose-unique-validator');\nvar User = mongoose.model('Cart');\nvar User = mongoose.model('User');\n\nvar orderSchema = new mongoose.Schema({\n    customer: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\n    trackingNumber: { type: Number, unique: true },\n    orderStatus: {\n        type: String,\n        enum: ['Order Received', 'Packing', 'Out For Delivery', 'Delivered', 'Refund'],\n        default: 'Order Received'\n    },\n    cart: { type: mongoose.Schema.Types.ObjectId, ref: 'Cart' }\n}, { timestamps: true });\n\norderSchema.plugin(uniqueValidator, { message: 'is already exist.' });\n\nvar Order = mongoose.model('Order', orderSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk9yZGVyLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsInVuaXF1ZVZhbGlkYXRvciIsIlVzZXIiLCJtb2RlbCIsIm9yZGVyU2NoZW1hIiwiU2NoZW1hIiwiY3VzdG9tZXIiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInRyYWNraW5nTnVtYmVyIiwiTnVtYmVyIiwidW5pcXVlIiwib3JkZXJTdGF0dXMiLCJTdHJpbmciLCJlbnVtIiwiZGVmYXVsdCIsImNhcnQiLCJ0aW1lc3RhbXBzIiwicGx1Z2luIiwibWVzc2FnZSIsIk9yZGVyIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFdBQVdDLFFBQVEsVUFBUixDQUFqQjtBQUNBLElBQUlDLGtCQUFrQkQsUUFBUSwyQkFBUixDQUF0QjtBQUNBLElBQUlFLE9BQU9ILFNBQVNJLEtBQVQsQ0FBZSxNQUFmLENBQVg7QUFDQSxJQUFJRCxPQUFPSCxTQUFTSSxLQUFULENBQWUsTUFBZixDQUFYOztBQUVBLElBQU1DLGNBQWMsSUFBSUwsU0FBU00sTUFBYixDQUFvQjtBQUNwQ0MsY0FBVSxFQUFFQyxNQUFNUixTQUFTTSxNQUFULENBQWdCRyxLQUFoQixDQUFzQkMsUUFBOUIsRUFBd0NDLEtBQUssTUFBN0MsRUFEMEI7QUFFcENDLG9CQUFnQixFQUFFSixNQUFNSyxNQUFSLEVBQWdCQyxRQUFRLElBQXhCLEVBRm9CO0FBR3BDQyxpQkFBYTtBQUNUUCxjQUFNUSxNQURHO0FBRVRDLGNBQU8sQ0FBQyxnQkFBRCxFQUFrQixTQUFsQixFQUE0QixrQkFBNUIsRUFBK0MsV0FBL0MsRUFBMkQsUUFBM0QsQ0FGRTtBQUdUQyxpQkFBUztBQUhBLEtBSHVCO0FBUXBDQyxVQUFNLEVBQUVYLE1BQU1SLFNBQVNNLE1BQVQsQ0FBZ0JHLEtBQWhCLENBQXNCQyxRQUE5QixFQUF3Q0MsS0FBSyxNQUE3QztBQVI4QixDQUFwQixFQVNqQixFQUFFUyxZQUFZLElBQWQsRUFUaUIsQ0FBcEI7O0FBV0FmLFlBQVlnQixNQUFaLENBQW1CbkIsZUFBbkIsRUFBb0MsRUFBRW9CLFNBQVMsbUJBQVgsRUFBcEM7O0FBRUEsSUFBTUMsUUFBUXZCLFNBQVNJLEtBQVQsQ0FBZSxPQUFmLEVBQXdCQyxXQUF4QixDQUFkIiwiZmlsZSI6Ik9yZGVyLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xudmFyIHVuaXF1ZVZhbGlkYXRvciA9IHJlcXVpcmUoJ21vbmdvb3NlLXVuaXF1ZS12YWxpZGF0b3InKTtcbnZhciBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ0NhcnQnKTtcbnZhciBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInKTtcblxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBjdXN0b21lcjogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInIH0sXG4gICAgdHJhY2tpbmdOdW1iZXI6IHsgdHlwZTogTnVtYmVyLCB1bmlxdWU6IHRydWUgfSxcbiAgICBvcmRlclN0YXR1czoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIGVudW0gOiBbJ09yZGVyIFJlY2VpdmVkJywnUGFja2luZycsJ091dCBGb3IgRGVsaXZlcnknLCdEZWxpdmVyZWQnLCdSZWZ1bmQnXSxcbiAgICAgICAgZGVmYXVsdDogJ09yZGVyIFJlY2VpdmVkJ1xuICAgIH0sXG4gICAgY2FydDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ0NhcnQnIH0sXG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XG5cbm9yZGVyU2NoZW1hLnBsdWdpbih1bmlxdWVWYWxpZGF0b3IsIHsgbWVzc2FnZTogJ2lzIGFscmVhZHkgZXhpc3QuJyB9KTtcblxuY29uc3QgT3JkZXIgPSBtb25nb29zZS5tb2RlbCgnT3JkZXInLCBvcmRlclNjaGVtYSk7XG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "Order.js"
      ],
      "names": [
        "mongoose",
        "require",
        "uniqueValidator",
        "User",
        "model",
        "orderSchema",
        "Schema",
        "customer",
        "type",
        "Types",
        "ObjectId",
        "ref",
        "trackingNumber",
        "Number",
        "unique",
        "orderStatus",
        "String",
        "enum",
        "default",
        "cart",
        "timestamps",
        "plugin",
        "message",
        "Order"
      ],
      "mappings": ";;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAIC,kBAAkBD,QAAQ,2BAAR,CAAtB;AACA,IAAIE,OAAOH,SAASI,KAAT,CAAe,MAAf,CAAX;AACA,IAAID,OAAOH,SAASI,KAAT,CAAe,MAAf,CAAX;;AAEA,IAAMC,cAAc,IAAIL,SAASM,MAAb,CAAoB;AACpCC,cAAU,EAAEC,MAAMR,SAASM,MAAT,CAAgBG,KAAhB,CAAsBC,QAA9B,EAAwCC,KAAK,MAA7C,EAD0B;AAEpCC,oBAAgB,EAAEJ,MAAMK,MAAR,EAAgBC,QAAQ,IAAxB,EAFoB;AAGpCC,iBAAa;AACTP,cAAMQ,MADG;AAETC,cAAO,CAAC,gBAAD,EAAkB,SAAlB,EAA4B,kBAA5B,EAA+C,WAA/C,EAA2D,QAA3D,CAFE;AAGTC,iBAAS;AAHA,KAHuB;AAQpCC,UAAM,EAAEX,MAAMR,SAASM,MAAT,CAAgBG,KAAhB,CAAsBC,QAA9B,EAAwCC,KAAK,MAA7C;AAR8B,CAApB,EASjB,EAAES,YAAY,IAAd,EATiB,CAApB;;AAWAf,YAAYgB,MAAZ,CAAmBnB,eAAnB,EAAoC,EAAEoB,SAAS,mBAAX,EAApC;;AAEA,IAAMC,QAAQvB,SAASI,KAAT,CAAe,OAAf,EAAwBC,WAAxB,CAAd",
      "file": "Order.js",
      "sourceRoot": "/app/models",
      "sourcesContent": [
        "const mongoose = require('mongoose');\nvar uniqueValidator = require('mongoose-unique-validator');\nvar User = mongoose.model('Cart');\nvar User = mongoose.model('User');\n\nconst orderSchema = new mongoose.Schema({\n    customer: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\n    trackingNumber: { type: Number, unique: true },\n    orderStatus: {\n        type: String,\n        enum : ['Order Received','Packing','Out For Delivery','Delivered','Refund'],\n        default: 'Order Received'\n    },\n    cart: { type: mongoose.Schema.Types.ObjectId, ref: 'Cart' },\n}, { timestamps: true });\n\norderSchema.plugin(uniqueValidator, { message: 'is already exist.' });\n\nconst Order = mongoose.model('Order', orderSchema);\n\n"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/routes/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/routes\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/routes/index.js",
      "filenameRelative": "/app/routes/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/app/routes",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/routes",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar router = require('express').Router();\n\nrouter.use('/api', require('./api'));\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInJlcXVpcmUiLCJSb3V0ZXIiLCJ1c2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLFNBQVVDLFFBQVEsU0FBUixFQUFtQkMsTUFBbkIsRUFBZDs7QUFFQUYsT0FBT0csR0FBUCxDQUFXLE1BQVgsRUFBbUJGLFFBQVEsT0FBUixDQUFuQjs7QUFFQUcsT0FBT0MsT0FBUCxHQUFpQkwsTUFBakIiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL2FwcC9yb3V0ZXMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcm91dGVyID0gIHJlcXVpcmUoJ2V4cHJlc3MnKS5Sb3V0ZXIoKTtcblxucm91dGVyLnVzZSgnL2FwaScsIHJlcXVpcmUoJy4vYXBpJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "router",
        "require",
        "Router",
        "use",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,IAAIA,SAAUC,QAAQ,SAAR,EAAmBC,MAAnB,EAAd;;AAEAF,OAAOG,GAAP,CAAW,MAAX,EAAmBF,QAAQ,OAAR,CAAnB;;AAEAG,OAAOC,OAAP,GAAiBL,MAAjB",
      "file": "index.js",
      "sourceRoot": "/app/routes",
      "sourcesContent": [
        "var router =  require('express').Router();\n\nrouter.use('/api', require('./api'));\n\nmodule.exports = router;"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/routes/api/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/routes/api\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/routes/api/index.js",
      "filenameRelative": "/app/routes/api/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/app/routes/api",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/routes/api",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar router = require('express').Router();\n\nrouter.use('/', require('./webhooks'));\nrouter.use('/test', require('./test'));\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInJlcXVpcmUiLCJSb3V0ZXIiLCJ1c2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLFNBQVNDLFFBQVEsU0FBUixFQUFtQkMsTUFBbkIsRUFBYjs7QUFFQUYsT0FBT0csR0FBUCxDQUFXLEdBQVgsRUFBZ0JGLFFBQVEsWUFBUixDQUFoQjtBQUNBRCxPQUFPRyxHQUFQLENBQVcsT0FBWCxFQUFvQkYsUUFBUSxRQUFSLENBQXBCOztBQUdBRyxPQUFPQyxPQUFQLEdBQWlCTCxNQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3JvdXRlcy9hcGkiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcm91dGVyID0gcmVxdWlyZSgnZXhwcmVzcycpLlJvdXRlcigpO1xuXG5yb3V0ZXIudXNlKCcvJywgcmVxdWlyZSgnLi93ZWJob29rcycpKTtcbnJvdXRlci51c2UoJy90ZXN0JywgcmVxdWlyZSgnLi90ZXN0JykpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "router",
        "require",
        "Router",
        "use",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,IAAIA,SAASC,QAAQ,SAAR,EAAmBC,MAAnB,EAAb;;AAEAF,OAAOG,GAAP,CAAW,GAAX,EAAgBF,QAAQ,YAAR,CAAhB;AACAD,OAAOG,GAAP,CAAW,OAAX,EAAoBF,QAAQ,QAAR,CAApB;;AAGAG,OAAOC,OAAP,GAAiBL,MAAjB",
      "file": "index.js",
      "sourceRoot": "/app/routes/api",
      "sourcesContent": [
        "var router = require('express').Router();\n\nrouter.use('/', require('./webhooks'));\nrouter.use('/test', require('./test'));\n\n\nmodule.exports = router;"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/routes/api/webhooks.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/routes/api\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../models/User",
            "imported": [
              "checkUser",
              "createUser"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "checkUser",
                "local": "checkUser"
              },
              {
                "kind": "named",
                "imported": "createUser",
                "local": "createUser"
              }
            ]
          },
          {
            "source": "../../helpers/fbhelper",
            "imported": [
              "getName"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getName",
                "local": "getName"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/routes/api/webhooks.js",
      "filenameRelative": "/app/routes/api/webhooks.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "webhooks.js",
      "sourceFileName": "webhooks.js",
      "sourceRoot": "/app/routes/api",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/routes/api",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "webhooks"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _User = require('../../models/User');\n\nvar _fbhelper = require('../../helpers/fbhelper');\n\nvar mongoose = require('mongoose');\nvar router = require('express').Router();\n// import { getAllProducts, getProductByType, getProductByID, getProductPrice, getProductDesc, getProductsByName, getProductByNameVar } from '../../models/Product';\n\n//\n//\n//\n//ROUTES\n//\n//\n//\n\n// Adds support for GET requests to our webhook\nrouter.get(\"/webhook\", function (req, res) {\n    var VERIFY_TOKEN = process.env.VERIFY_TOKEN;\n\n    // Parse the query params\n    var mode = req.query[\"hub.mode\"];\n    var token = req.query[\"hub.verify_token\"];\n    var challenge = req.query[\"hub.challenge\"];\n\n    // Checks if a token and mode is in the query string of the request\n    if (mode && token) {\n        // Checks the mode and token sent is correct\n        if (mode === \"subscribe\" && token === VERIFY_TOKEN) {\n            // Responds with the challenge token from the request\n            console.log(\"WEBHOOK_VERIFIED\");\n            res.status(200).send(challenge);\n        } else {\n            // Responds with '403 Forbidden' if verify tokens do not match\n            res.sendStatus(403);\n        }\n    }\n});\n\n// Creates the endpoint for our webhook\nrouter.post(\"/webhook\", function (req, res) {\n    var body = req.body;\n\n    // Checks this is an event from a page subscription\n    if (body.object === \"page\") {\n        // Iterates over each entry - there may be multiple if batched\n        body.entry.forEach(function (entry) {\n            // Gets the message. entry.messaging is an array, but\n            // will only ever contain one message, so we get index 0\n            var webhook_event = entry.messaging[0];\n            // console.log(webhook_event);\n\n            // Get the sender PSID\n            var sender_psid = webhook_event.sender.id;\n            // console.log(\"Sender PSID: \" + sender_psid);\n\n            // Check if the event is a message or postback and\n            // pass the event to the appropriate handler function\n            if (webhook_event.message) {\n                if (webhook_event.message.quick_reply) {\n                    handlePostback(sender_psid, webhook_event.message.quick_reply);\n                } else {\n                    handleMessage(sender_psid, webhook_event.message);\n                }\n\n                (0, _fbhelper.getName)(PAGE_ACCESS_TOKEN, sender_psid, function (response) {\n                    (0, _User.checkUser)(sender_psid, response).then(function (user) {\n                        if (user.length == 0) {\n                            (0, _User.createUser)(sender_psid, response);\n                        }\n                    });\n                });\n            } else if (webhook_event.postback) {\n                handlePostback(sender_psid, webhook_event.postback);\n            }\n        });\n\n        // Returns a '200 OK' response to all requests\n        res.status(200).send(\"EVENT_RECEIVED\");\n    } else {\n        // Returns a '404 Not Found' if event is not from a page subscription\n        res.sendStatus(404);\n    }\n});\n\nvar defaultResponse = generateResponseFromMessage(\"We could not understand your message. Kindly rephrase your message and send us again.\");\n\n// Handles messages events\nasync function handleMessage(sender_psid, received_message) {\n    var response = void 0;\n\n    // Check if the message contains text\n    if (received_message.text) {\n        console.log('Received message: \"' + received_message.text + '\"');\n\n        response = await processMessage(sender_psid, received_message);\n        // Default response (for debugging)\n        // Create the payload for a basic text message\n        // response = {\n        //   text: `You sent the message: \"${received_message.text}\".`\n        // };\n    } else {\n        response = defaultResponse;\n        //     // Gets the URL of the message attachment\n        //     let attachment_url = received_message.attachments[0].payload.url;\n    }\n\n    // Sends the response message\n    callSendAPI(sender_psid, response);\n}\n\n// Handles messaging_postbacks events\nfunction handlePostback(sender_psid, received_postback) {\n    var response = void 0;\n\n    // Get the payload for the postback\n    var payload = received_postback.payload;\n    console.log('Received postback: \"' + payload + '\"');\n\n    var postback_intent = payload.split(\" \")[0];\n    var postback_content = payload.substring(payload.indexOf(\" \") + 1, payload.length);\n\n    // Set the response based on the postback intent\n    if (postback_intent === \"cart_add\") {\n        // Add to cart\n        response = generateAddCartResponse(sender_psid, postback_content, 1);\n    } else if (postback_intent === \"cart_view\") {\n        response = generateViewCartResponse(sender_psid);\n    } else if (postback_intent === \"enquiry_product\") {\n        response = generateResponseFromMessage('What would you like to know about our ' + postback_content + '?');\n    } else if (postback_intent === \"enquiry_product_attribute\") {\n        var attribute = postback_content.substring(0, postback_content.indexOf(\" \") + 1);\n        var product = postback_content.substring(postback_content.indexOf(\" \") + 1, postback_content.length);\n        response = generateProductEnquiryResponse(product, attribute);\n    } else if (postback_intent === \"checkout\") {\n        response = {\n            attachment: {\n                type: \"template\",\n                payload: {\n                    template_type: \"button\",\n                    text: \"Click on the button below to pay.\",\n                    buttons: [{\n                        type: \"postback\",\n                        title: \"Pay\",\n                        payload: \"paid\"\n                    }]\n                }\n            }\n        };\n    } else if (postback_intent === \"paid\") {\n        response = {\n            attachment: {\n                type: \"template\",\n                payload: {\n                    template_type: \"button\",\n                    text: \"Your order (order no.) is confirmed.\",\n                    buttons: [{\n                        type: \"postback\",\n                        title: \"View Receipt\",\n                        payload: \"receipt_view\"\n                    }]\n                }\n            }\n        };\n    } else if (postback_intent === \"receipt_view\") {\n        response = generateReceiptResponse(sender_psid);\n    }\n\n    if (response == null) {\n        response = defaultResponse();\n    }\n\n    // Send the message to acknowledge the postback\n    callSendAPI(sender_psid, response);\n}\n\n// Sends response messages via the Send API\nfunction callSendAPI(sender_psid, response) {\n    // Uncomment to log response object\n    console.log(response);\n\n    // Construct the message body\n    var request_body = {\n        recipient: {\n            id: sender_psid\n        },\n        message: response\n    };\n\n    // Send the HTTP request to the Messenger Platform\n    request({\n        uri: \"https://graph.facebook.com/v2.6/me/messages\",\n        qs: { access_token: PAGE_ACCESS_TOKEN },\n        method: \"POST\",\n        json: request_body\n    }, function (err, res, body) {\n        if (!err) {\n            console.log(\"Message sent!\");\n        } else {\n            console.error(\"Unable to send message:\" + err);\n        }\n    });\n}\n\n// Process text message and returns response object to handleMessage()\nfunction processMessage(sender_psid, message) {\n    // NLP: https://developers.facebook.com/docs/messenger-platform/built-in-nlp\n    var entities = message.nlp[\"entities\"];\n\n    // Uncomment to view all entities and their xalues\n    Object.keys(entities).forEach(function (key) {\n        console.log(\"Entity: \" + key);\n        console.log(entities[key]);\n    });\n\n    // Check greeting\n    var is_greeting = entities[\"greetings\"] != null && entities[\"greetings\"][0][\"confidence\"] > 0.8; // Greeting threshold set to 0.8 (stricter)\n\n    // Retrieve first intent object\n    var intent = entities[\"intent\"][0];\n\n    if (intent[\"confidence\"] > 0.5) {\n        // Process intent\n        var intent_parts = intent[\"value\"].split(\"_\");\n        var intent_category = intent_parts[0];\n        var intent_subcategory = intent_parts.length > 1 ? intent_parts[1] : null;\n        var response = null;\n\n        switch (intent_category) {\n            case \"recommendation\":\n                // Handle recommendation\n                // response = generateResponseFromMessage(\n                //   \"Message received is a recommendation message.\"\n                // );\n\n                var product_types = [];\n                if (entities[\"product_type\"]) {\n                    console.log(\"Processing product types\");\n                    product_types = entities[\"product_type\"].filter(function (obj) {\n                        return obj[\"confidence\"] > 0.5;\n                    }).map(function (obj) {\n                        return obj[\"value\"];\n                    });\n                }\n\n                response = generateRecommendationsResponse(product_types);\n                console.log(response);\n                break;\n\n            case \"enquiry\":\n                // Handle enquiry\n                // response = generateResponseFromMessage(\n                //   \"Message received is an enquiry message.\"\n                // );\n\n                if (intent_subcategory === \"product\") {\n                    // Retrieve product and attribute from entities object\n                    if (entities[\"product\"] && entities[\"product_attribute\"]) {\n                        var product = entities[\"product\"][0][\"value\"];\n                        var attribute = entities[\"product_attribute\"][0][\"value\"];\n                        // Handle product enquiry\n                        response = generateProductEnquiryResponse(product, attribute);\n                    } else if (entities[\"product_type\"] && entities[\"product_attribute\"]) {\n                        // Handle product type enquiry\n                        var product_type = entities[\"product_type\"][0][\"value\"];\n                        var _attribute = entities[\"product_attribute\"][0][\"value\"];\n                        response = generateProductTypeEnquiryResponse(product_type, _attribute);\n                    } else {\n                        response = defaultResponse;\n                    }\n                } else if (intent_subcategory === \"general\") {\n                    var messages = {\n                        profit: \"All net revenue earned from the sale of our products and services go towards paying a monthly allowance for our clients' work, as well as their lunch expenses while undergoing training.\",\n                        manufacturer: \"We support adults with intellectual disabilities. We started a range of social enterprise projects to provide alternative work engagement for our adult trainees.\",\n                        products: \"We sell craft and baker goods.\"\n                    };\n                    // Loop through message keys (entity) and find if entity is in entities\n                    Object.keys(messages).forEach(function (entity) {\n                        if (response == null && entities[entity]) {\n                            response = generateResponseFromMessage(messages[entity]);\n                        }\n                    });\n                } else if (intent_subcategory === \"delivery\") {\n                    if (entities[\"status\"]) {\n                        // TODO: Order status\n                        response = generateResponseFromMessage(\"Your latest order is <status>.\");\n                    } else if (entities[\"estimated_arrival\"]) {\n                        // TODO: Order estimated arrival\n                        response = generateResponseFromMessage(\"The average delivery time takes 5-7 working days. Your ordered was sent on <date>. It is estimated to arrive on <date + 7 working days>.\");\n                    } else if (entities[\"cost\"]) {\n                        response = generateResponseFromMessage(\"It is a flat fee of $2 for every order.\");\n                    } else {\n                        response = generateResponseFromMessage(\"We deliver islandwide. The average delivery time takes 5-7 working days.\");\n                    }\n                }\n                break;\n\n            case \"cart\":\n                // Handle shopping cart\n                // response = generateResponseFromMessage(\n                //   \"Message received is a cart message.\"\n                // );\n\n                if (intent_subcategory === \"add\" && entities[\"product\"]) {\n                    var product_name = entities[\"product\"][0][\"value\"];\n                    var quantity = entities[\"number\"] ? entities[\"number\"][0][\"value\"] : 1;\n                    response = generateAddCartResponse(sender_psid, product_name, quantity);\n                } else if (intent_subcategory === \"view\") {\n                    response = generateViewCartResponse(sender_psid);\n                }\n                break;\n\n            default:\n                response = defaultResponse;\n        }\n\n        response = response == null ? defaultResponse : response;\n        return response;\n    } else if (is_greeting) {\n        // Message has no intent, just greeting\n        // TODO: Add quick replies of chatbot functionalities (recommendations, check order status, etc.)\n        return generateResponseFromMessage(\"Hi there! Welcome to Bright. How can I help you?\");\n    }\n\n    // No intent nor greeting\n    return defaultResponse;\n}\n\n// Wrapper method to convert text message string to response object\nfunction generateResponseFromMessage(message) {\n    return {\n        text: message\n    };\n}\n\n// Response on generic template carousel for recommendations\nasync function generateRecommendationsResponse(product_types) {\n    // Retrieve products to recommend based on list of product types. If product types is an empty array, recommend products of various types\n    var products = void 0;\n\n    if (product_types.length === 0) {\n        products = await getAllProducts();\n    } else {\n        products = await getProductsByType(product_types[0]);\n    }\n\n    var response = {\n        attachment: {\n            type: \"template\",\n            payload: {\n                template_type: \"generic\",\n                elements: products.map(function (product) {\n                    return {\n                        title: product[\"title\"],\n                        subtitle: '$' + product[\"price\"],\n                        image_url: product[\"image_link\"],\n                        buttons: [{\n                            type: \"postback\",\n                            title: \"Learn More\",\n                            payload: 'enquiry_product ' + product[\"title\"]\n                        }, {\n                            type: \"postback\",\n                            title: \"Add to Cart\",\n                            payload: 'cart_add ' + product[\"title\"]\n                        }]\n                    };\n                })\n            }\n        }\n    };\n    return response;\n}\n\n// Response on confirmation of product added to cart and quick replies\nfunction generateAddCartResponse(sender_psid, product_name, quantity) {\n    // TODO: Add product to cart in db\n\n    return {\n        text: 'Added ' + quantity + ' ' + product_name + ' to cart.',\n        quick_replies: [{\n            content_type: \"text\",\n            title: \"View Cart\",\n            payload: 'cart_view'\n        }, {\n            content_type: \"text\",\n            title: \"Checkout\",\n            payload: 'checkout'\n        }]\n    };\n}\n\n// Response on generic template carousel for cart\nfunction generateViewCartResponse(sender_psid) {\n    // TODO: Get cart from db\n    var products = [{\n        id: 1,\n        name: \"Dark Chocolate Oatmeal Cookies\",\n        price: 3.5,\n        url: \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n        quantity: 1\n    }, {\n        id: 2,\n        name: \"Cranberry Sweetheart Cookies (Eggless)\",\n        price: 3.5,\n        url: \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n        quantity: 2\n    }, {\n        id: 3,\n        name: \"Earl Grey Sunflower Seeds Cookies\",\n        price: 3.5,\n        url: \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n        quantity: 1\n    }];\n    var response = {\n        attachment: {\n            type: \"template\",\n            payload: {\n                template_type: \"generic\",\n                elements: products.map(function (product) {\n                    return {\n                        title: product[\"name\"],\n                        subtitle: 'Qty: ' + product[\"quantity\"] + ' ($' + product[\"price\"] + ' each)',\n                        image_url: product[\"url\"],\n                        buttons: [{\n                            type: \"postback\",\n                            title: \"Add 1\",\n                            payload: 'cart_add ' + product[\"name\"]\n                        }, {\n                            type: \"postback\",\n                            title: \"Remove All\",\n                            payload: 'cart_remove ' + product[\"name\"]\n                        }]\n                    };\n                })\n            }\n        }\n    };\n    return response;\n}\n\n// Response on receipt template for latest confirmed order\nfunction generateReceiptResponse(sender_psid) {\n    // TODO: Get latest order from database\n    var products = [{\n        id: 1,\n        name: \"Dark Chocolate Oatmeal Cookies\",\n        price: 3.5,\n        url: \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n        quantity: 1\n    }, {\n        id: 2,\n        name: \"Cranberry Sweetheart Cookies (Eggless)\",\n        price: 3.5,\n        url: \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n        quantity: 2\n    }, {\n        id: 3,\n        name: \"Earl Grey Sunflower Seeds Cookies\",\n        price: 3.5,\n        url: \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n        quantity: 1\n    }];\n\n    var response = {\n        attachment: {\n            type: \"template\",\n            payload: {\n                template_type: \"receipt\",\n                recipient_name: \"<CUSTOMER_NAME>\", // Mandatory field\n                order_number: \"<ORDER_NUMBER>\", // Mandatory field\n                currency: \"SGD\",\n                payment_method: \"PayPal\",\n                order_url: \"\",\n                address: {\n                    street_1: \"9 Straits View\", // Mandatory field\n                    city: \"Singapore\",\n                    postal_code: \"018937\",\n                    state: \"SG\",\n                    country: \"SG\"\n                },\n                summary: {\n                    subtotal: 10,\n                    shipping_cost: 5,\n                    total_tax: 2,\n                    total_cost: 15\n                },\n                elements: products.map(function (product) {\n                    return {\n                        title: '' + product[\"name\"],\n                        subtitle: \"\",\n                        quantity: product[\"quantity\"],\n                        price: product[\"price\"],\n                        currency: \"SGD\",\n                        image_url: product[\"url\"]\n                    };\n                })\n            }\n        }\n    };\n\n    return response;\n}\n\n// Response on prododuct enquiry\nfunction generateProductEnquiryResponse(product, attribute) {\n    // TODO: Get product from db, create message and generate response\n    return generateResponseFromMessage(\"You are enquiring about the \" + attribute + \" of \" + product);\n}\n\n// Response on prododuct enquiry\nasync function generateProductTypeEnquiryResponse(product_type, attribute) {\n    // TODO: Get product from db, create message and generate response\n    var products = await getProductsByType(product_type);\n    return {\n        text: 'Which product are you enquiring about its ' + attribute + '?',\n        quick_replies: products.map(function (product) {\n            return {\n                content_type: \"text\",\n                title: product.title,\n                payload: 'enquiry_product_attribute ' + attribute + ' ' + product.title\n            };\n        })\n    };\n}\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYmhvb2tzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsIlZFUklGWV9UT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJtb2RlIiwicXVlcnkiLCJ0b2tlbiIsImNoYWxsZW5nZSIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXMiLCJzZW5kIiwic2VuZFN0YXR1cyIsInBvc3QiLCJib2R5Iiwib2JqZWN0IiwiZW50cnkiLCJmb3JFYWNoIiwid2ViaG9va19ldmVudCIsIm1lc3NhZ2luZyIsInNlbmRlcl9wc2lkIiwic2VuZGVyIiwiaWQiLCJtZXNzYWdlIiwicXVpY2tfcmVwbHkiLCJoYW5kbGVQb3N0YmFjayIsImhhbmRsZU1lc3NhZ2UiLCJQQUdFX0FDQ0VTU19UT0tFTiIsInJlc3BvbnNlIiwidGhlbiIsInVzZXIiLCJsZW5ndGgiLCJwb3N0YmFjayIsImRlZmF1bHRSZXNwb25zZSIsImdlbmVyYXRlUmVzcG9uc2VGcm9tTWVzc2FnZSIsInJlY2VpdmVkX21lc3NhZ2UiLCJ0ZXh0IiwicHJvY2Vzc01lc3NhZ2UiLCJjYWxsU2VuZEFQSSIsInJlY2VpdmVkX3Bvc3RiYWNrIiwicGF5bG9hZCIsInBvc3RiYWNrX2ludGVudCIsInNwbGl0IiwicG9zdGJhY2tfY29udGVudCIsInN1YnN0cmluZyIsImluZGV4T2YiLCJnZW5lcmF0ZUFkZENhcnRSZXNwb25zZSIsImdlbmVyYXRlVmlld0NhcnRSZXNwb25zZSIsImF0dHJpYnV0ZSIsInByb2R1Y3QiLCJnZW5lcmF0ZVByb2R1Y3RFbnF1aXJ5UmVzcG9uc2UiLCJhdHRhY2htZW50IiwidHlwZSIsInRlbXBsYXRlX3R5cGUiLCJidXR0b25zIiwidGl0bGUiLCJnZW5lcmF0ZVJlY2VpcHRSZXNwb25zZSIsInJlcXVlc3RfYm9keSIsInJlY2lwaWVudCIsInJlcXVlc3QiLCJ1cmkiLCJxcyIsImFjY2Vzc190b2tlbiIsIm1ldGhvZCIsImpzb24iLCJlcnIiLCJlcnJvciIsImVudGl0aWVzIiwibmxwIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsImlzX2dyZWV0aW5nIiwiaW50ZW50IiwiaW50ZW50X3BhcnRzIiwiaW50ZW50X2NhdGVnb3J5IiwiaW50ZW50X3N1YmNhdGVnb3J5IiwicHJvZHVjdF90eXBlcyIsImZpbHRlciIsIm9iaiIsIm1hcCIsImdlbmVyYXRlUmVjb21tZW5kYXRpb25zUmVzcG9uc2UiLCJwcm9kdWN0X3R5cGUiLCJnZW5lcmF0ZVByb2R1Y3RUeXBlRW5xdWlyeVJlc3BvbnNlIiwibWVzc2FnZXMiLCJwcm9maXQiLCJtYW51ZmFjdHVyZXIiLCJwcm9kdWN0cyIsImVudGl0eSIsInByb2R1Y3RfbmFtZSIsInF1YW50aXR5IiwiZ2V0QWxsUHJvZHVjdHMiLCJnZXRQcm9kdWN0c0J5VHlwZSIsImVsZW1lbnRzIiwic3VidGl0bGUiLCJpbWFnZV91cmwiLCJxdWlja19yZXBsaWVzIiwiY29udGVudF90eXBlIiwibmFtZSIsInByaWNlIiwidXJsIiwicmVjaXBpZW50X25hbWUiLCJvcmRlcl9udW1iZXIiLCJjdXJyZW5jeSIsInBheW1lbnRfbWV0aG9kIiwib3JkZXJfdXJsIiwiYWRkcmVzcyIsInN0cmVldF8xIiwiY2l0eSIsInBvc3RhbF9jb2RlIiwic3RhdGUiLCJjb3VudHJ5Iiwic3VtbWFyeSIsInN1YnRvdGFsIiwic2hpcHBpbmdfY29zdCIsInRvdGFsX3RheCIsInRvdGFsX2Nvc3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUdBOztBQUNBOztBQUpBLElBQUlBLFdBQVdDLFFBQVEsVUFBUixDQUFmO0FBQ0EsSUFBSUMsU0FBU0QsUUFBUSxTQUFSLEVBQW1CRSxNQUFuQixFQUFiO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQUQsT0FBT0UsR0FBUCxDQUFXLFVBQVgsRUFBdUIsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFDakMsUUFBSUMsZUFBZUMsUUFBUUMsR0FBUixDQUFZRixZQUEvQjs7QUFFQTtBQUNBLFFBQUlHLE9BQU9MLElBQUlNLEtBQUosQ0FBVSxVQUFWLENBQVg7QUFDQSxRQUFJQyxRQUFRUCxJQUFJTSxLQUFKLENBQVUsa0JBQVYsQ0FBWjtBQUNBLFFBQUlFLFlBQVlSLElBQUlNLEtBQUosQ0FBVSxlQUFWLENBQWhCOztBQUVBO0FBQ0EsUUFBSUQsUUFBUUUsS0FBWixFQUFtQjtBQUNmO0FBQ0EsWUFBSUYsU0FBUyxXQUFULElBQXdCRSxVQUFVTCxZQUF0QyxFQUFvRDtBQUNoRDtBQUNBTyxvQkFBUUMsR0FBUixDQUFZLGtCQUFaO0FBQ0FULGdCQUFJVSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJKLFNBQXJCO0FBQ0gsU0FKRCxNQUlPO0FBQ0g7QUFDQVAsZ0JBQUlZLFVBQUosQ0FBZSxHQUFmO0FBQ0g7QUFDSjtBQUNKLENBcEJEOztBQXNCQTtBQUNBaEIsT0FBT2lCLElBQVAsQ0FBWSxVQUFaLEVBQXdCLFVBQUNkLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ2xDLFFBQUljLE9BQU9mLElBQUllLElBQWY7O0FBRUE7QUFDQSxRQUFJQSxLQUFLQyxNQUFMLEtBQWdCLE1BQXBCLEVBQTRCO0FBQ3hCO0FBQ0FELGFBQUtFLEtBQUwsQ0FBV0MsT0FBWCxDQUFtQixVQUFVRCxLQUFWLEVBQWlCO0FBQ2hDO0FBQ0E7QUFDQSxnQkFBSUUsZ0JBQWdCRixNQUFNRyxTQUFOLENBQWdCLENBQWhCLENBQXBCO0FBQ0E7O0FBRUE7QUFDQSxnQkFBSUMsY0FBY0YsY0FBY0csTUFBZCxDQUFxQkMsRUFBdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQUlKLGNBQWNLLE9BQWxCLEVBQTJCO0FBQ3ZCLG9CQUFJTCxjQUFjSyxPQUFkLENBQXNCQyxXQUExQixFQUF1QztBQUNuQ0MsbUNBQWVMLFdBQWYsRUFBNEJGLGNBQWNLLE9BQWQsQ0FBc0JDLFdBQWxEO0FBQ0gsaUJBRkQsTUFFTztBQUNIRSxrQ0FBY04sV0FBZCxFQUEyQkYsY0FBY0ssT0FBekM7QUFDSDs7QUFFRCx1Q0FBUUksaUJBQVIsRUFBMkJQLFdBQTNCLEVBQXdDLFVBQVVRLFFBQVYsRUFBb0I7QUFDeEQseUNBQVVSLFdBQVYsRUFBdUJRLFFBQXZCLEVBQWlDQyxJQUFqQyxDQUFzQyxVQUFVQyxJQUFWLEVBQWdCO0FBQ2xELDRCQUFJQSxLQUFLQyxNQUFMLElBQWUsQ0FBbkIsRUFBc0I7QUFDbEIsa0RBQVdYLFdBQVgsRUFBd0JRLFFBQXhCO0FBQ0g7QUFDSixxQkFKRDtBQUtILGlCQU5EO0FBUUgsYUFmRCxNQWVPLElBQUlWLGNBQWNjLFFBQWxCLEVBQTRCO0FBQy9CUCwrQkFBZUwsV0FBZixFQUE0QkYsY0FBY2MsUUFBMUM7QUFDSDtBQUNKLFNBOUJEOztBQWdDQTtBQUNBaEMsWUFBSVUsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLGdCQUFyQjtBQUNILEtBcENELE1Bb0NPO0FBQ0g7QUFDQVgsWUFBSVksVUFBSixDQUFlLEdBQWY7QUFDSDtBQUNKLENBNUNEOztBQThDQSxJQUFJcUIsa0JBQWtCQyw0QkFDbEIsdUZBRGtCLENBQXRCOztBQUlBO0FBQ0EsZUFBZVIsYUFBZixDQUE2Qk4sV0FBN0IsRUFBMENlLGdCQUExQyxFQUE0RDtBQUN4RCxRQUFJUCxpQkFBSjs7QUFFQTtBQUNBLFFBQUlPLGlCQUFpQkMsSUFBckIsRUFBMkI7QUFDdkI1QixnQkFBUUMsR0FBUix5QkFBa0MwQixpQkFBaUJDLElBQW5EOztBQUVBUixtQkFBVyxNQUFNUyxlQUFlakIsV0FBZixFQUE0QmUsZ0JBQTVCLENBQWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNILEtBVEQsTUFTTztBQUNIUCxtQkFBV0ssZUFBWDtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBSyxnQkFBWWxCLFdBQVosRUFBeUJRLFFBQXpCO0FBQ0g7O0FBRUQ7QUFDQSxTQUFTSCxjQUFULENBQXdCTCxXQUF4QixFQUFxQ21CLGlCQUFyQyxFQUF3RDtBQUNwRCxRQUFJWCxpQkFBSjs7QUFFQTtBQUNBLFFBQUlZLFVBQVVELGtCQUFrQkMsT0FBaEM7QUFDQWhDLFlBQVFDLEdBQVIsMEJBQW1DK0IsT0FBbkM7O0FBRUEsUUFBSUMsa0JBQWtCRCxRQUFRRSxLQUFSLENBQWMsR0FBZCxFQUFtQixDQUFuQixDQUF0QjtBQUNBLFFBQUlDLG1CQUFtQkgsUUFBUUksU0FBUixDQUNuQkosUUFBUUssT0FBUixDQUFnQixHQUFoQixJQUF1QixDQURKLEVBRW5CTCxRQUFRVCxNQUZXLENBQXZCOztBQUtBO0FBQ0EsUUFBSVUsb0JBQW9CLFVBQXhCLEVBQW9DO0FBQ2hDO0FBQ0FiLG1CQUFXa0Isd0JBQXdCMUIsV0FBeEIsRUFBcUN1QixnQkFBckMsRUFBdUQsQ0FBdkQsQ0FBWDtBQUNILEtBSEQsTUFHTyxJQUFJRixvQkFBb0IsV0FBeEIsRUFBcUM7QUFDeENiLG1CQUFXbUIseUJBQXlCM0IsV0FBekIsQ0FBWDtBQUNILEtBRk0sTUFFQSxJQUFJcUIsb0JBQW9CLGlCQUF4QixFQUEyQztBQUM5Q2IsbUJBQVdNLHVFQUNrQ1MsZ0JBRGxDLE9BQVg7QUFHSCxLQUpNLE1BSUEsSUFBSUYsb0JBQW9CLDJCQUF4QixFQUFxRDtBQUN4RCxZQUFJTyxZQUFZTCxpQkFBaUJDLFNBQWpCLENBQTJCLENBQTNCLEVBQThCRCxpQkFBaUJFLE9BQWpCLENBQXlCLEdBQXpCLElBQWdDLENBQTlELENBQWhCO0FBQ0EsWUFBSUksVUFBVU4saUJBQWlCQyxTQUFqQixDQUNWRCxpQkFBaUJFLE9BQWpCLENBQXlCLEdBQXpCLElBQWdDLENBRHRCLEVBRVZGLGlCQUFpQlosTUFGUCxDQUFkO0FBSUFILG1CQUFXc0IsK0JBQStCRCxPQUEvQixFQUF3Q0QsU0FBeEMsQ0FBWDtBQUNILEtBUE0sTUFPQSxJQUFJUCxvQkFBb0IsVUFBeEIsRUFBb0M7QUFDdkNiLG1CQUFXO0FBQ1B1Qix3QkFBWTtBQUNSQyxzQkFBTSxVQURFO0FBRVJaLHlCQUFTO0FBQ0xhLG1DQUFlLFFBRFY7QUFFTGpCLDBCQUFNLG1DQUZEO0FBR0xrQiw2QkFBUyxDQUNMO0FBQ0lGLDhCQUFNLFVBRFY7QUFFSUcsK0JBQU8sS0FGWDtBQUdJZixpQ0FBUztBQUhiLHFCQURLO0FBSEo7QUFGRDtBQURMLFNBQVg7QUFnQkgsS0FqQk0sTUFpQkEsSUFBSUMsb0JBQW9CLE1BQXhCLEVBQWdDO0FBQ25DYixtQkFBVztBQUNQdUIsd0JBQVk7QUFDUkMsc0JBQU0sVUFERTtBQUVSWix5QkFBUztBQUNMYSxtQ0FBZSxRQURWO0FBRUxqQiwwQkFBTSxzQ0FGRDtBQUdMa0IsNkJBQVMsQ0FDTDtBQUNJRiw4QkFBTSxVQURWO0FBRUlHLCtCQUFPLGNBRlg7QUFHSWYsaUNBQVM7QUFIYixxQkFESztBQUhKO0FBRkQ7QUFETCxTQUFYO0FBZ0JILEtBakJNLE1BaUJBLElBQUlDLG9CQUFvQixjQUF4QixFQUF3QztBQUMzQ2IsbUJBQVc0Qix3QkFBd0JwQyxXQUF4QixDQUFYO0FBQ0g7O0FBRUQsUUFBSVEsWUFBWSxJQUFoQixFQUFzQjtBQUNsQkEsbUJBQVdLLGlCQUFYO0FBQ0g7O0FBRUQ7QUFDQUssZ0JBQVlsQixXQUFaLEVBQXlCUSxRQUF6QjtBQUNIOztBQUVEO0FBQ0EsU0FBU1UsV0FBVCxDQUFxQmxCLFdBQXJCLEVBQWtDUSxRQUFsQyxFQUE0QztBQUN4QztBQUNBcEIsWUFBUUMsR0FBUixDQUFZbUIsUUFBWjs7QUFFQTtBQUNBLFFBQUk2QixlQUFlO0FBQ2ZDLG1CQUFXO0FBQ1BwQyxnQkFBSUY7QUFERyxTQURJO0FBSWZHLGlCQUFTSztBQUpNLEtBQW5COztBQU9BO0FBQ0ErQixZQUNJO0FBQ0lDLGFBQUssNkNBRFQ7QUFFSUMsWUFBSSxFQUFFQyxjQUFjbkMsaUJBQWhCLEVBRlI7QUFHSW9DLGdCQUFRLE1BSFo7QUFJSUMsY0FBTVA7QUFKVixLQURKLEVBT0ksVUFBQ1EsR0FBRCxFQUFNakUsR0FBTixFQUFXYyxJQUFYLEVBQW9CO0FBQ2hCLFlBQUksQ0FBQ21ELEdBQUwsRUFBVTtBQUNOekQsb0JBQVFDLEdBQVIsQ0FBWSxlQUFaO0FBQ0gsU0FGRCxNQUVPO0FBQ0hELG9CQUFRMEQsS0FBUixDQUFjLDRCQUE0QkQsR0FBMUM7QUFDSDtBQUNKLEtBYkw7QUFlSDs7QUFFRDtBQUNBLFNBQVM1QixjQUFULENBQXdCakIsV0FBeEIsRUFBcUNHLE9BQXJDLEVBQThDO0FBQzFDO0FBQ0EsUUFBSTRDLFdBQVc1QyxRQUFRNkMsR0FBUixDQUFZLFVBQVosQ0FBZjs7QUFFQTtBQUNBQyxXQUFPQyxJQUFQLENBQVlILFFBQVosRUFBc0JsRCxPQUF0QixDQUE4QixlQUFPO0FBQ2pDVCxnQkFBUUMsR0FBUixDQUFZLGFBQWE4RCxHQUF6QjtBQUNBL0QsZ0JBQVFDLEdBQVIsQ0FBWTBELFNBQVNJLEdBQVQsQ0FBWjtBQUNILEtBSEQ7O0FBS0E7QUFDQSxRQUFJQyxjQUNBTCxTQUFTLFdBQVQsS0FBeUIsSUFBekIsSUFDQUEsU0FBUyxXQUFULEVBQXNCLENBQXRCLEVBQXlCLFlBQXpCLElBQXlDLEdBRjdDLENBWDBDLENBYVE7O0FBRWxEO0FBQ0EsUUFBSU0sU0FBU04sU0FBUyxRQUFULEVBQW1CLENBQW5CLENBQWI7O0FBRUEsUUFBSU0sT0FBTyxZQUFQLElBQXVCLEdBQTNCLEVBQWdDO0FBQzVCO0FBQ0EsWUFBSUMsZUFBZUQsT0FBTyxPQUFQLEVBQWdCL0IsS0FBaEIsQ0FBc0IsR0FBdEIsQ0FBbkI7QUFDQSxZQUFJaUMsa0JBQWtCRCxhQUFhLENBQWIsQ0FBdEI7QUFDQSxZQUFJRSxxQkFBcUJGLGFBQWEzQyxNQUFiLEdBQXNCLENBQXRCLEdBQTBCMkMsYUFBYSxDQUFiLENBQTFCLEdBQTRDLElBQXJFO0FBQ0EsWUFBSTlDLFdBQVcsSUFBZjs7QUFFQSxnQkFBUStDLGVBQVI7QUFDSSxpQkFBSyxnQkFBTDtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFJRSxnQkFBZ0IsRUFBcEI7QUFDQSxvQkFBSVYsU0FBUyxjQUFULENBQUosRUFBOEI7QUFDMUIzRCw0QkFBUUMsR0FBUixDQUFZLDBCQUFaO0FBQ0FvRSxvQ0FBZ0JWLFNBQVMsY0FBVCxFQUNYVyxNQURXLENBQ0o7QUFBQSwrQkFBT0MsSUFBSSxZQUFKLElBQW9CLEdBQTNCO0FBQUEscUJBREksRUFFWEMsR0FGVyxDQUVQO0FBQUEsK0JBQU9ELElBQUksT0FBSixDQUFQO0FBQUEscUJBRk8sQ0FBaEI7QUFHSDs7QUFFRG5ELDJCQUFXcUQsZ0NBQWdDSixhQUFoQyxDQUFYO0FBQ0FyRSx3QkFBUUMsR0FBUixDQUFZbUIsUUFBWjtBQUNBOztBQUVKLGlCQUFLLFNBQUw7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBSWdELHVCQUF1QixTQUEzQixFQUFzQztBQUNsQztBQUNBLHdCQUFJVCxTQUFTLFNBQVQsS0FBdUJBLFNBQVMsbUJBQVQsQ0FBM0IsRUFBMEQ7QUFDdEQsNEJBQUlsQixVQUFVa0IsU0FBUyxTQUFULEVBQW9CLENBQXBCLEVBQXVCLE9BQXZCLENBQWQ7QUFDQSw0QkFBSW5CLFlBQVltQixTQUFTLG1CQUFULEVBQThCLENBQTlCLEVBQWlDLE9BQWpDLENBQWhCO0FBQ0E7QUFDQXZDLG1DQUFXc0IsK0JBQStCRCxPQUEvQixFQUF3Q0QsU0FBeEMsQ0FBWDtBQUNILHFCQUxELE1BS08sSUFBSW1CLFNBQVMsY0FBVCxLQUE0QkEsU0FBUyxtQkFBVCxDQUFoQyxFQUErRDtBQUNsRTtBQUNBLDRCQUFJZSxlQUFlZixTQUFTLGNBQVQsRUFBeUIsQ0FBekIsRUFBNEIsT0FBNUIsQ0FBbkI7QUFDQSw0QkFBSW5CLGFBQVltQixTQUFTLG1CQUFULEVBQThCLENBQTlCLEVBQWlDLE9BQWpDLENBQWhCO0FBQ0F2QyxtQ0FBV3VELG1DQUFtQ0QsWUFBbkMsRUFBaURsQyxVQUFqRCxDQUFYO0FBQ0gscUJBTE0sTUFLQTtBQUNIcEIsbUNBQVdLLGVBQVg7QUFDSDtBQUNKLGlCQWZELE1BZU8sSUFBSTJDLHVCQUF1QixTQUEzQixFQUFzQztBQUN6Qyx3QkFBSVEsV0FBVztBQUNYQyxnQ0FDSSwyTEFGTztBQUdYQyxzQ0FDSSxtS0FKTztBQUtYQyxrQ0FBVTtBQUxDLHFCQUFmO0FBT0E7QUFDQWxCLDJCQUFPQyxJQUFQLENBQVljLFFBQVosRUFBc0JuRSxPQUF0QixDQUE4QixrQkFBVTtBQUNwQyw0QkFBSVcsWUFBWSxJQUFaLElBQW9CdUMsU0FBU3FCLE1BQVQsQ0FBeEIsRUFBMEM7QUFDdEM1RCx1Q0FBV00sNEJBQTRCa0QsU0FBU0ksTUFBVCxDQUE1QixDQUFYO0FBQ0g7QUFDSixxQkFKRDtBQUtILGlCQWRNLE1BY0EsSUFBSVosdUJBQXVCLFVBQTNCLEVBQXVDO0FBQzFDLHdCQUFJVCxTQUFTLFFBQVQsQ0FBSixFQUF3QjtBQUNwQjtBQUNBdkMsbUNBQVdNLDRCQUNQLGdDQURPLENBQVg7QUFHSCxxQkFMRCxNQUtPLElBQUlpQyxTQUFTLG1CQUFULENBQUosRUFBbUM7QUFDdEM7QUFDQXZDLG1DQUFXTSw0QkFDUCwwSUFETyxDQUFYO0FBR0gscUJBTE0sTUFLQSxJQUFJaUMsU0FBUyxNQUFULENBQUosRUFBc0I7QUFDekJ2QyxtQ0FBV00sNEJBQ1AseUNBRE8sQ0FBWDtBQUdILHFCQUpNLE1BSUE7QUFDSE4sbUNBQVdNLDRCQUNQLDBFQURPLENBQVg7QUFHSDtBQUNKO0FBQ0Q7O0FBRUosaUJBQUssTUFBTDtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFJMEMsdUJBQXVCLEtBQXZCLElBQWdDVCxTQUFTLFNBQVQsQ0FBcEMsRUFBeUQ7QUFDckQsd0JBQUlzQixlQUFldEIsU0FBUyxTQUFULEVBQW9CLENBQXBCLEVBQXVCLE9BQXZCLENBQW5CO0FBQ0Esd0JBQUl1QixXQUFXdkIsU0FBUyxRQUFULElBQ1RBLFNBQVMsUUFBVCxFQUFtQixDQUFuQixFQUFzQixPQUF0QixDQURTLEdBRVQsQ0FGTjtBQUdBdkMsK0JBQVdrQix3QkFDUDFCLFdBRE8sRUFFUHFFLFlBRk8sRUFHUEMsUUFITyxDQUFYO0FBS0gsaUJBVkQsTUFVTyxJQUFJZCx1QkFBdUIsTUFBM0IsRUFBbUM7QUFDdENoRCwrQkFBV21CLHlCQUF5QjNCLFdBQXpCLENBQVg7QUFDSDtBQUNEOztBQUVKO0FBQ0lRLDJCQUFXSyxlQUFYO0FBbkdSOztBQXNHQUwsbUJBQVdBLFlBQVksSUFBWixHQUFtQkssZUFBbkIsR0FBcUNMLFFBQWhEO0FBQ0EsZUFBT0EsUUFBUDtBQUNILEtBL0dELE1BK0dPLElBQUk0QyxXQUFKLEVBQWlCO0FBQ3BCO0FBQ0E7QUFDQSxlQUFPdEMsNEJBQ0gsa0RBREcsQ0FBUDtBQUdIOztBQUVEO0FBQ0EsV0FBT0QsZUFBUDtBQUNIOztBQUVEO0FBQ0EsU0FBU0MsMkJBQVQsQ0FBcUNYLE9BQXJDLEVBQThDO0FBQzFDLFdBQU87QUFDSGEsY0FBTWI7QUFESCxLQUFQO0FBR0g7O0FBRUQ7QUFDQSxlQUFlMEQsK0JBQWYsQ0FBK0NKLGFBQS9DLEVBQThEO0FBQzFEO0FBQ0EsUUFBSVUsaUJBQUo7O0FBRUEsUUFBSVYsY0FBYzlDLE1BQWQsS0FBeUIsQ0FBN0IsRUFBZ0M7QUFDNUJ3RCxtQkFBVyxNQUFNSSxnQkFBakI7QUFDSCxLQUZELE1BRU87QUFDSEosbUJBQVcsTUFBTUssa0JBQWtCZixjQUFjLENBQWQsQ0FBbEIsQ0FBakI7QUFDSDs7QUFFRCxRQUFJakQsV0FBVztBQUNYdUIsb0JBQVk7QUFDUkMsa0JBQU0sVUFERTtBQUVSWixxQkFBUztBQUNMYSwrQkFBZSxTQURWO0FBRUx3QywwQkFBVU4sU0FBU1AsR0FBVCxDQUFhLG1CQUFXO0FBQzlCLDJCQUFPO0FBQ0h6QiwrQkFBT04sUUFBUSxPQUFSLENBREo7QUFFSDZDLHdDQUFjN0MsUUFBUSxPQUFSLENBRlg7QUFHSDhDLG1DQUFXOUMsUUFBUSxZQUFSLENBSFI7QUFJSEssaUNBQVMsQ0FDTDtBQUNJRixrQ0FBTSxVQURWO0FBRUlHLG1DQUFPLFlBRlg7QUFHSWYsMERBQTRCUyxRQUFRLE9BQVI7QUFIaEMseUJBREssRUFNTDtBQUNJRyxrQ0FBTSxVQURWO0FBRUlHLG1DQUFPLGFBRlg7QUFHSWYsbURBQXFCUyxRQUFRLE9BQVI7QUFIekIseUJBTks7QUFKTixxQkFBUDtBQWlCSCxpQkFsQlM7QUFGTDtBQUZEO0FBREQsS0FBZjtBQTJCQSxXQUFPckIsUUFBUDtBQUNIOztBQUVEO0FBQ0EsU0FBU2tCLHVCQUFULENBQWlDMUIsV0FBakMsRUFBOENxRSxZQUE5QyxFQUE0REMsUUFBNUQsRUFBc0U7QUFDbEU7O0FBRUEsV0FBTztBQUNIdEQseUJBQWVzRCxRQUFmLFNBQTJCRCxZQUEzQixjQURHO0FBRUhPLHVCQUFlLENBQ1g7QUFDSUMsMEJBQWMsTUFEbEI7QUFFSTFDLG1CQUFPLFdBRlg7QUFHSWY7QUFISixTQURXLEVBTVg7QUFDSXlELDBCQUFjLE1BRGxCO0FBRUkxQyxtQkFBTyxVQUZYO0FBR0lmO0FBSEosU0FOVztBQUZaLEtBQVA7QUFlSDs7QUFFRDtBQUNBLFNBQVNPLHdCQUFULENBQWtDM0IsV0FBbEMsRUFBK0M7QUFDM0M7QUFDQSxRQUFJbUUsV0FBVyxDQUNYO0FBQ0lqRSxZQUFJLENBRFI7QUFFSTRFLGNBQU0sZ0NBRlY7QUFHSUMsZUFBTyxHQUhYO0FBSUlDLGFBQ0ksb0dBTFI7QUFNSVYsa0JBQVU7QUFOZCxLQURXLEVBU1g7QUFDSXBFLFlBQUksQ0FEUjtBQUVJNEUsY0FBTSx3Q0FGVjtBQUdJQyxlQUFPLEdBSFg7QUFJSUMsYUFDSSxvR0FMUjtBQU1JVixrQkFBVTtBQU5kLEtBVFcsRUFpQlg7QUFDSXBFLFlBQUksQ0FEUjtBQUVJNEUsY0FBTSxtQ0FGVjtBQUdJQyxlQUFPLEdBSFg7QUFJSUMsYUFDSSxvR0FMUjtBQU1JVixrQkFBVTtBQU5kLEtBakJXLENBQWY7QUEwQkEsUUFBSTlELFdBQVc7QUFDWHVCLG9CQUFZO0FBQ1JDLGtCQUFNLFVBREU7QUFFUloscUJBQVM7QUFDTGEsK0JBQWUsU0FEVjtBQUVMd0MsMEJBQVVOLFNBQVNQLEdBQVQsQ0FBYSxtQkFBVztBQUM5QiwyQkFBTztBQUNIekIsK0JBQU9OLFFBQVEsTUFBUixDQURKO0FBRUg2Qyw0Q0FBa0I3QyxRQUFRLFVBQVIsQ0FBbEIsV0FBMkNBLFFBQVEsT0FBUixDQUEzQyxXQUZHO0FBR0g4QyxtQ0FBVzlDLFFBQVEsS0FBUixDQUhSO0FBSUhLLGlDQUFTLENBQ0w7QUFDSUYsa0NBQU0sVUFEVjtBQUVJRyxtQ0FBTyxPQUZYO0FBR0lmLG1EQUFxQlMsUUFBUSxNQUFSO0FBSHpCLHlCQURLLEVBTUw7QUFDSUcsa0NBQU0sVUFEVjtBQUVJRyxtQ0FBTyxZQUZYO0FBR0lmLHNEQUF3QlMsUUFBUSxNQUFSO0FBSDVCLHlCQU5LO0FBSk4scUJBQVA7QUFpQkgsaUJBbEJTO0FBRkw7QUFGRDtBQURELEtBQWY7QUEyQkEsV0FBT3JCLFFBQVA7QUFDSDs7QUFFRDtBQUNBLFNBQVM0Qix1QkFBVCxDQUFpQ3BDLFdBQWpDLEVBQThDO0FBQzFDO0FBQ0EsUUFBSW1FLFdBQVcsQ0FDWDtBQUNJakUsWUFBSSxDQURSO0FBRUk0RSxjQUFNLGdDQUZWO0FBR0lDLGVBQU8sR0FIWDtBQUlJQyxhQUNJLG9HQUxSO0FBTUlWLGtCQUFVO0FBTmQsS0FEVyxFQVNYO0FBQ0lwRSxZQUFJLENBRFI7QUFFSTRFLGNBQU0sd0NBRlY7QUFHSUMsZUFBTyxHQUhYO0FBSUlDLGFBQ0ksb0dBTFI7QUFNSVYsa0JBQVU7QUFOZCxLQVRXLEVBaUJYO0FBQ0lwRSxZQUFJLENBRFI7QUFFSTRFLGNBQU0sbUNBRlY7QUFHSUMsZUFBTyxHQUhYO0FBSUlDLGFBQ0ksb0dBTFI7QUFNSVYsa0JBQVU7QUFOZCxLQWpCVyxDQUFmOztBQTJCQSxRQUFJOUQsV0FBVztBQUNYdUIsb0JBQVk7QUFDUkMsa0JBQU0sVUFERTtBQUVSWixxQkFBUztBQUNMYSwrQkFBZSxTQURWO0FBRUxnRCxnQ0FBZ0IsaUJBRlgsRUFFOEI7QUFDbkNDLDhCQUFjLGdCQUhULEVBRzJCO0FBQ2hDQywwQkFBVSxLQUpMO0FBS0xDLGdDQUFnQixRQUxYO0FBTUxDLDJCQUFXLEVBTk47QUFPTEMseUJBQVM7QUFDTEMsOEJBQVUsZ0JBREwsRUFDdUI7QUFDNUJDLDBCQUFNLFdBRkQ7QUFHTEMsaUNBQWEsUUFIUjtBQUlMQywyQkFBTyxJQUpGO0FBS0xDLDZCQUFTO0FBTEosaUJBUEo7QUFjTEMseUJBQVM7QUFDTEMsOEJBQVUsRUFETDtBQUVMQyxtQ0FBZSxDQUZWO0FBR0xDLCtCQUFXLENBSE47QUFJTEMsZ0NBQVk7QUFKUCxpQkFkSjtBQW9CTHZCLDBCQUFVTixTQUFTUCxHQUFULENBQWEsbUJBQVc7QUFDOUIsMkJBQU87QUFDSHpCLG9DQUFVTixRQUFRLE1BQVIsQ0FEUDtBQUVINkMsa0NBQVUsRUFGUDtBQUdISixrQ0FBVXpDLFFBQVEsVUFBUixDQUhQO0FBSUhrRCwrQkFBT2xELFFBQVEsT0FBUixDQUpKO0FBS0hzRCxrQ0FBVSxLQUxQO0FBTUhSLG1DQUFXOUMsUUFBUSxLQUFSO0FBTlIscUJBQVA7QUFRSCxpQkFUUztBQXBCTDtBQUZEO0FBREQsS0FBZjs7QUFxQ0EsV0FBT3JCLFFBQVA7QUFDSDs7QUFFRDtBQUNBLFNBQVNzQiw4QkFBVCxDQUF3Q0QsT0FBeEMsRUFBaURELFNBQWpELEVBQTREO0FBQ3hEO0FBQ0EsV0FBT2QsNEJBQTRCLGlDQUFpQ2MsU0FBakMsR0FBNkMsTUFBN0MsR0FBc0RDLE9BQWxGLENBQVA7QUFDSDs7QUFFRDtBQUNBLGVBQWVrQyxrQ0FBZixDQUFrREQsWUFBbEQsRUFBZ0VsQyxTQUFoRSxFQUEyRTtBQUN2RTtBQUNBLFFBQUl1QyxXQUFXLE1BQU1LLGtCQUFrQlYsWUFBbEIsQ0FBckI7QUFDQSxXQUFPO0FBQ0g5Qyw2REFBbURZLFNBQW5ELE1BREc7QUFFSGdELHVCQUFlVCxTQUFTUCxHQUFULENBQWEsbUJBQVc7QUFDbkMsbUJBQU87QUFDSGlCLDhCQUFjLE1BRFg7QUFFSDFDLHVCQUFPTixRQUFRTSxLQUZaO0FBR0hmLHdEQUFzQ1EsU0FBdEMsU0FBbURDLFFBQVFNO0FBSHhELGFBQVA7QUFLSCxTQU5jO0FBRlosS0FBUDtBQVVIOztBQUVEOEQsT0FBT0MsT0FBUCxHQUFpQjFILE1BQWpCIiwiZmlsZSI6IndlYmhvb2tzLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvcm91dGVzL2FwaSIsInNvdXJjZXNDb250ZW50IjpbInZhciBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG52YXIgcm91dGVyID0gcmVxdWlyZSgnZXhwcmVzcycpLlJvdXRlcigpO1xuLy8gaW1wb3J0IHsgZ2V0QWxsUHJvZHVjdHMsIGdldFByb2R1Y3RCeVR5cGUsIGdldFByb2R1Y3RCeUlELCBnZXRQcm9kdWN0UHJpY2UsIGdldFByb2R1Y3REZXNjLCBnZXRQcm9kdWN0c0J5TmFtZSwgZ2V0UHJvZHVjdEJ5TmFtZVZhciB9IGZyb20gJy4uLy4uL21vZGVscy9Qcm9kdWN0JztcbmltcG9ydCB7IGNoZWNrVXNlciwgY3JlYXRlVXNlciB9IGZyb20gJy4uLy4uL21vZGVscy9Vc2VyJztcbmltcG9ydCB7IGdldE5hbWUgfSBmcm9tICcuLi8uLi9oZWxwZXJzL2ZiaGVscGVyJztcbi8vXG4vL1xuLy9cbi8vUk9VVEVTXG4vL1xuLy9cbi8vXG5cbi8vIEFkZHMgc3VwcG9ydCBmb3IgR0VUIHJlcXVlc3RzIHRvIG91ciB3ZWJob29rXG5yb3V0ZXIuZ2V0KFwiL3dlYmhvb2tcIiwgKHJlcSwgcmVzKSA9PiB7XG4gICAgbGV0IFZFUklGWV9UT0tFTiA9IHByb2Nlc3MuZW52LlZFUklGWV9UT0tFTjtcblxuICAgIC8vIFBhcnNlIHRoZSBxdWVyeSBwYXJhbXNcbiAgICBsZXQgbW9kZSA9IHJlcS5xdWVyeVtcImh1Yi5tb2RlXCJdO1xuICAgIGxldCB0b2tlbiA9IHJlcS5xdWVyeVtcImh1Yi52ZXJpZnlfdG9rZW5cIl07XG4gICAgbGV0IGNoYWxsZW5nZSA9IHJlcS5xdWVyeVtcImh1Yi5jaGFsbGVuZ2VcIl07XG5cbiAgICAvLyBDaGVja3MgaWYgYSB0b2tlbiBhbmQgbW9kZSBpcyBpbiB0aGUgcXVlcnkgc3RyaW5nIG9mIHRoZSByZXF1ZXN0XG4gICAgaWYgKG1vZGUgJiYgdG9rZW4pIHtcbiAgICAgICAgLy8gQ2hlY2tzIHRoZSBtb2RlIGFuZCB0b2tlbiBzZW50IGlzIGNvcnJlY3RcbiAgICAgICAgaWYgKG1vZGUgPT09IFwic3Vic2NyaWJlXCIgJiYgdG9rZW4gPT09IFZFUklGWV9UT0tFTikge1xuICAgICAgICAgICAgLy8gUmVzcG9uZHMgd2l0aCB0aGUgY2hhbGxlbmdlIHRva2VuIGZyb20gdGhlIHJlcXVlc3RcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0VCSE9PS19WRVJJRklFRFwiKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGNoYWxsZW5nZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZXNwb25kcyB3aXRoICc0MDMgRm9yYmlkZGVuJyBpZiB2ZXJpZnkgdG9rZW5zIGRvIG5vdCBtYXRjaFxuICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNDAzKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vLyBDcmVhdGVzIHRoZSBlbmRwb2ludCBmb3Igb3VyIHdlYmhvb2tcbnJvdXRlci5wb3N0KFwiL3dlYmhvb2tcIiwgKHJlcSwgcmVzKSA9PiB7XG4gICAgbGV0IGJvZHkgPSByZXEuYm9keTtcblxuICAgIC8vIENoZWNrcyB0aGlzIGlzIGFuIGV2ZW50IGZyb20gYSBwYWdlIHN1YnNjcmlwdGlvblxuICAgIGlmIChib2R5Lm9iamVjdCA9PT0gXCJwYWdlXCIpIHtcbiAgICAgICAgLy8gSXRlcmF0ZXMgb3ZlciBlYWNoIGVudHJ5IC0gdGhlcmUgbWF5IGJlIG11bHRpcGxlIGlmIGJhdGNoZWRcbiAgICAgICAgYm9keS5lbnRyeS5mb3JFYWNoKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgLy8gR2V0cyB0aGUgbWVzc2FnZS4gZW50cnkubWVzc2FnaW5nIGlzIGFuIGFycmF5LCBidXRcbiAgICAgICAgICAgIC8vIHdpbGwgb25seSBldmVyIGNvbnRhaW4gb25lIG1lc3NhZ2UsIHNvIHdlIGdldCBpbmRleCAwXG4gICAgICAgICAgICBsZXQgd2ViaG9va19ldmVudCA9IGVudHJ5Lm1lc3NhZ2luZ1swXTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHdlYmhvb2tfZXZlbnQpO1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHNlbmRlciBQU0lEXG4gICAgICAgICAgICBsZXQgc2VuZGVyX3BzaWQgPSB3ZWJob29rX2V2ZW50LnNlbmRlci5pZDtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiU2VuZGVyIFBTSUQ6IFwiICsgc2VuZGVyX3BzaWQpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZXZlbnQgaXMgYSBtZXNzYWdlIG9yIHBvc3RiYWNrIGFuZFxuICAgICAgICAgICAgLy8gcGFzcyB0aGUgZXZlbnQgdG8gdGhlIGFwcHJvcHJpYXRlIGhhbmRsZXIgZnVuY3Rpb25cbiAgICAgICAgICAgIGlmICh3ZWJob29rX2V2ZW50Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAod2ViaG9va19ldmVudC5tZXNzYWdlLnF1aWNrX3JlcGx5KSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVBvc3RiYWNrKHNlbmRlcl9wc2lkLCB3ZWJob29rX2V2ZW50Lm1lc3NhZ2UucXVpY2tfcmVwbHkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZU1lc3NhZ2Uoc2VuZGVyX3BzaWQsIHdlYmhvb2tfZXZlbnQubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZ2V0TmFtZShQQUdFX0FDQ0VTU19UT0tFTiwgc2VuZGVyX3BzaWQsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja1VzZXIoc2VuZGVyX3BzaWQsIHJlc3BvbnNlKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlci5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVVzZXIoc2VuZGVyX3BzaWQsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2ViaG9va19ldmVudC5wb3N0YmFjaykge1xuICAgICAgICAgICAgICAgIGhhbmRsZVBvc3RiYWNrKHNlbmRlcl9wc2lkLCB3ZWJob29rX2V2ZW50LnBvc3RiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmV0dXJucyBhICcyMDAgT0snIHJlc3BvbnNlIHRvIGFsbCByZXF1ZXN0c1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcIkVWRU5UX1JFQ0VJVkVEXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldHVybnMgYSAnNDA0IE5vdCBGb3VuZCcgaWYgZXZlbnQgaXMgbm90IGZyb20gYSBwYWdlIHN1YnNjcmlwdGlvblxuICAgICAgICByZXMuc2VuZFN0YXR1cyg0MDQpO1xuICAgIH1cbn0pO1xuXG5sZXQgZGVmYXVsdFJlc3BvbnNlID0gZ2VuZXJhdGVSZXNwb25zZUZyb21NZXNzYWdlKFxuICAgIFwiV2UgY291bGQgbm90IHVuZGVyc3RhbmQgeW91ciBtZXNzYWdlLiBLaW5kbHkgcmVwaHJhc2UgeW91ciBtZXNzYWdlIGFuZCBzZW5kIHVzIGFnYWluLlwiXG4pO1xuXG4vLyBIYW5kbGVzIG1lc3NhZ2VzIGV2ZW50c1xuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZShzZW5kZXJfcHNpZCwgcmVjZWl2ZWRfbWVzc2FnZSkge1xuICAgIGxldCByZXNwb25zZTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBtZXNzYWdlIGNvbnRhaW5zIHRleHRcbiAgICBpZiAocmVjZWl2ZWRfbWVzc2FnZS50ZXh0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBSZWNlaXZlZCBtZXNzYWdlOiBcIiR7cmVjZWl2ZWRfbWVzc2FnZS50ZXh0fVwiYCk7XG5cbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBwcm9jZXNzTWVzc2FnZShzZW5kZXJfcHNpZCwgcmVjZWl2ZWRfbWVzc2FnZSk7XG4gICAgICAgIC8vIERlZmF1bHQgcmVzcG9uc2UgKGZvciBkZWJ1Z2dpbmcpXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgcGF5bG9hZCBmb3IgYSBiYXNpYyB0ZXh0IG1lc3NhZ2VcbiAgICAgICAgLy8gcmVzcG9uc2UgPSB7XG4gICAgICAgIC8vICAgdGV4dDogYFlvdSBzZW50IHRoZSBtZXNzYWdlOiBcIiR7cmVjZWl2ZWRfbWVzc2FnZS50ZXh0fVwiLmBcbiAgICAgICAgLy8gfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXNwb25zZSA9IGRlZmF1bHRSZXNwb25zZTtcbiAgICAgICAgLy8gICAgIC8vIEdldHMgdGhlIFVSTCBvZiB0aGUgbWVzc2FnZSBhdHRhY2htZW50XG4gICAgICAgIC8vICAgICBsZXQgYXR0YWNobWVudF91cmwgPSByZWNlaXZlZF9tZXNzYWdlLmF0dGFjaG1lbnRzWzBdLnBheWxvYWQudXJsO1xuICAgIH1cblxuICAgIC8vIFNlbmRzIHRoZSByZXNwb25zZSBtZXNzYWdlXG4gICAgY2FsbFNlbmRBUEkoc2VuZGVyX3BzaWQsIHJlc3BvbnNlKTtcbn1cblxuLy8gSGFuZGxlcyBtZXNzYWdpbmdfcG9zdGJhY2tzIGV2ZW50c1xuZnVuY3Rpb24gaGFuZGxlUG9zdGJhY2soc2VuZGVyX3BzaWQsIHJlY2VpdmVkX3Bvc3RiYWNrKSB7XG4gICAgbGV0IHJlc3BvbnNlO1xuXG4gICAgLy8gR2V0IHRoZSBwYXlsb2FkIGZvciB0aGUgcG9zdGJhY2tcbiAgICBsZXQgcGF5bG9hZCA9IHJlY2VpdmVkX3Bvc3RiYWNrLnBheWxvYWQ7XG4gICAgY29uc29sZS5sb2coYFJlY2VpdmVkIHBvc3RiYWNrOiBcIiR7cGF5bG9hZH1cImApO1xuXG4gICAgbGV0IHBvc3RiYWNrX2ludGVudCA9IHBheWxvYWQuc3BsaXQoXCIgXCIpWzBdO1xuICAgIGxldCBwb3N0YmFja19jb250ZW50ID0gcGF5bG9hZC5zdWJzdHJpbmcoXG4gICAgICAgIHBheWxvYWQuaW5kZXhPZihcIiBcIikgKyAxLFxuICAgICAgICBwYXlsb2FkLmxlbmd0aFxuICAgICk7XG5cbiAgICAvLyBTZXQgdGhlIHJlc3BvbnNlIGJhc2VkIG9uIHRoZSBwb3N0YmFjayBpbnRlbnRcbiAgICBpZiAocG9zdGJhY2tfaW50ZW50ID09PSBcImNhcnRfYWRkXCIpIHtcbiAgICAgICAgLy8gQWRkIHRvIGNhcnRcbiAgICAgICAgcmVzcG9uc2UgPSBnZW5lcmF0ZUFkZENhcnRSZXNwb25zZShzZW5kZXJfcHNpZCwgcG9zdGJhY2tfY29udGVudCwgMSk7XG4gICAgfSBlbHNlIGlmIChwb3N0YmFja19pbnRlbnQgPT09IFwiY2FydF92aWV3XCIpIHtcbiAgICAgICAgcmVzcG9uc2UgPSBnZW5lcmF0ZVZpZXdDYXJ0UmVzcG9uc2Uoc2VuZGVyX3BzaWQpO1xuICAgIH0gZWxzZSBpZiAocG9zdGJhY2tfaW50ZW50ID09PSBcImVucXVpcnlfcHJvZHVjdFwiKSB7XG4gICAgICAgIHJlc3BvbnNlID0gZ2VuZXJhdGVSZXNwb25zZUZyb21NZXNzYWdlKFxuICAgICAgICAgICAgYFdoYXQgd291bGQgeW91IGxpa2UgdG8ga25vdyBhYm91dCBvdXIgJHtwb3N0YmFja19jb250ZW50fT9gXG4gICAgICAgICk7XG4gICAgfSBlbHNlIGlmIChwb3N0YmFja19pbnRlbnQgPT09IFwiZW5xdWlyeV9wcm9kdWN0X2F0dHJpYnV0ZVwiKSB7XG4gICAgICAgIGxldCBhdHRyaWJ1dGUgPSBwb3N0YmFja19jb250ZW50LnN1YnN0cmluZygwLCBwb3N0YmFja19jb250ZW50LmluZGV4T2YoXCIgXCIpICsgMSk7XG4gICAgICAgIGxldCBwcm9kdWN0ID0gcG9zdGJhY2tfY29udGVudC5zdWJzdHJpbmcoXG4gICAgICAgICAgICBwb3N0YmFja19jb250ZW50LmluZGV4T2YoXCIgXCIpICsgMSxcbiAgICAgICAgICAgIHBvc3RiYWNrX2NvbnRlbnQubGVuZ3RoXG4gICAgICAgICk7XG4gICAgICAgIHJlc3BvbnNlID0gZ2VuZXJhdGVQcm9kdWN0RW5xdWlyeVJlc3BvbnNlKHByb2R1Y3QsIGF0dHJpYnV0ZSk7XG4gICAgfSBlbHNlIGlmIChwb3N0YmFja19pbnRlbnQgPT09IFwiY2hlY2tvdXRcIikge1xuICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIGF0dGFjaG1lbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRlbXBsYXRlXCIsXG4gICAgICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZV90eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkNsaWNrIG9uIHRoZSBidXR0b24gYmVsb3cgdG8gcGF5LlwiLFxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJwb3N0YmFja1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlBheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IFwicGFpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmIChwb3N0YmFja19pbnRlbnQgPT09IFwicGFpZFwiKSB7XG4gICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgYXR0YWNobWVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwidGVtcGxhdGVcIixcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlX3R5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiWW91ciBvcmRlciAob3JkZXIgbm8uKSBpcyBjb25maXJtZWQuXCIsXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInBvc3RiYWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVmlldyBSZWNlaXB0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogXCJyZWNlaXB0X3ZpZXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAocG9zdGJhY2tfaW50ZW50ID09PSBcInJlY2VpcHRfdmlld1wiKSB7XG4gICAgICAgIHJlc3BvbnNlID0gZ2VuZXJhdGVSZWNlaXB0UmVzcG9uc2Uoc2VuZGVyX3BzaWQpO1xuICAgIH1cblxuICAgIGlmIChyZXNwb25zZSA9PSBudWxsKSB7XG4gICAgICAgIHJlc3BvbnNlID0gZGVmYXVsdFJlc3BvbnNlKCk7XG4gICAgfVxuXG4gICAgLy8gU2VuZCB0aGUgbWVzc2FnZSB0byBhY2tub3dsZWRnZSB0aGUgcG9zdGJhY2tcbiAgICBjYWxsU2VuZEFQSShzZW5kZXJfcHNpZCwgcmVzcG9uc2UpO1xufVxuXG4vLyBTZW5kcyByZXNwb25zZSBtZXNzYWdlcyB2aWEgdGhlIFNlbmQgQVBJXG5mdW5jdGlvbiBjYWxsU2VuZEFQSShzZW5kZXJfcHNpZCwgcmVzcG9uc2UpIHtcbiAgICAvLyBVbmNvbW1lbnQgdG8gbG9nIHJlc3BvbnNlIG9iamVjdFxuICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblxuICAgIC8vIENvbnN0cnVjdCB0aGUgbWVzc2FnZSBib2R5XG4gICAgbGV0IHJlcXVlc3RfYm9keSA9IHtcbiAgICAgICAgcmVjaXBpZW50OiB7XG4gICAgICAgICAgICBpZDogc2VuZGVyX3BzaWRcbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2VcbiAgICB9O1xuXG4gICAgLy8gU2VuZCB0aGUgSFRUUCByZXF1ZXN0IHRvIHRoZSBNZXNzZW5nZXIgUGxhdGZvcm1cbiAgICByZXF1ZXN0KFxuICAgICAgICB7XG4gICAgICAgICAgICB1cmk6IFwiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjIuNi9tZS9tZXNzYWdlc1wiLFxuICAgICAgICAgICAgcXM6IHsgYWNjZXNzX3Rva2VuOiBQQUdFX0FDQ0VTU19UT0tFTiB9LFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGpzb246IHJlcXVlc3RfYm9keVxuICAgICAgICB9LFxuICAgICAgICAoZXJyLCByZXMsIGJvZHkpID0+IHtcbiAgICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJNZXNzYWdlIHNlbnQhXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5hYmxlIHRvIHNlbmQgbWVzc2FnZTpcIiArIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xufVxuXG4vLyBQcm9jZXNzIHRleHQgbWVzc2FnZSBhbmQgcmV0dXJucyByZXNwb25zZSBvYmplY3QgdG8gaGFuZGxlTWVzc2FnZSgpXG5mdW5jdGlvbiBwcm9jZXNzTWVzc2FnZShzZW5kZXJfcHNpZCwgbWVzc2FnZSkge1xuICAgIC8vIE5MUDogaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS9kb2NzL21lc3Nlbmdlci1wbGF0Zm9ybS9idWlsdC1pbi1ubHBcbiAgICBsZXQgZW50aXRpZXMgPSBtZXNzYWdlLm5scFtcImVudGl0aWVzXCJdO1xuXG4gICAgLy8gVW5jb21tZW50IHRvIHZpZXcgYWxsIGVudGl0aWVzIGFuZCB0aGVpciB4YWx1ZXNcbiAgICBPYmplY3Qua2V5cyhlbnRpdGllcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVudGl0eTogXCIgKyBrZXkpO1xuICAgICAgICBjb25zb2xlLmxvZyhlbnRpdGllc1trZXldKTtcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGdyZWV0aW5nXG4gICAgbGV0IGlzX2dyZWV0aW5nID1cbiAgICAgICAgZW50aXRpZXNbXCJncmVldGluZ3NcIl0gIT0gbnVsbCAmJlxuICAgICAgICBlbnRpdGllc1tcImdyZWV0aW5nc1wiXVswXVtcImNvbmZpZGVuY2VcIl0gPiAwLjg7IC8vIEdyZWV0aW5nIHRocmVzaG9sZCBzZXQgdG8gMC44IChzdHJpY3RlcilcblxuICAgIC8vIFJldHJpZXZlIGZpcnN0IGludGVudCBvYmplY3RcbiAgICBsZXQgaW50ZW50ID0gZW50aXRpZXNbXCJpbnRlbnRcIl1bMF07XG5cbiAgICBpZiAoaW50ZW50W1wiY29uZmlkZW5jZVwiXSA+IDAuNSkge1xuICAgICAgICAvLyBQcm9jZXNzIGludGVudFxuICAgICAgICBsZXQgaW50ZW50X3BhcnRzID0gaW50ZW50W1widmFsdWVcIl0uc3BsaXQoXCJfXCIpO1xuICAgICAgICBsZXQgaW50ZW50X2NhdGVnb3J5ID0gaW50ZW50X3BhcnRzWzBdO1xuICAgICAgICBsZXQgaW50ZW50X3N1YmNhdGVnb3J5ID0gaW50ZW50X3BhcnRzLmxlbmd0aCA+IDEgPyBpbnRlbnRfcGFydHNbMV0gOiBudWxsO1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSBudWxsO1xuXG4gICAgICAgIHN3aXRjaCAoaW50ZW50X2NhdGVnb3J5KSB7XG4gICAgICAgICAgICBjYXNlIFwicmVjb21tZW5kYXRpb25cIjpcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgcmVjb21tZW5kYXRpb25cbiAgICAgICAgICAgICAgICAvLyByZXNwb25zZSA9IGdlbmVyYXRlUmVzcG9uc2VGcm9tTWVzc2FnZShcbiAgICAgICAgICAgICAgICAvLyAgIFwiTWVzc2FnZSByZWNlaXZlZCBpcyBhIHJlY29tbWVuZGF0aW9uIG1lc3NhZ2UuXCJcbiAgICAgICAgICAgICAgICAvLyApO1xuXG4gICAgICAgICAgICAgICAgbGV0IHByb2R1Y3RfdHlwZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAoZW50aXRpZXNbXCJwcm9kdWN0X3R5cGVcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQcm9jZXNzaW5nIHByb2R1Y3QgdHlwZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RfdHlwZXMgPSBlbnRpdGllc1tcInByb2R1Y3RfdHlwZVwiXVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihvYmogPT4gb2JqW1wiY29uZmlkZW5jZVwiXSA+IDAuNSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAob2JqID0+IG9ialtcInZhbHVlXCJdKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGdlbmVyYXRlUmVjb21tZW5kYXRpb25zUmVzcG9uc2UocHJvZHVjdF90eXBlcyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwiZW5xdWlyeVwiOlxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBlbnF1aXJ5XG4gICAgICAgICAgICAgICAgLy8gcmVzcG9uc2UgPSBnZW5lcmF0ZVJlc3BvbnNlRnJvbU1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgLy8gICBcIk1lc3NhZ2UgcmVjZWl2ZWQgaXMgYW4gZW5xdWlyeSBtZXNzYWdlLlwiXG4gICAgICAgICAgICAgICAgLy8gKTtcblxuICAgICAgICAgICAgICAgIGlmIChpbnRlbnRfc3ViY2F0ZWdvcnkgPT09IFwicHJvZHVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJldHJpZXZlIHByb2R1Y3QgYW5kIGF0dHJpYnV0ZSBmcm9tIGVudGl0aWVzIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXRpZXNbXCJwcm9kdWN0XCJdICYmIGVudGl0aWVzW1wicHJvZHVjdF9hdHRyaWJ1dGVcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0ID0gZW50aXRpZXNbXCJwcm9kdWN0XCJdWzBdW1widmFsdWVcIl07XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXR0cmlidXRlID0gZW50aXRpZXNbXCJwcm9kdWN0X2F0dHJpYnV0ZVwiXVswXVtcInZhbHVlXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIHByb2R1Y3QgZW5xdWlyeVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBnZW5lcmF0ZVByb2R1Y3RFbnF1aXJ5UmVzcG9uc2UocHJvZHVjdCwgYXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbnRpdGllc1tcInByb2R1Y3RfdHlwZVwiXSAmJiBlbnRpdGllc1tcInByb2R1Y3RfYXR0cmlidXRlXCJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgcHJvZHVjdCB0eXBlIGVucXVpcnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0X3R5cGUgPSBlbnRpdGllc1tcInByb2R1Y3RfdHlwZVwiXVswXVtcInZhbHVlXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJpYnV0ZSA9IGVudGl0aWVzW1wicHJvZHVjdF9hdHRyaWJ1dGVcIl1bMF1bXCJ2YWx1ZVwiXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gZ2VuZXJhdGVQcm9kdWN0VHlwZUVucXVpcnlSZXNwb25zZShwcm9kdWN0X3R5cGUsIGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGRlZmF1bHRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW50ZW50X3N1YmNhdGVnb3J5ID09PSBcImdlbmVyYWxcIikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9maXQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBbGwgbmV0IHJldmVudWUgZWFybmVkIGZyb20gdGhlIHNhbGUgb2Ygb3VyIHByb2R1Y3RzIGFuZCBzZXJ2aWNlcyBnbyB0b3dhcmRzIHBheWluZyBhIG1vbnRobHkgYWxsb3dhbmNlIGZvciBvdXIgY2xpZW50cycgd29yaywgYXMgd2VsbCBhcyB0aGVpciBsdW5jaCBleHBlbnNlcyB3aGlsZSB1bmRlcmdvaW5nIHRyYWluaW5nLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFudWZhY3R1cmVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiV2Ugc3VwcG9ydCBhZHVsdHMgd2l0aCBpbnRlbGxlY3R1YWwgZGlzYWJpbGl0aWVzLiBXZSBzdGFydGVkIGEgcmFuZ2Ugb2Ygc29jaWFsIGVudGVycHJpc2UgcHJvamVjdHMgdG8gcHJvdmlkZSBhbHRlcm5hdGl2ZSB3b3JrIGVuZ2FnZW1lbnQgZm9yIG91ciBhZHVsdCB0cmFpbmVlcy5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzOiBcIldlIHNlbGwgY3JhZnQgYW5kIGJha2VyIGdvb2RzLlwiXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBtZXNzYWdlIGtleXMgKGVudGl0eSkgYW5kIGZpbmQgaWYgZW50aXR5IGlzIGluIGVudGl0aWVzXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1lc3NhZ2VzKS5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT0gbnVsbCAmJiBlbnRpdGllc1tlbnRpdHldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBnZW5lcmF0ZVJlc3BvbnNlRnJvbU1lc3NhZ2UobWVzc2FnZXNbZW50aXR5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW50ZW50X3N1YmNhdGVnb3J5ID09PSBcImRlbGl2ZXJ5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0aWVzW1wic3RhdHVzXCJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBPcmRlciBzdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gZ2VuZXJhdGVSZXNwb25zZUZyb21NZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiWW91ciBsYXRlc3Qgb3JkZXIgaXMgPHN0YXR1cz4uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW50aXRpZXNbXCJlc3RpbWF0ZWRfYXJyaXZhbFwiXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogT3JkZXIgZXN0aW1hdGVkIGFycml2YWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gZ2VuZXJhdGVSZXNwb25zZUZyb21NZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVGhlIGF2ZXJhZ2UgZGVsaXZlcnkgdGltZSB0YWtlcyA1LTcgd29ya2luZyBkYXlzLiBZb3VyIG9yZGVyZWQgd2FzIHNlbnQgb24gPGRhdGU+LiBJdCBpcyBlc3RpbWF0ZWQgdG8gYXJyaXZlIG9uIDxkYXRlICsgNyB3b3JraW5nIGRheXM+LlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVudGl0aWVzW1wiY29zdFwiXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBnZW5lcmF0ZVJlc3BvbnNlRnJvbU1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJJdCBpcyBhIGZsYXQgZmVlIG9mICQyIGZvciBldmVyeSBvcmRlci5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gZ2VuZXJhdGVSZXNwb25zZUZyb21NZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiV2UgZGVsaXZlciBpc2xhbmR3aWRlLiBUaGUgYXZlcmFnZSBkZWxpdmVyeSB0aW1lIHRha2VzIDUtNyB3b3JraW5nIGRheXMuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJjYXJ0XCI6XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHNob3BwaW5nIGNhcnRcbiAgICAgICAgICAgICAgICAvLyByZXNwb25zZSA9IGdlbmVyYXRlUmVzcG9uc2VGcm9tTWVzc2FnZShcbiAgICAgICAgICAgICAgICAvLyAgIFwiTWVzc2FnZSByZWNlaXZlZCBpcyBhIGNhcnQgbWVzc2FnZS5cIlxuICAgICAgICAgICAgICAgIC8vICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW50ZW50X3N1YmNhdGVnb3J5ID09PSBcImFkZFwiICYmIGVudGl0aWVzW1wicHJvZHVjdFwiXSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvZHVjdF9uYW1lID0gZW50aXRpZXNbXCJwcm9kdWN0XCJdWzBdW1widmFsdWVcIl07XG4gICAgICAgICAgICAgICAgICAgIGxldCBxdWFudGl0eSA9IGVudGl0aWVzW1wibnVtYmVyXCJdXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGVudGl0aWVzW1wibnVtYmVyXCJdWzBdW1widmFsdWVcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogMTtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBnZW5lcmF0ZUFkZENhcnRSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcl9wc2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGludGVudF9zdWJjYXRlZ29yeSA9PT0gXCJ2aWV3XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBnZW5lcmF0ZVZpZXdDYXJ0UmVzcG9uc2Uoc2VuZGVyX3BzaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGRlZmF1bHRSZXNwb25zZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2UgPT0gbnVsbCA/IGRlZmF1bHRSZXNwb25zZSA6IHJlc3BvbnNlO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBlbHNlIGlmIChpc19ncmVldGluZykge1xuICAgICAgICAvLyBNZXNzYWdlIGhhcyBubyBpbnRlbnQsIGp1c3QgZ3JlZXRpbmdcbiAgICAgICAgLy8gVE9ETzogQWRkIHF1aWNrIHJlcGxpZXMgb2YgY2hhdGJvdCBmdW5jdGlvbmFsaXRpZXMgKHJlY29tbWVuZGF0aW9ucywgY2hlY2sgb3JkZXIgc3RhdHVzLCBldGMuKVxuICAgICAgICByZXR1cm4gZ2VuZXJhdGVSZXNwb25zZUZyb21NZXNzYWdlKFxuICAgICAgICAgICAgXCJIaSB0aGVyZSEgV2VsY29tZSB0byBCcmlnaHQuIEhvdyBjYW4gSSBoZWxwIHlvdT9cIlxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIE5vIGludGVudCBub3IgZ3JlZXRpbmdcbiAgICByZXR1cm4gZGVmYXVsdFJlc3BvbnNlO1xufVxuXG4vLyBXcmFwcGVyIG1ldGhvZCB0byBjb252ZXJ0IHRleHQgbWVzc2FnZSBzdHJpbmcgdG8gcmVzcG9uc2Ugb2JqZWN0XG5mdW5jdGlvbiBnZW5lcmF0ZVJlc3BvbnNlRnJvbU1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IG1lc3NhZ2VcbiAgICB9O1xufVxuXG4vLyBSZXNwb25zZSBvbiBnZW5lcmljIHRlbXBsYXRlIGNhcm91c2VsIGZvciByZWNvbW1lbmRhdGlvbnNcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUmVjb21tZW5kYXRpb25zUmVzcG9uc2UocHJvZHVjdF90eXBlcykge1xuICAgIC8vIFJldHJpZXZlIHByb2R1Y3RzIHRvIHJlY29tbWVuZCBiYXNlZCBvbiBsaXN0IG9mIHByb2R1Y3QgdHlwZXMuIElmIHByb2R1Y3QgdHlwZXMgaXMgYW4gZW1wdHkgYXJyYXksIHJlY29tbWVuZCBwcm9kdWN0cyBvZiB2YXJpb3VzIHR5cGVzXG4gICAgbGV0IHByb2R1Y3RzO1xuXG4gICAgaWYgKHByb2R1Y3RfdHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHByb2R1Y3RzID0gYXdhaXQgZ2V0QWxsUHJvZHVjdHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwcm9kdWN0cyA9IGF3YWl0IGdldFByb2R1Y3RzQnlUeXBlKHByb2R1Y3RfdHlwZXNbMF0pO1xuICAgIH1cblxuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgICAgYXR0YWNobWVudDoge1xuICAgICAgICAgICAgdHlwZTogXCJ0ZW1wbGF0ZVwiLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlX3R5cGU6IFwiZ2VuZXJpY1wiLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBwcm9kdWN0cy5tYXAocHJvZHVjdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogcHJvZHVjdFtcInRpdGxlXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IGAkJHtwcm9kdWN0W1wicHJpY2VcIl19YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogcHJvZHVjdFtcImltYWdlX2xpbmtcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInBvc3RiYWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkxlYXJuIE1vcmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogYGVucXVpcnlfcHJvZHVjdCAke3Byb2R1Y3RbXCJ0aXRsZVwiXX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicG9zdGJhY2tcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiQWRkIHRvIENhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogYGNhcnRfYWRkICR7cHJvZHVjdFtcInRpdGxlXCJdfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG4vLyBSZXNwb25zZSBvbiBjb25maXJtYXRpb24gb2YgcHJvZHVjdCBhZGRlZCB0byBjYXJ0IGFuZCBxdWljayByZXBsaWVzXG5mdW5jdGlvbiBnZW5lcmF0ZUFkZENhcnRSZXNwb25zZShzZW5kZXJfcHNpZCwgcHJvZHVjdF9uYW1lLCBxdWFudGl0eSkge1xuICAgIC8vIFRPRE86IEFkZCBwcm9kdWN0IHRvIGNhcnQgaW4gZGJcblxuICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IGBBZGRlZCAke3F1YW50aXR5fSAke3Byb2R1Y3RfbmFtZX0gdG8gY2FydC5gLFxuICAgICAgICBxdWlja19yZXBsaWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29udGVudF90eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJWaWV3IENhcnRcIixcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBgY2FydF92aWV3YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250ZW50X3R5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIkNoZWNrb3V0XCIsXG4gICAgICAgICAgICAgICAgcGF5bG9hZDogYGNoZWNrb3V0YFxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfTtcbn1cblxuLy8gUmVzcG9uc2Ugb24gZ2VuZXJpYyB0ZW1wbGF0ZSBjYXJvdXNlbCBmb3IgY2FydFxuZnVuY3Rpb24gZ2VuZXJhdGVWaWV3Q2FydFJlc3BvbnNlKHNlbmRlcl9wc2lkKSB7XG4gICAgLy8gVE9ETzogR2V0IGNhcnQgZnJvbSBkYlxuICAgIGxldCBwcm9kdWN0cyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICBuYW1lOiBcIkRhcmsgQ2hvY29sYXRlIE9hdG1lYWwgQ29va2llc1wiLFxuICAgICAgICAgICAgcHJpY2U6IDMuNSxcbiAgICAgICAgICAgIHVybDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vc3RhdGljLndpeHN0YXRpYy5jb20vbWVkaWEvNzY4OTc5XzNmY2NiMmJiODM3YTQ0Y2FhODBiYjRmYzVkZGRkMTE5fm12Ml9kXzE4MDBfMTgwMF9zXzIuanBnXCIsXG4gICAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgIG5hbWU6IFwiQ3JhbmJlcnJ5IFN3ZWV0aGVhcnQgQ29va2llcyAoRWdnbGVzcylcIixcbiAgICAgICAgICAgIHByaWNlOiAzLjUsXG4gICAgICAgICAgICB1cmw6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL3N0YXRpYy53aXhzdGF0aWMuY29tL21lZGlhLzc2ODk3OV8zZmNjYjJiYjgzN2E0NGNhYTgwYmI0ZmM1ZGRkZDExOX5tdjJfZF8xODAwXzE4MDBfc18yLmpwZ1wiLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDMsXG4gICAgICAgICAgICBuYW1lOiBcIkVhcmwgR3JleSBTdW5mbG93ZXIgU2VlZHMgQ29va2llc1wiLFxuICAgICAgICAgICAgcHJpY2U6IDMuNSxcbiAgICAgICAgICAgIHVybDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vc3RhdGljLndpeHN0YXRpYy5jb20vbWVkaWEvNzY4OTc5XzNmY2NiMmJiODM3YTQ0Y2FhODBiYjRmYzVkZGRkMTE5fm12Ml9kXzE4MDBfMTgwMF9zXzIuanBnXCIsXG4gICAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICB9XG4gICAgXTtcbiAgICBsZXQgcmVzcG9uc2UgPSB7XG4gICAgICAgIGF0dGFjaG1lbnQ6IHtcbiAgICAgICAgICAgIHR5cGU6IFwidGVtcGxhdGVcIixcbiAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZV90eXBlOiBcImdlbmVyaWNcIixcbiAgICAgICAgICAgICAgICBlbGVtZW50czogcHJvZHVjdHMubWFwKHByb2R1Y3QgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHByb2R1Y3RbXCJuYW1lXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IGBRdHk6ICR7cHJvZHVjdFtcInF1YW50aXR5XCJdfSAoJCR7cHJvZHVjdFtcInByaWNlXCJdfSBlYWNoKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHByb2R1Y3RbXCJ1cmxcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInBvc3RiYWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkFkZCAxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IGBjYXJ0X2FkZCAke3Byb2R1Y3RbXCJuYW1lXCJdfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJwb3N0YmFja1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJSZW1vdmUgQWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IGBjYXJ0X3JlbW92ZSAke3Byb2R1Y3RbXCJuYW1lXCJdfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG4vLyBSZXNwb25zZSBvbiByZWNlaXB0IHRlbXBsYXRlIGZvciBsYXRlc3QgY29uZmlybWVkIG9yZGVyXG5mdW5jdGlvbiBnZW5lcmF0ZVJlY2VpcHRSZXNwb25zZShzZW5kZXJfcHNpZCkge1xuICAgIC8vIFRPRE86IEdldCBsYXRlc3Qgb3JkZXIgZnJvbSBkYXRhYmFzZVxuICAgIGxldCBwcm9kdWN0cyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICBuYW1lOiBcIkRhcmsgQ2hvY29sYXRlIE9hdG1lYWwgQ29va2llc1wiLFxuICAgICAgICAgICAgcHJpY2U6IDMuNSxcbiAgICAgICAgICAgIHVybDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vc3RhdGljLndpeHN0YXRpYy5jb20vbWVkaWEvNzY4OTc5XzNmY2NiMmJiODM3YTQ0Y2FhODBiYjRmYzVkZGRkMTE5fm12Ml9kXzE4MDBfMTgwMF9zXzIuanBnXCIsXG4gICAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgIG5hbWU6IFwiQ3JhbmJlcnJ5IFN3ZWV0aGVhcnQgQ29va2llcyAoRWdnbGVzcylcIixcbiAgICAgICAgICAgIHByaWNlOiAzLjUsXG4gICAgICAgICAgICB1cmw6XG4gICAgICAgICAgICAgICAgXCJodHRwczovL3N0YXRpYy53aXhzdGF0aWMuY29tL21lZGlhLzc2ODk3OV8zZmNjYjJiYjgzN2E0NGNhYTgwYmI0ZmM1ZGRkZDExOX5tdjJfZF8xODAwXzE4MDBfc18yLmpwZ1wiLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IDMsXG4gICAgICAgICAgICBuYW1lOiBcIkVhcmwgR3JleSBTdW5mbG93ZXIgU2VlZHMgQ29va2llc1wiLFxuICAgICAgICAgICAgcHJpY2U6IDMuNSxcbiAgICAgICAgICAgIHVybDpcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vc3RhdGljLndpeHN0YXRpYy5jb20vbWVkaWEvNzY4OTc5XzNmY2NiMmJiODM3YTQ0Y2FhODBiYjRmYzVkZGRkMTE5fm12Ml9kXzE4MDBfMTgwMF9zXzIuanBnXCIsXG4gICAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICB9XG4gICAgXTtcblxuICAgIGxldCByZXNwb25zZSA9IHtcbiAgICAgICAgYXR0YWNobWVudDoge1xuICAgICAgICAgICAgdHlwZTogXCJ0ZW1wbGF0ZVwiLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlX3R5cGU6IFwicmVjZWlwdFwiLFxuICAgICAgICAgICAgICAgIHJlY2lwaWVudF9uYW1lOiBcIjxDVVNUT01FUl9OQU1FPlwiLCAvLyBNYW5kYXRvcnkgZmllbGRcbiAgICAgICAgICAgICAgICBvcmRlcl9udW1iZXI6IFwiPE9SREVSX05VTUJFUj5cIiwgLy8gTWFuZGF0b3J5IGZpZWxkXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IFwiU0dEXCIsXG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2Q6IFwiUGF5UGFsXCIsXG4gICAgICAgICAgICAgICAgb3JkZXJfdXJsOiBcIlwiLFxuICAgICAgICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWV0XzE6IFwiOSBTdHJhaXRzIFZpZXdcIiwgLy8gTWFuZGF0b3J5IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGNpdHk6IFwiU2luZ2Fwb3JlXCIsXG4gICAgICAgICAgICAgICAgICAgIHBvc3RhbF9jb2RlOiBcIjAxODkzN1wiLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogXCJTR1wiLFxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBcIlNHXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgc3VidG90YWw6IDEwLFxuICAgICAgICAgICAgICAgICAgICBzaGlwcGluZ19jb3N0OiA1LFxuICAgICAgICAgICAgICAgICAgICB0b3RhbF90YXg6IDIsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX2Nvc3Q6IDE1XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbGVtZW50czogcHJvZHVjdHMubWFwKHByb2R1Y3QgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGAke3Byb2R1Y3RbXCJuYW1lXCJdfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBwcm9kdWN0W1wicXVhbnRpdHlcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogcHJvZHVjdFtcInByaWNlXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k6IFwiU0dEXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHByb2R1Y3RbXCJ1cmxcIl1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbn1cblxuLy8gUmVzcG9uc2Ugb24gcHJvZG9kdWN0IGVucXVpcnlcbmZ1bmN0aW9uIGdlbmVyYXRlUHJvZHVjdEVucXVpcnlSZXNwb25zZShwcm9kdWN0LCBhdHRyaWJ1dGUpIHtcbiAgICAvLyBUT0RPOiBHZXQgcHJvZHVjdCBmcm9tIGRiLCBjcmVhdGUgbWVzc2FnZSBhbmQgZ2VuZXJhdGUgcmVzcG9uc2VcbiAgICByZXR1cm4gZ2VuZXJhdGVSZXNwb25zZUZyb21NZXNzYWdlKFwiWW91IGFyZSBlbnF1aXJpbmcgYWJvdXQgdGhlIFwiICsgYXR0cmlidXRlICsgXCIgb2YgXCIgKyBwcm9kdWN0KTtcbn1cblxuLy8gUmVzcG9uc2Ugb24gcHJvZG9kdWN0IGVucXVpcnlcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUHJvZHVjdFR5cGVFbnF1aXJ5UmVzcG9uc2UocHJvZHVjdF90eXBlLCBhdHRyaWJ1dGUpIHtcbiAgICAvLyBUT0RPOiBHZXQgcHJvZHVjdCBmcm9tIGRiLCBjcmVhdGUgbWVzc2FnZSBhbmQgZ2VuZXJhdGUgcmVzcG9uc2VcbiAgICBsZXQgcHJvZHVjdHMgPSBhd2FpdCBnZXRQcm9kdWN0c0J5VHlwZShwcm9kdWN0X3R5cGUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IGBXaGljaCBwcm9kdWN0IGFyZSB5b3UgZW5xdWlyaW5nIGFib3V0IGl0cyAke2F0dHJpYnV0ZX0/YCxcbiAgICAgICAgcXVpY2tfcmVwbGllczogcHJvZHVjdHMubWFwKHByb2R1Y3QgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjb250ZW50X3R5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwcm9kdWN0LnRpdGxlLFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IGBlbnF1aXJ5X3Byb2R1Y3RfYXR0cmlidXRlICR7YXR0cmlidXRlfSAke3Byb2R1Y3QudGl0bGV9YFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "webhooks.js"
      ],
      "names": [
        "mongoose",
        "require",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "VERIFY_TOKEN",
        "process",
        "env",
        "mode",
        "query",
        "token",
        "challenge",
        "console",
        "log",
        "status",
        "send",
        "sendStatus",
        "post",
        "body",
        "object",
        "entry",
        "forEach",
        "webhook_event",
        "messaging",
        "sender_psid",
        "sender",
        "id",
        "message",
        "quick_reply",
        "handlePostback",
        "handleMessage",
        "PAGE_ACCESS_TOKEN",
        "response",
        "then",
        "user",
        "length",
        "postback",
        "defaultResponse",
        "generateResponseFromMessage",
        "received_message",
        "text",
        "processMessage",
        "callSendAPI",
        "received_postback",
        "payload",
        "postback_intent",
        "split",
        "postback_content",
        "substring",
        "indexOf",
        "generateAddCartResponse",
        "generateViewCartResponse",
        "attribute",
        "product",
        "generateProductEnquiryResponse",
        "attachment",
        "type",
        "template_type",
        "buttons",
        "title",
        "generateReceiptResponse",
        "request_body",
        "recipient",
        "request",
        "uri",
        "qs",
        "access_token",
        "method",
        "json",
        "err",
        "error",
        "entities",
        "nlp",
        "Object",
        "keys",
        "key",
        "is_greeting",
        "intent",
        "intent_parts",
        "intent_category",
        "intent_subcategory",
        "product_types",
        "filter",
        "obj",
        "map",
        "generateRecommendationsResponse",
        "product_type",
        "generateProductTypeEnquiryResponse",
        "messages",
        "profit",
        "manufacturer",
        "products",
        "entity",
        "product_name",
        "quantity",
        "getAllProducts",
        "getProductsByType",
        "elements",
        "subtitle",
        "image_url",
        "quick_replies",
        "content_type",
        "name",
        "price",
        "url",
        "recipient_name",
        "order_number",
        "currency",
        "payment_method",
        "order_url",
        "address",
        "street_1",
        "city",
        "postal_code",
        "state",
        "country",
        "summary",
        "subtotal",
        "shipping_cost",
        "total_tax",
        "total_cost",
        "module",
        "exports"
      ],
      "mappings": "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",
      "file": "webhooks.js",
      "sourceRoot": "/app/routes/api",
      "sourcesContent": [
        "var mongoose = require('mongoose');\nvar router = require('express').Router();\n// import { getAllProducts, getProductByType, getProductByID, getProductPrice, getProductDesc, getProductsByName, getProductByNameVar } from '../../models/Product';\nimport { checkUser, createUser } from '../../models/User';\nimport { getName } from '../../helpers/fbhelper';\n//\n//\n//\n//ROUTES\n//\n//\n//\n\n// Adds support for GET requests to our webhook\nrouter.get(\"/webhook\", (req, res) => {\n    let VERIFY_TOKEN = process.env.VERIFY_TOKEN;\n\n    // Parse the query params\n    let mode = req.query[\"hub.mode\"];\n    let token = req.query[\"hub.verify_token\"];\n    let challenge = req.query[\"hub.challenge\"];\n\n    // Checks if a token and mode is in the query string of the request\n    if (mode && token) {\n        // Checks the mode and token sent is correct\n        if (mode === \"subscribe\" && token === VERIFY_TOKEN) {\n            // Responds with the challenge token from the request\n            console.log(\"WEBHOOK_VERIFIED\");\n            res.status(200).send(challenge);\n        } else {\n            // Responds with '403 Forbidden' if verify tokens do not match\n            res.sendStatus(403);\n        }\n    }\n});\n\n// Creates the endpoint for our webhook\nrouter.post(\"/webhook\", (req, res) => {\n    let body = req.body;\n\n    // Checks this is an event from a page subscription\n    if (body.object === \"page\") {\n        // Iterates over each entry - there may be multiple if batched\n        body.entry.forEach(function (entry) {\n            // Gets the message. entry.messaging is an array, but\n            // will only ever contain one message, so we get index 0\n            let webhook_event = entry.messaging[0];\n            // console.log(webhook_event);\n\n            // Get the sender PSID\n            let sender_psid = webhook_event.sender.id;\n            // console.log(\"Sender PSID: \" + sender_psid);\n\n            // Check if the event is a message or postback and\n            // pass the event to the appropriate handler function\n            if (webhook_event.message) {\n                if (webhook_event.message.quick_reply) {\n                    handlePostback(sender_psid, webhook_event.message.quick_reply);\n                } else {\n                    handleMessage(sender_psid, webhook_event.message);\n                }\n\n                getName(PAGE_ACCESS_TOKEN, sender_psid, function (response) {\n                    checkUser(sender_psid, response).then(function (user) {\n                        if (user.length == 0) {\n                            createUser(sender_psid, response);\n                        }\n                    });\n                });\n\n            } else if (webhook_event.postback) {\n                handlePostback(sender_psid, webhook_event.postback);\n            }\n        });\n\n        // Returns a '200 OK' response to all requests\n        res.status(200).send(\"EVENT_RECEIVED\");\n    } else {\n        // Returns a '404 Not Found' if event is not from a page subscription\n        res.sendStatus(404);\n    }\n});\n\nlet defaultResponse = generateResponseFromMessage(\n    \"We could not understand your message. Kindly rephrase your message and send us again.\"\n);\n\n// Handles messages events\nasync function handleMessage(sender_psid, received_message) {\n    let response;\n\n    // Check if the message contains text\n    if (received_message.text) {\n        console.log(`Received message: \"${received_message.text}\"`);\n\n        response = await processMessage(sender_psid, received_message);\n        // Default response (for debugging)\n        // Create the payload for a basic text message\n        // response = {\n        //   text: `You sent the message: \"${received_message.text}\".`\n        // };\n    } else {\n        response = defaultResponse;\n        //     // Gets the URL of the message attachment\n        //     let attachment_url = received_message.attachments[0].payload.url;\n    }\n\n    // Sends the response message\n    callSendAPI(sender_psid, response);\n}\n\n// Handles messaging_postbacks events\nfunction handlePostback(sender_psid, received_postback) {\n    let response;\n\n    // Get the payload for the postback\n    let payload = received_postback.payload;\n    console.log(`Received postback: \"${payload}\"`);\n\n    let postback_intent = payload.split(\" \")[0];\n    let postback_content = payload.substring(\n        payload.indexOf(\" \") + 1,\n        payload.length\n    );\n\n    // Set the response based on the postback intent\n    if (postback_intent === \"cart_add\") {\n        // Add to cart\n        response = generateAddCartResponse(sender_psid, postback_content, 1);\n    } else if (postback_intent === \"cart_view\") {\n        response = generateViewCartResponse(sender_psid);\n    } else if (postback_intent === \"enquiry_product\") {\n        response = generateResponseFromMessage(\n            `What would you like to know about our ${postback_content}?`\n        );\n    } else if (postback_intent === \"enquiry_product_attribute\") {\n        let attribute = postback_content.substring(0, postback_content.indexOf(\" \") + 1);\n        let product = postback_content.substring(\n            postback_content.indexOf(\" \") + 1,\n            postback_content.length\n        );\n        response = generateProductEnquiryResponse(product, attribute);\n    } else if (postback_intent === \"checkout\") {\n        response = {\n            attachment: {\n                type: \"template\",\n                payload: {\n                    template_type: \"button\",\n                    text: \"Click on the button below to pay.\",\n                    buttons: [\n                        {\n                            type: \"postback\",\n                            title: \"Pay\",\n                            payload: \"paid\"\n                        }\n                    ]\n                }\n            }\n        };\n    } else if (postback_intent === \"paid\") {\n        response = {\n            attachment: {\n                type: \"template\",\n                payload: {\n                    template_type: \"button\",\n                    text: \"Your order (order no.) is confirmed.\",\n                    buttons: [\n                        {\n                            type: \"postback\",\n                            title: \"View Receipt\",\n                            payload: \"receipt_view\"\n                        }\n                    ]\n                }\n            }\n        };\n    } else if (postback_intent === \"receipt_view\") {\n        response = generateReceiptResponse(sender_psid);\n    }\n\n    if (response == null) {\n        response = defaultResponse();\n    }\n\n    // Send the message to acknowledge the postback\n    callSendAPI(sender_psid, response);\n}\n\n// Sends response messages via the Send API\nfunction callSendAPI(sender_psid, response) {\n    // Uncomment to log response object\n    console.log(response);\n\n    // Construct the message body\n    let request_body = {\n        recipient: {\n            id: sender_psid\n        },\n        message: response\n    };\n\n    // Send the HTTP request to the Messenger Platform\n    request(\n        {\n            uri: \"https://graph.facebook.com/v2.6/me/messages\",\n            qs: { access_token: PAGE_ACCESS_TOKEN },\n            method: \"POST\",\n            json: request_body\n        },\n        (err, res, body) => {\n            if (!err) {\n                console.log(\"Message sent!\");\n            } else {\n                console.error(\"Unable to send message:\" + err);\n            }\n        }\n    );\n}\n\n// Process text message and returns response object to handleMessage()\nfunction processMessage(sender_psid, message) {\n    // NLP: https://developers.facebook.com/docs/messenger-platform/built-in-nlp\n    let entities = message.nlp[\"entities\"];\n\n    // Uncomment to view all entities and their xalues\n    Object.keys(entities).forEach(key => {\n        console.log(\"Entity: \" + key);\n        console.log(entities[key]);\n    });\n\n    // Check greeting\n    let is_greeting =\n        entities[\"greetings\"] != null &&\n        entities[\"greetings\"][0][\"confidence\"] > 0.8; // Greeting threshold set to 0.8 (stricter)\n\n    // Retrieve first intent object\n    let intent = entities[\"intent\"][0];\n\n    if (intent[\"confidence\"] > 0.5) {\n        // Process intent\n        let intent_parts = intent[\"value\"].split(\"_\");\n        let intent_category = intent_parts[0];\n        let intent_subcategory = intent_parts.length > 1 ? intent_parts[1] : null;\n        let response = null;\n\n        switch (intent_category) {\n            case \"recommendation\":\n                // Handle recommendation\n                // response = generateResponseFromMessage(\n                //   \"Message received is a recommendation message.\"\n                // );\n\n                let product_types = [];\n                if (entities[\"product_type\"]) {\n                    console.log(\"Processing product types\");\n                    product_types = entities[\"product_type\"]\n                        .filter(obj => obj[\"confidence\"] > 0.5)\n                        .map(obj => obj[\"value\"]);\n                }\n\n                response = generateRecommendationsResponse(product_types);\n                console.log(response);\n                break;\n\n            case \"enquiry\":\n                // Handle enquiry\n                // response = generateResponseFromMessage(\n                //   \"Message received is an enquiry message.\"\n                // );\n\n                if (intent_subcategory === \"product\") {\n                    // Retrieve product and attribute from entities object\n                    if (entities[\"product\"] && entities[\"product_attribute\"]) {\n                        let product = entities[\"product\"][0][\"value\"];\n                        let attribute = entities[\"product_attribute\"][0][\"value\"];\n                        // Handle product enquiry\n                        response = generateProductEnquiryResponse(product, attribute);\n                    } else if (entities[\"product_type\"] && entities[\"product_attribute\"]) {\n                        // Handle product type enquiry\n                        let product_type = entities[\"product_type\"][0][\"value\"];\n                        let attribute = entities[\"product_attribute\"][0][\"value\"];\n                        response = generateProductTypeEnquiryResponse(product_type, attribute);\n                    } else {\n                        response = defaultResponse;\n                    }\n                } else if (intent_subcategory === \"general\") {\n                    let messages = {\n                        profit:\n                            \"All net revenue earned from the sale of our products and services go towards paying a monthly allowance for our clients' work, as well as their lunch expenses while undergoing training.\",\n                        manufacturer:\n                            \"We support adults with intellectual disabilities. We started a range of social enterprise projects to provide alternative work engagement for our adult trainees.\",\n                        products: \"We sell craft and baker goods.\"\n                    };\n                    // Loop through message keys (entity) and find if entity is in entities\n                    Object.keys(messages).forEach(entity => {\n                        if (response == null && entities[entity]) {\n                            response = generateResponseFromMessage(messages[entity]);\n                        }\n                    });\n                } else if (intent_subcategory === \"delivery\") {\n                    if (entities[\"status\"]) {\n                        // TODO: Order status\n                        response = generateResponseFromMessage(\n                            \"Your latest order is <status>.\"\n                        );\n                    } else if (entities[\"estimated_arrival\"]) {\n                        // TODO: Order estimated arrival\n                        response = generateResponseFromMessage(\n                            \"The average delivery time takes 5-7 working days. Your ordered was sent on <date>. It is estimated to arrive on <date + 7 working days>.\"\n                        );\n                    } else if (entities[\"cost\"]) {\n                        response = generateResponseFromMessage(\n                            \"It is a flat fee of $2 for every order.\"\n                        );\n                    } else {\n                        response = generateResponseFromMessage(\n                            \"We deliver islandwide. The average delivery time takes 5-7 working days.\"\n                        );\n                    }\n                }\n                break;\n\n            case \"cart\":\n                // Handle shopping cart\n                // response = generateResponseFromMessage(\n                //   \"Message received is a cart message.\"\n                // );\n\n                if (intent_subcategory === \"add\" && entities[\"product\"]) {\n                    let product_name = entities[\"product\"][0][\"value\"];\n                    let quantity = entities[\"number\"]\n                        ? entities[\"number\"][0][\"value\"]\n                        : 1;\n                    response = generateAddCartResponse(\n                        sender_psid,\n                        product_name,\n                        quantity\n                    );\n                } else if (intent_subcategory === \"view\") {\n                    response = generateViewCartResponse(sender_psid);\n                }\n                break;\n\n            default:\n                response = defaultResponse;\n        }\n\n        response = response == null ? defaultResponse : response;\n        return response;\n    } else if (is_greeting) {\n        // Message has no intent, just greeting\n        // TODO: Add quick replies of chatbot functionalities (recommendations, check order status, etc.)\n        return generateResponseFromMessage(\n            \"Hi there! Welcome to Bright. How can I help you?\"\n        );\n    }\n\n    // No intent nor greeting\n    return defaultResponse;\n}\n\n// Wrapper method to convert text message string to response object\nfunction generateResponseFromMessage(message) {\n    return {\n        text: message\n    };\n}\n\n// Response on generic template carousel for recommendations\nasync function generateRecommendationsResponse(product_types) {\n    // Retrieve products to recommend based on list of product types. If product types is an empty array, recommend products of various types\n    let products;\n\n    if (product_types.length === 0) {\n        products = await getAllProducts();\n    } else {\n        products = await getProductsByType(product_types[0]);\n    }\n\n    let response = {\n        attachment: {\n            type: \"template\",\n            payload: {\n                template_type: \"generic\",\n                elements: products.map(product => {\n                    return {\n                        title: product[\"title\"],\n                        subtitle: `$${product[\"price\"]}`,\n                        image_url: product[\"image_link\"],\n                        buttons: [\n                            {\n                                type: \"postback\",\n                                title: \"Learn More\",\n                                payload: `enquiry_product ${product[\"title\"]}`\n                            },\n                            {\n                                type: \"postback\",\n                                title: \"Add to Cart\",\n                                payload: `cart_add ${product[\"title\"]}`\n                            }\n                        ]\n                    };\n                })\n            }\n        }\n    };\n    return response;\n}\n\n// Response on confirmation of product added to cart and quick replies\nfunction generateAddCartResponse(sender_psid, product_name, quantity) {\n    // TODO: Add product to cart in db\n\n    return {\n        text: `Added ${quantity} ${product_name} to cart.`,\n        quick_replies: [\n            {\n                content_type: \"text\",\n                title: \"View Cart\",\n                payload: `cart_view`\n            },\n            {\n                content_type: \"text\",\n                title: \"Checkout\",\n                payload: `checkout`\n            }\n        ]\n    };\n}\n\n// Response on generic template carousel for cart\nfunction generateViewCartResponse(sender_psid) {\n    // TODO: Get cart from db\n    let products = [\n        {\n            id: 1,\n            name: \"Dark Chocolate Oatmeal Cookies\",\n            price: 3.5,\n            url:\n                \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n            quantity: 1\n        },\n        {\n            id: 2,\n            name: \"Cranberry Sweetheart Cookies (Eggless)\",\n            price: 3.5,\n            url:\n                \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n            quantity: 2\n        },\n        {\n            id: 3,\n            name: \"Earl Grey Sunflower Seeds Cookies\",\n            price: 3.5,\n            url:\n                \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n            quantity: 1\n        }\n    ];\n    let response = {\n        attachment: {\n            type: \"template\",\n            payload: {\n                template_type: \"generic\",\n                elements: products.map(product => {\n                    return {\n                        title: product[\"name\"],\n                        subtitle: `Qty: ${product[\"quantity\"]} ($${product[\"price\"]} each)`,\n                        image_url: product[\"url\"],\n                        buttons: [\n                            {\n                                type: \"postback\",\n                                title: \"Add 1\",\n                                payload: `cart_add ${product[\"name\"]}`\n                            },\n                            {\n                                type: \"postback\",\n                                title: \"Remove All\",\n                                payload: `cart_remove ${product[\"name\"]}`\n                            }\n                        ]\n                    };\n                })\n            }\n        }\n    };\n    return response;\n}\n\n// Response on receipt template for latest confirmed order\nfunction generateReceiptResponse(sender_psid) {\n    // TODO: Get latest order from database\n    let products = [\n        {\n            id: 1,\n            name: \"Dark Chocolate Oatmeal Cookies\",\n            price: 3.5,\n            url:\n                \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n            quantity: 1\n        },\n        {\n            id: 2,\n            name: \"Cranberry Sweetheart Cookies (Eggless)\",\n            price: 3.5,\n            url:\n                \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n            quantity: 2\n        },\n        {\n            id: 3,\n            name: \"Earl Grey Sunflower Seeds Cookies\",\n            price: 3.5,\n            url:\n                \"https://static.wixstatic.com/media/768979_3fccb2bb837a44caa80bb4fc5dddd119~mv2_d_1800_1800_s_2.jpg\",\n            quantity: 1\n        }\n    ];\n\n    let response = {\n        attachment: {\n            type: \"template\",\n            payload: {\n                template_type: \"receipt\",\n                recipient_name: \"<CUSTOMER_NAME>\", // Mandatory field\n                order_number: \"<ORDER_NUMBER>\", // Mandatory field\n                currency: \"SGD\",\n                payment_method: \"PayPal\",\n                order_url: \"\",\n                address: {\n                    street_1: \"9 Straits View\", // Mandatory field\n                    city: \"Singapore\",\n                    postal_code: \"018937\",\n                    state: \"SG\",\n                    country: \"SG\"\n                },\n                summary: {\n                    subtotal: 10,\n                    shipping_cost: 5,\n                    total_tax: 2,\n                    total_cost: 15\n                },\n                elements: products.map(product => {\n                    return {\n                        title: `${product[\"name\"]}`,\n                        subtitle: \"\",\n                        quantity: product[\"quantity\"],\n                        price: product[\"price\"],\n                        currency: \"SGD\",\n                        image_url: product[\"url\"]\n                    };\n                })\n            }\n        }\n    };\n\n    return response;\n}\n\n// Response on prododuct enquiry\nfunction generateProductEnquiryResponse(product, attribute) {\n    // TODO: Get product from db, create message and generate response\n    return generateResponseFromMessage(\"You are enquiring about the \" + attribute + \" of \" + product);\n}\n\n// Response on prododuct enquiry\nasync function generateProductTypeEnquiryResponse(product_type, attribute) {\n    // TODO: Get product from db, create message and generate response\n    let products = await getProductsByType(product_type);\n    return {\n        text: `Which product are you enquiring about its ${attribute}?`,\n        quick_replies: products.map(product => {\n            return {\n                content_type: \"text\",\n                title: product.title,\n                payload: `enquiry_product_attribute ${attribute} ${product.title}`\n            }\n        })\n    };\n}\n\nmodule.exports = router;"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/helpers/fbhelper.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/helpers\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "getName",
            "getAllProducts",
            "getProductDetails"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "getName",
              "exported": "getName"
            },
            {
              "kind": "local",
              "local": "getAllProducts",
              "exported": "getAllProducts"
            },
            {
              "kind": "local",
              "local": "getProductDetails",
              "exported": "getProductDetails"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/helpers/fbhelper.js",
      "filenameRelative": "/app/helpers/fbhelper.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "fbhelper.js",
      "sourceFileName": "fbhelper.js",
      "sourceRoot": "/app/helpers",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/helpers",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "fbhelper"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n//Gets users name from facebook graph api\nvar request = require(\"request\");\nvar CATLOG_ID = process.env.CATLOG_ID;\nvar fields = \"currency,availability,condition,id,inventory,image_url,name,price,retailer_id,retailer_product_group_id,description,custom_label_0,pattern,product_type,color,url,product_group\";\nvar uri = \"https://graph.facebook.com/v7.0/\";\n\nfunction getName(PAGE_ACCESS_TOKEN, sender_psid, callback) {\n    var name = \"Empty\";\n    request({\n        url: uri + sender_psid,\n        qs: {\n            access_token: PAGE_ACCESS_TOKEN,\n            fields: \"first_name\"\n        },\n        method: \"GET\"\n    }, function (error, response, body) {\n        if (error) {\n            console.log(error);\n        } else {\n            var bodyObj = JSON.parse(body);\n            name = bodyObj.first_name;\n            console.log(\"Name: \" + name);\n            return callback(name);\n        }\n    });\n    return name;\n}\n\n//Get all products with their ID from Facebook\nfunction getAllProducts(PAGE_ACCESS_TOKEN, appsecret_proof) {\n    request({\n        url: uri + CATLOG_ID,\n        qs: {\n            access_token: PAGE_ACCESS_TOKEN,\n            appsecret_proof: appsecret_proof\n        },\n        method: \"GET\"\n    }, function (error, response, body) {\n        if (error) {\n            console.log(error);\n        } else {\n            var bodyObj = JSON.parse(body);\n            console.log(bodyObj);\n        }\n    });\n}\n\n//Gets product details from Facebook\nfunction getProductDetails(productID, callback) {\n    request({\n        url: uri + productID,\n        qs: {\n            access_token: PAGE_ACCESS_TOKEN,\n            fields: reqFields\n        },\n        method: \"GET\"\n    }, function (error, response, body) {\n        if (error) {\n            console.log(error);\n        } else {\n            var bodyObj = JSON.parse(body);\n            console.log(bodyObj);\n            return callback(bodyObj);\n        }\n    });\n}\n\nexports.getName = getName;\nexports.getAllProducts = getAllProducts;\nexports.getProductDetails = getProductDetails;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZiaGVscGVyLmpzIl0sIm5hbWVzIjpbInJlcXVlc3QiLCJyZXF1aXJlIiwiQ0FUTE9HX0lEIiwicHJvY2VzcyIsImVudiIsImZpZWxkcyIsInVyaSIsImdldE5hbWUiLCJQQUdFX0FDQ0VTU19UT0tFTiIsInNlbmRlcl9wc2lkIiwiY2FsbGJhY2siLCJuYW1lIiwidXJsIiwicXMiLCJhY2Nlc3NfdG9rZW4iLCJtZXRob2QiLCJlcnJvciIsInJlc3BvbnNlIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJib2R5T2JqIiwiSlNPTiIsInBhcnNlIiwiZmlyc3RfbmFtZSIsImdldEFsbFByb2R1Y3RzIiwiYXBwc2VjcmV0X3Byb29mIiwiZ2V0UHJvZHVjdERldGFpbHMiLCJwcm9kdWN0SUQiLCJyZXFGaWVsZHMiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQSxJQUFNQSxVQUFVQyxRQUFRLFNBQVIsQ0FBaEI7QUFDQSxJQUFNQyxZQUFZQyxRQUFRQyxHQUFSLENBQVlGLFNBQTlCO0FBQ0EsSUFBTUcsU0FBUyxpTEFBZjtBQUNBLElBQU1DLE1BQU0sa0NBQVo7O0FBRUEsU0FBU0MsT0FBVCxDQUFpQkMsaUJBQWpCLEVBQW1DQyxXQUFuQyxFQUErQ0MsUUFBL0MsRUFBd0Q7QUFDcEQsUUFBSUMsT0FBTyxPQUFYO0FBQ0FYLFlBQVE7QUFDSlksYUFBSU4sTUFBTUcsV0FETjtBQUVKSSxZQUFHO0FBQ0NDLDBCQUFjTixpQkFEZjtBQUVDSCxvQkFBUTtBQUZULFNBRkM7QUFNSlUsZ0JBQU87QUFOSCxLQUFSLEVBT0csVUFBU0MsS0FBVCxFQUFlQyxRQUFmLEVBQXdCQyxJQUF4QixFQUE2QjtBQUM1QixZQUFJRixLQUFKLEVBQVU7QUFDTkcsb0JBQVFDLEdBQVIsQ0FBWUosS0FBWjtBQUNILFNBRkQsTUFFSztBQUNELGdCQUFJSyxVQUFVQyxLQUFLQyxLQUFMLENBQVdMLElBQVgsQ0FBZDtBQUNBUCxtQkFBT1UsUUFBUUcsVUFBZjtBQUNBTCxvQkFBUUMsR0FBUixDQUFZLFdBQVdULElBQXZCO0FBQ0EsbUJBQU9ELFNBQVNDLElBQVQsQ0FBUDtBQUNIO0FBQ0osS0FoQkQ7QUFpQkEsV0FBT0EsSUFBUDtBQUNIOztBQUVEO0FBQ0EsU0FBU2MsY0FBVCxDQUF3QmpCLGlCQUF4QixFQUEwQ2tCLGVBQTFDLEVBQTBEO0FBQ3REMUIsWUFBUTtBQUNKWSxhQUFLTixNQUFNSixTQURQO0FBRUpXLFlBQUc7QUFDQ0MsMEJBQWNOLGlCQURmO0FBRUNrQiw2QkFBaUJBO0FBRmxCLFNBRkM7QUFNSlgsZ0JBQU87QUFOSCxLQUFSLEVBT0csVUFBU0MsS0FBVCxFQUFlQyxRQUFmLEVBQXdCQyxJQUF4QixFQUE2QjtBQUM1QixZQUFJRixLQUFKLEVBQVU7QUFDTkcsb0JBQVFDLEdBQVIsQ0FBWUosS0FBWjtBQUNILFNBRkQsTUFFSztBQUNELGdCQUFJSyxVQUFVQyxLQUFLQyxLQUFMLENBQVdMLElBQVgsQ0FBZDtBQUNBQyxvQkFBUUMsR0FBUixDQUFZQyxPQUFaO0FBQ0g7QUFDSixLQWREO0FBZUg7O0FBR0Q7QUFDQSxTQUFTTSxpQkFBVCxDQUEyQkMsU0FBM0IsRUFBcUNsQixRQUFyQyxFQUE4QztBQUMxQ1YsWUFBUTtBQUNKWSxhQUFJTixNQUFNc0IsU0FETjtBQUVKZixZQUFHO0FBQ0NDLDBCQUFjTixpQkFEZjtBQUVDSCxvQkFBT3dCO0FBRlIsU0FGQztBQU1KZCxnQkFBTztBQU5ILEtBQVIsRUFPRyxVQUFTQyxLQUFULEVBQWVDLFFBQWYsRUFBd0JDLElBQXhCLEVBQTZCO0FBQ2hDLFlBQUlGLEtBQUosRUFBVTtBQUNGRyxvQkFBUUMsR0FBUixDQUFZSixLQUFaO0FBQ0gsU0FGTCxNQUVTO0FBQ0QsZ0JBQUlLLFVBQVVDLEtBQUtDLEtBQUwsQ0FBV0wsSUFBWCxDQUFkO0FBQ0FDLG9CQUFRQyxHQUFSLENBQVlDLE9BQVo7QUFDQSxtQkFBT1gsU0FBU1csT0FBVCxDQUFQO0FBQ0g7QUFDSixLQWZEO0FBZ0JIOztRQUlRZCxPLEdBQUFBLE87UUFBU2tCLGMsR0FBQUEsYztRQUFnQkUsaUIsR0FBQUEsaUIiLCJmaWxlIjoiZmJoZWxwZXIuanMiLCJzb3VyY2VSb290IjoiL2FwcC9oZWxwZXJzIiwic291cmNlc0NvbnRlbnQiOlsiLy9HZXRzIHVzZXJzIG5hbWUgZnJvbSBmYWNlYm9vayBncmFwaCBhcGlcbmNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKFwicmVxdWVzdFwiKTtcbmNvbnN0IENBVExPR19JRCA9IHByb2Nlc3MuZW52LkNBVExPR19JRDtcbmNvbnN0IGZpZWxkcyA9IFwiY3VycmVuY3ksYXZhaWxhYmlsaXR5LGNvbmRpdGlvbixpZCxpbnZlbnRvcnksaW1hZ2VfdXJsLG5hbWUscHJpY2UscmV0YWlsZXJfaWQscmV0YWlsZXJfcHJvZHVjdF9ncm91cF9pZCxkZXNjcmlwdGlvbixjdXN0b21fbGFiZWxfMCxwYXR0ZXJuLHByb2R1Y3RfdHlwZSxjb2xvcix1cmwscHJvZHVjdF9ncm91cFwiO1xuY29uc3QgdXJpID0gXCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92Ny4wL1wiXG5cbmZ1bmN0aW9uIGdldE5hbWUoUEFHRV9BQ0NFU1NfVE9LRU4sc2VuZGVyX3BzaWQsY2FsbGJhY2spe1xuICAgIHZhciBuYW1lID0gXCJFbXB0eVwiO1xuICAgIHJlcXVlc3Qoe1xuICAgICAgICB1cmw6dXJpICsgc2VuZGVyX3BzaWQsXG4gICAgICAgIHFzOntcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogUEFHRV9BQ0NFU1NfVE9LRU4sXG4gICAgICAgICAgICBmaWVsZHM6IFwiZmlyc3RfbmFtZVwiLFxuICAgICAgICB9LFxuICAgICAgICBtZXRob2Q6XCJHRVRcIlxuICAgIH0sIGZ1bmN0aW9uKGVycm9yLHJlc3BvbnNlLGJvZHkpe1xuICAgICAgICBpZiAoZXJyb3Ipe1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdmFyIGJvZHlPYmogPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgICAgICAgICAgbmFtZSA9IGJvZHlPYmouZmlyc3RfbmFtZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTmFtZTogXCIgKyBuYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuYW1lKVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5hbWU7XG59XG5cbi8vR2V0IGFsbCBwcm9kdWN0cyB3aXRoIHRoZWlyIElEIGZyb20gRmFjZWJvb2tcbmZ1bmN0aW9uIGdldEFsbFByb2R1Y3RzKFBBR0VfQUNDRVNTX1RPS0VOLGFwcHNlY3JldF9wcm9vZil7XG4gICAgcmVxdWVzdCh7XG4gICAgICAgIHVybDogdXJpICsgQ0FUTE9HX0lELFxuICAgICAgICBxczp7XG4gICAgICAgICAgICBhY2Nlc3NfdG9rZW46IFBBR0VfQUNDRVNTX1RPS0VOLFxuICAgICAgICAgICAgYXBwc2VjcmV0X3Byb29mOiBhcHBzZWNyZXRfcHJvb2ZcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kOlwiR0VUXCJcbiAgICB9LCBmdW5jdGlvbihlcnJvcixyZXNwb25zZSxib2R5KXtcbiAgICAgICAgaWYgKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHZhciBib2R5T2JqID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJvZHlPYmopXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG4vL0dldHMgcHJvZHVjdCBkZXRhaWxzIGZyb20gRmFjZWJvb2tcbmZ1bmN0aW9uIGdldFByb2R1Y3REZXRhaWxzKHByb2R1Y3RJRCxjYWxsYmFjayl7XG4gICAgcmVxdWVzdCh7XG4gICAgICAgIHVybDp1cmkgKyBwcm9kdWN0SUQsXG4gICAgICAgIHFzOntcbiAgICAgICAgICAgIGFjY2Vzc190b2tlbjogUEFHRV9BQ0NFU1NfVE9LRU4sXG4gICAgICAgICAgICBmaWVsZHM6cmVxRmllbGRzLFxuICAgICAgICB9LFxuICAgICAgICBtZXRob2Q6XCJHRVRcIlxuICAgIH0sIGZ1bmN0aW9uKGVycm9yLHJlc3BvbnNlLGJvZHkpe1xuICAgIGlmIChlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB2YXIgYm9keU9iaiA9IEpTT04ucGFyc2UoYm9keSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhib2R5T2JqKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGJvZHlPYmopXG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG5cbmV4cG9ydCB7IGdldE5hbWUsIGdldEFsbFByb2R1Y3RzLCBnZXRQcm9kdWN0RGV0YWlscyB9OyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "fbhelper.js"
      ],
      "names": [
        "request",
        "require",
        "CATLOG_ID",
        "process",
        "env",
        "fields",
        "uri",
        "getName",
        "PAGE_ACCESS_TOKEN",
        "sender_psid",
        "callback",
        "name",
        "url",
        "qs",
        "access_token",
        "method",
        "error",
        "response",
        "body",
        "console",
        "log",
        "bodyObj",
        "JSON",
        "parse",
        "first_name",
        "getAllProducts",
        "appsecret_proof",
        "getProductDetails",
        "productID",
        "reqFields"
      ],
      "mappings": ";;;;;AAAA;AACA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,YAAYC,QAAQC,GAAR,CAAYF,SAA9B;AACA,IAAMG,SAAS,iLAAf;AACA,IAAMC,MAAM,kCAAZ;;AAEA,SAASC,OAAT,CAAiBC,iBAAjB,EAAmCC,WAAnC,EAA+CC,QAA/C,EAAwD;AACpD,QAAIC,OAAO,OAAX;AACAX,YAAQ;AACJY,aAAIN,MAAMG,WADN;AAEJI,YAAG;AACCC,0BAAcN,iBADf;AAECH,oBAAQ;AAFT,SAFC;AAMJU,gBAAO;AANH,KAAR,EAOG,UAASC,KAAT,EAAeC,QAAf,EAAwBC,IAAxB,EAA6B;AAC5B,YAAIF,KAAJ,EAAU;AACNG,oBAAQC,GAAR,CAAYJ,KAAZ;AACH,SAFD,MAEK;AACD,gBAAIK,UAAUC,KAAKC,KAAL,CAAWL,IAAX,CAAd;AACAP,mBAAOU,QAAQG,UAAf;AACAL,oBAAQC,GAAR,CAAY,WAAWT,IAAvB;AACA,mBAAOD,SAASC,IAAT,CAAP;AACH;AACJ,KAhBD;AAiBA,WAAOA,IAAP;AACH;;AAED;AACA,SAASc,cAAT,CAAwBjB,iBAAxB,EAA0CkB,eAA1C,EAA0D;AACtD1B,YAAQ;AACJY,aAAKN,MAAMJ,SADP;AAEJW,YAAG;AACCC,0BAAcN,iBADf;AAECkB,6BAAiBA;AAFlB,SAFC;AAMJX,gBAAO;AANH,KAAR,EAOG,UAASC,KAAT,EAAeC,QAAf,EAAwBC,IAAxB,EAA6B;AAC5B,YAAIF,KAAJ,EAAU;AACNG,oBAAQC,GAAR,CAAYJ,KAAZ;AACH,SAFD,MAEK;AACD,gBAAIK,UAAUC,KAAKC,KAAL,CAAWL,IAAX,CAAd;AACAC,oBAAQC,GAAR,CAAYC,OAAZ;AACH;AACJ,KAdD;AAeH;;AAGD;AACA,SAASM,iBAAT,CAA2BC,SAA3B,EAAqClB,QAArC,EAA8C;AAC1CV,YAAQ;AACJY,aAAIN,MAAMsB,SADN;AAEJf,YAAG;AACCC,0BAAcN,iBADf;AAECH,oBAAOwB;AAFR,SAFC;AAMJd,gBAAO;AANH,KAAR,EAOG,UAASC,KAAT,EAAeC,QAAf,EAAwBC,IAAxB,EAA6B;AAChC,YAAIF,KAAJ,EAAU;AACFG,oBAAQC,GAAR,CAAYJ,KAAZ;AACH,SAFL,MAES;AACD,gBAAIK,UAAUC,KAAKC,KAAL,CAAWL,IAAX,CAAd;AACAC,oBAAQC,GAAR,CAAYC,OAAZ;AACA,mBAAOX,SAASW,OAAT,CAAP;AACH;AACJ,KAfD;AAgBH;;QAIQd,O,GAAAA,O;QAASkB,c,GAAAA,c;QAAgBE,iB,GAAAA,iB",
      "file": "fbhelper.js",
      "sourceRoot": "/app/helpers",
      "sourcesContent": [
        "//Gets users name from facebook graph api\nconst request = require(\"request\");\nconst CATLOG_ID = process.env.CATLOG_ID;\nconst fields = \"currency,availability,condition,id,inventory,image_url,name,price,retailer_id,retailer_product_group_id,description,custom_label_0,pattern,product_type,color,url,product_group\";\nconst uri = \"https://graph.facebook.com/v7.0/\"\n\nfunction getName(PAGE_ACCESS_TOKEN,sender_psid,callback){\n    var name = \"Empty\";\n    request({\n        url:uri + sender_psid,\n        qs:{\n            access_token: PAGE_ACCESS_TOKEN,\n            fields: \"first_name\",\n        },\n        method:\"GET\"\n    }, function(error,response,body){\n        if (error){\n            console.log(error)\n        }else{\n            var bodyObj = JSON.parse(body);\n            name = bodyObj.first_name;\n            console.log(\"Name: \" + name);\n            return callback(name)\n        }\n    });\n    return name;\n}\n\n//Get all products with their ID from Facebook\nfunction getAllProducts(PAGE_ACCESS_TOKEN,appsecret_proof){\n    request({\n        url: uri + CATLOG_ID,\n        qs:{\n            access_token: PAGE_ACCESS_TOKEN,\n            appsecret_proof: appsecret_proof\n        },\n        method:\"GET\"\n    }, function(error,response,body){\n        if (error){\n            console.log(error)\n        }else{\n            var bodyObj = JSON.parse(body);\n            console.log(bodyObj)\n        }\n    });\n}\n\n\n//Gets product details from Facebook\nfunction getProductDetails(productID,callback){\n    request({\n        url:uri + productID,\n        qs:{\n            access_token: PAGE_ACCESS_TOKEN,\n            fields:reqFields,\n        },\n        method:\"GET\"\n    }, function(error,response,body){\n    if (error){\n            console.log(error)\n        }else{\n            var bodyObj = JSON.parse(body);\n            console.log(bodyObj)\n            return callback(bodyObj)\n        }\n    });\n}\n\n\n\nexport { getName, getAllProducts, getProductDetails };"
      ]
    },
    "mtime": 1592674991000
  },
  "{\"filename\":\"/app/routes/api/test.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/routes/api\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/routes/api/test.js",
      "filenameRelative": "/app/routes/api/test.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "test.js",
      "sourceFileName": "test.js",
      "sourceRoot": "/app/routes/api",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/routes/api",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "test"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nvar router = require('express').Router();\n// For testing endpoints\n\nrouter.get(\"/\", function (req, res) {\n    var body = req.body;\n    // getAllProducts().then(function(products){\n    // console.log(products);\n    // });\n    // getProductByType(\"Baker\").then(function(products){\n    // console.log(products);\n    // });\n    // getProductByID('3060724697352196').then(function(prod){\n    // console.log(prod);\n    // });\n    // getProductPrice('3060724697352196').then(function(price){\n    // console.log(price);\n    // });\n    // getProductDesc('3060724697352196').then(function(description){\n    // console.log(description);\n    // });\n    // getProductsByName('Earl Grey Sunflower Seeds Cookies').then(function(prod){\n    // console.log(prod);\n    // });\n    // getProductByNameVar('Earl Grey Sunflower Seeds Cookies','Gift box').then(function(prod){\n    //     console.log(prod);\n    // });\n    res.status(200).send(\"Success :)\");\n});\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QuanMiXSwibmFtZXMiOlsicm91dGVyIiwicmVxdWlyZSIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsImJvZHkiLCJzdGF0dXMiLCJzZW5kIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxTQUFTQyxRQUFRLFNBQVIsRUFBbUJDLE1BQW5CLEVBQWI7QUFDQTs7QUFFQUYsT0FBT0csR0FBUCxDQUFXLEdBQVgsRUFBZ0IsVUFBQ0MsR0FBRCxFQUFLQyxHQUFMLEVBQVk7QUFDeEIsUUFBSUMsT0FBT0YsSUFBSUUsSUFBZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBRCxRQUFJRSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsWUFBckI7QUFFSCxDQXpCRDs7QUEyQkFDLE9BQU9DLE9BQVAsR0FBaUJWLE1BQWpCIiwiZmlsZSI6InRlc3QuanMiLCJzb3VyY2VSb290IjoiL2FwcC9yb3V0ZXMvYXBpIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHJvdXRlciA9IHJlcXVpcmUoJ2V4cHJlc3MnKS5Sb3V0ZXIoKTtcbi8vIEZvciB0ZXN0aW5nIGVuZHBvaW50c1xuXG5yb3V0ZXIuZ2V0KFwiL1wiLCAocmVxLHJlcykgPT57XG4gICAgbGV0IGJvZHkgPSByZXEuYm9keTtcbiAgICAvLyBnZXRBbGxQcm9kdWN0cygpLnRoZW4oZnVuY3Rpb24ocHJvZHVjdHMpe1xuICAgIC8vIGNvbnNvbGUubG9nKHByb2R1Y3RzKTtcbiAgICAvLyB9KTtcbiAgICAvLyBnZXRQcm9kdWN0QnlUeXBlKFwiQmFrZXJcIikudGhlbihmdW5jdGlvbihwcm9kdWN0cyl7XG4gICAgLy8gY29uc29sZS5sb2cocHJvZHVjdHMpO1xuICAgIC8vIH0pO1xuICAgIC8vIGdldFByb2R1Y3RCeUlEKCczMDYwNzI0Njk3MzUyMTk2JykudGhlbihmdW5jdGlvbihwcm9kKXtcbiAgICAgICAgLy8gY29uc29sZS5sb2cocHJvZCk7XG4gICAgLy8gfSk7XG4gICAgLy8gZ2V0UHJvZHVjdFByaWNlKCczMDYwNzI0Njk3MzUyMTk2JykudGhlbihmdW5jdGlvbihwcmljZSl7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHByaWNlKTtcbiAgICAvLyB9KTtcbiAgICAvLyBnZXRQcm9kdWN0RGVzYygnMzA2MDcyNDY5NzM1MjE5NicpLnRoZW4oZnVuY3Rpb24oZGVzY3JpcHRpb24pe1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkZXNjcmlwdGlvbik7XG4gICAgLy8gfSk7XG4gICAgLy8gZ2V0UHJvZHVjdHNCeU5hbWUoJ0VhcmwgR3JleSBTdW5mbG93ZXIgU2VlZHMgQ29va2llcycpLnRoZW4oZnVuY3Rpb24ocHJvZCl7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2QpO1xuICAgIC8vIH0pO1xuICAgIC8vIGdldFByb2R1Y3RCeU5hbWVWYXIoJ0VhcmwgR3JleSBTdW5mbG93ZXIgU2VlZHMgQ29va2llcycsJ0dpZnQgYm94JykudGhlbihmdW5jdGlvbihwcm9kKXtcbiAgICAvLyAgICAgY29uc29sZS5sb2cocHJvZCk7XG4gICAgLy8gfSk7XG4gICAgcmVzLnN0YXR1cygyMDApLnNlbmQoXCJTdWNjZXNzIDopXCIpO1xuICAgIFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "test.js"
      ],
      "names": [
        "router",
        "require",
        "Router",
        "get",
        "req",
        "res",
        "body",
        "status",
        "send",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,IAAIA,SAASC,QAAQ,SAAR,EAAmBC,MAAnB,EAAb;AACA;;AAEAF,OAAOG,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAKC,GAAL,EAAY;AACxB,QAAIC,OAAOF,IAAIE,IAAf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI;AACJ;AACA;AACI;AACJ;AACA;AACI;AACJ;AACA;AACI;AACJ;AACA;AACA;AACA;AACAD,QAAIE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,YAArB;AAEH,CAzBD;;AA2BAC,OAAOC,OAAP,GAAiBV,MAAjB",
      "file": "test.js",
      "sourceRoot": "/app/routes/api",
      "sourcesContent": [
        "var router = require('express').Router();\n// For testing endpoints\n\nrouter.get(\"/\", (req,res) =>{\n    let body = req.body;\n    // getAllProducts().then(function(products){\n    // console.log(products);\n    // });\n    // getProductByType(\"Baker\").then(function(products){\n    // console.log(products);\n    // });\n    // getProductByID('3060724697352196').then(function(prod){\n        // console.log(prod);\n    // });\n    // getProductPrice('3060724697352196').then(function(price){\n        // console.log(price);\n    // });\n    // getProductDesc('3060724697352196').then(function(description){\n        // console.log(description);\n    // });\n    // getProductsByName('Earl Grey Sunflower Seeds Cookies').then(function(prod){\n        // console.log(prod);\n    // });\n    // getProductByNameVar('Earl Grey Sunflower Seeds Cookies','Gift box').then(function(prod){\n    //     console.log(prod);\n    // });\n    res.status(200).send(\"Success :)\");\n    \n});\n\nmodule.exports = router;"
      ]
    },
    "mtime": 1592674991000
  }
}